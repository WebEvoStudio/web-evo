1:HL["/_next/static/css/3316adebd22c8ace.css",{"as":"style"}]
0:["XbX__VkqVgubYCYn3p5Yq",[[["",{"children":["blogs",{"children":["__PAGE__",{}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/3316adebd22c8ace.css","precedence":"next"}]],"$L3"]]]]
4:I{"id":37328,"chunks":["7831:static/chunks/7831-cfcf47cf4503897d.js","2344:static/chunks/2344-0b45039db8d92264.js","2551:static/chunks/2551-27ec36750a18c820.js","1137:static/chunks/1137-ad4d09b1fad2803d.js","4300:static/chunks/4300-eed5fa655b5c802b.js","7879:static/chunks/7879-ddfae7b2a38e21f8.js","3722:static/chunks/3722-acff5ae523469154.js","3210:static/chunks/3210-ef98482afb028424.js","8320:static/chunks/8320-0ae2b3260a525a2e.js","4518:static/chunks/4518-8496fbce3a7c542a.js","9169:static/chunks/9169-0188139ba3fc4368.js","3185:static/chunks/app/layout-19770c7928f9037a.js"],"name":"","async":false}
5:I{"id":49157,"chunks":["7831:static/chunks/7831-cfcf47cf4503897d.js","2344:static/chunks/2344-0b45039db8d92264.js","2551:static/chunks/2551-27ec36750a18c820.js","1137:static/chunks/1137-ad4d09b1fad2803d.js","4300:static/chunks/4300-eed5fa655b5c802b.js","7879:static/chunks/7879-ddfae7b2a38e21f8.js","3722:static/chunks/3722-acff5ae523469154.js","3210:static/chunks/3210-ef98482afb028424.js","8320:static/chunks/8320-0ae2b3260a525a2e.js","4518:static/chunks/4518-8496fbce3a7c542a.js","9169:static/chunks/9169-0188139ba3fc4368.js","3185:static/chunks/app/layout-19770c7928f9037a.js"],"name":"","async":false}
6:I{"id":41062,"chunks":["2272:static/chunks/webpack-2d840253722d2695.js","9065:static/chunks/16714efa-1bbb78372a611cf4.js","8850:static/chunks/8850-64efc0634ce80b58.js"],"name":"default","async":false}
7:I{"id":93042,"chunks":["2272:static/chunks/webpack-2d840253722d2695.js","9065:static/chunks/16714efa-1bbb78372a611cf4.js","8850:static/chunks/8850-64efc0634ce80b58.js"],"name":"default","async":false}
a:I{"id":12495,"chunks":["7831:static/chunks/7831-cfcf47cf4503897d.js","2344:static/chunks/2344-0b45039db8d92264.js","2551:static/chunks/2551-27ec36750a18c820.js","1137:static/chunks/1137-ad4d09b1fad2803d.js","4300:static/chunks/4300-eed5fa655b5c802b.js","7879:static/chunks/7879-ddfae7b2a38e21f8.js","3722:static/chunks/3722-acff5ae523469154.js","3210:static/chunks/3210-ef98482afb028424.js","8320:static/chunks/8320-0ae2b3260a525a2e.js","4518:static/chunks/4518-8496fbce3a7c542a.js","9169:static/chunks/9169-0188139ba3fc4368.js","3185:static/chunks/app/layout-19770c7928f9037a.js"],"name":"","async":false}
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Web Evo - åšå®¢"}],["$","meta","2",{"name":"description","content":"Web Evoå…¨ç§°Web Evolution (ç½‘ç»œè¿›åŒ–) æ˜¯ä¸€ä¸ªç°ä»£ç½‘ç»œå’¨è¯¢å·¥ä½œå®¤ï¼Œè‡´åŠ›äºå¸®åŠ©å…¬å¸ä¼ä¸šå’Œä¸ªäººå®ç°æ•°å­—åŒ–è½¬å‹ã€‚æˆ‘ä»¬æä¾›è®¾è®¡ã€æ¶æ„ã€å¼€å‘ã€è¿è¥ã€äº§å“æŒ‡å¯¼ç­‰æœåŠ¡ã€‚"}],["$","link","3",{"rel":"manifest","href":"/manifest.json"}],["$","meta","4",{"name":"keywords","content":"Web Evo, Web-Evo, Wev Evolution, WebEvo, web evo, webevo"}],["$","meta","5",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","6",{"name":"bytedance-verification-code","content":"wSvyXEgEi6nNu3eh/eDe"}],["$","meta","7",{"name":"theme-color","content":"#00B0FF"}],["$","meta","8",{"name":"baidu-site-verification","content":"codeva-owAlD1JaUc"}],["$","meta","9",{"name":"msvalidate.01","content":"AB78A0C987D3AEA34B969889512FF33E"}],["$","meta","10",{"name":"google-site-verification","content":"4rS5gjy4-tFOdJO4HvDg0_E4QNcB1D1YeZo29iS4hIY"}],["$","meta","11",{"name":"baidu_union_verify","content":"50312ad0c63983b3fe6c2e2a6e10c386"}],["$","meta","12",{"name":"yandex-verification","content":"00c7edad29c9e045"}],["$","meta","13",{"name":"sogou_site_verification","content":"NxKIJOaIjm"}],["$","meta","14",{"name":"360-site-verification","content":"026caef9c5d27d14371524ad882a339f"}],["$","meta","15",{"name":"shenma-site-verification","content":"ced0831a368866ea173608f4f067519f_1687339017"}],["$","link","16",{"rel":"icon","href":"/favicon.png"}],["$","link","17",{"rel":"apple-touch-icon","href":"/logo192.png"}]]
2:[null,["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","$L4",null,{"children":[["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blogs","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L8","$L9",null],"segment":"__PAGE__"},"styles":[]}],"segment":"blogs"},"styles":[]}]}],[["$","$La",null,{"strategy":"afterInteractive","src":"https://www.googletagmanager.com/gtag/js?id=G-R8ZM6SVZ0K"}],["$","$La",null,{"id":"google-analytics","strategy":"afterInteractive","children":"\n                    window.dataLayer = window.dataLayer || [];\n                    function gtag(){dataLayer.push(arguments);}\n                    gtag('js', new Date());\n                    gtag('config', 'G-R8ZM6SVZ0K');\n                "}]],["$","$La",null,{"id":"microsoft-clarity","dangerouslySetInnerHTML":{"__html":"\n            (function(c,l,a,r,i,t,y){\n        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n        t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n    })(window, document, \"clarity\", \"script\", \"b91ge7rn7p\");\n            "}}],["$","$La",null,{"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1031326139722537","crossOrigin":"anonymous","async":true,"strategy":"afterInteractive"}]]}]}]}],null]
8:null
b:I{"id":97023,"chunks":["8418:static/chunks/7694e0e6-db365cbc6ba243c6.js","7831:static/chunks/7831-cfcf47cf4503897d.js","3210:static/chunks/3210-ef98482afb028424.js","5862:static/chunks/5862-bd8ec52c6153cb65.js","6539:static/chunks/6539-518ace6e2e53f90a.js","5606:static/chunks/app/blogs/page-cdbc61d4a2cd4a65.js"],"name":"","async":false}
c:Te3b,## èƒŒæ™¯

æœ€è¿‘æˆ‘çš„æœ‹å‹å»é¢æŸå¤§å‚å‰ç«¯å²—ä½ï¼Œè¢«é—®åˆ°è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼š**vue ä¸­æ€ä¹ˆåšåˆ°è¾“å…¥æ³•è¾“å…¥æ‹¼éŸ³æ—¶ä¸è§¦å‘ @input äº‹ä»¶å‘¢ï¼Ÿ**

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/ncq6afu8.png">
</figure>

ä»¥å‰è¿˜çœŸæ²¡ç•™æ„è¿‡è¿™ä»¶äº‹æƒ…ï¼Œæ¯•ç«Ÿå¤§éƒ¨åˆ†æ—¶é—´ç”¨ Vue å°±æ˜¯å•çº¯åœ°ç”¨æ¥å¼€å‘é¡¹ç›®ï¼Œå“ªä¼šå»å…³æ³¨ä»–çš„ä¸€äº›ç»†èŠ‚å‘¢ï¼Ÿä¸è¿‡æ—¢ç„¶è¢«é—®åˆ°äº†ï¼Œé‚£å°±è¶æœºäº†è§£ä¸€ä¸‹ï¼Œä¹Ÿæ²¡åå¤„~

## åŸç”Ÿ input äº‹ä»¶

æˆ‘ä»¬å¯ä»¥å…ˆæŠ›å¼€ Vueï¼Œå…ˆæ¥çœ‹çœ‹åŸç”Ÿçš„ input äº‹ä»¶ï¼Œä»–æ˜¯æ€ä¹ˆçš„ä¸€ä¸ªè¡¨ç°

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/640.png">
</figure>

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/640.gif">
</figure>

æœ‰äººè¯´ç”¨é˜²æŠ–å°±èƒ½è§£å†³ï¼Ÿä½†æ˜¯é˜²æŠ–æ˜¯è§£å†³ä¸äº†è¿™ç§æƒ…å†µçš„ï¼Œé˜²æŠ–æ˜¯å‡å°‘è§¦å‘é¢‘ç‡çš„ï¼Œè€Œæœ€ç»ˆè¯¥è§¦å‘å•¥è¿˜æ˜¯å¾—è§¦å‘å•¥äº‹ä»¶ï¼Œä¸ä¿¡æˆ‘å¯ä»¥åŠ ä¸€ä¸ªé˜²æŠ–è¯•è¯•~

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/e01h2u59.png">
</figure>

ç”¨æˆ·åœ¨è¾“å…¥æ‹¼éŸ³çš„è¿‡ç¨‹ä¸­åœé¡¿äº†ä¸€ä¸‹ï¼Œæ‹¼éŸ³ç…§æ ·ä¼šè¢«æ‰“å°å‡ºæ¥

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/641.gif">
</figure>

## Vueçš„@inputäº‹ä»¶

æˆ‘ä»¬å†æ¥çœ‹çœ‹ Vue çš„ @input äº‹ä»¶ï¼Œçœ‹çœ‹è¡¨ç°æ˜¯å¦‚ä½•çš„

```
<Input @input="handleChange" />
```

```
const handleChange = (e: any) => {
  console.log(e.target.value)
};
```

å¯ä»¥çœ‹åˆ° @input äº‹ä»¶è·ŸåŸç”Ÿçš„ input äº‹ä»¶ä¸åŒï¼Œ@input åœ¨è¾“å…¥æ‹¼éŸ³çš„æ—¶å€™å¹¶ä¸ä¼šè§¦å‘ï¼Œè€Œæ˜¯æœ€åå¾—å‡ºè¾“å…¥æ³•ç»“æœæ—¶æ‰ä¼šå»è§¦å‘

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/642.gif">
</figure>

## å’‹åšåˆ°çš„ï¼Ÿ

é‚£ä¹ˆ Vue åˆ°åº•æ˜¯å’‹åšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å» Vue çš„æºç ä¸­æ¢å¯»ï¼Œå¯ä»¥çœ‹åˆ° Vue å†…éƒ¨æ˜¯ç”¨äº†ä¸¤ä¸ªæ–¹æ³•å»å¤„ç†

-   compositionstart
-   compositionend

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/tunzcjuk.png">
</figure>

æˆ‘ä»¬å¯ä»¥å» MDN ä¸ŠæŸ¥æŸ¥è¿™ä¸¤ä¸ªæ–¹æ³•åˆ°åº•æ˜¯ç”¨æ¥å¹²å•¥çš„~å¯ä»¥çœ‹åˆ°ä½ åœ¨è¾“å…¥éœ€è¦åˆæˆçš„å­—ç¬¦ä¸²æ—¶ï¼Œä¼šè§¦å‘è¿™ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚è€Œæˆ‘ä»¬è¾“å…¥æ³•è¾“å…¥æ‹¼éŸ³æ—¶å°±æ˜¯å±äºè¾“å…¥åˆæˆå­—ç¬¦ä¸²çš„æƒ…å†µ~

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/yngkw9zc.png">
</figure>

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/h6jye1xx.png">
</figure>

æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸¤ä¸ªäº‹ä»¶ï¼Œå»æ¨¡æ‹Ÿå®ç°ä¸€ä¸‹ @input çš„æ•ˆæœ~

```
const input = document.getElementById('input');
input.addEventListener('compositionstart', () => {
  console.log('åˆæˆå¼€å§‹');
});
input.addEventListener('compositionend', () => {
  console.log('åˆæˆç»“æŸ');
});
input.oninput = (e) => {
  // æ¨¡æ‹Ÿè¯·æ±‚
  console.log('å‘èµ·è¯·æ±‚', e.target.value);
};
```

å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½ è¾“å…¥æ³•å¼€å§‹è¾“å…¥æ—¶ï¼Œä¼šè§¦å‘`compositionstart`ï¼Œå½“ç»“æŸæ—¶ä¼šè§¦å‘`compositionend`

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/643.gif">
</figure>

æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªå˜é‡ï¼Œå»è®°å½•å½“å‰æ˜¯å¦å±äºè¾“å…¥åˆæˆå­—ç¬¦ä¸²æœŸé—´ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªå˜é‡å½“æˆ input è§¦å‘çš„æ¡ä»¶å³å¯~

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/ia8ncnva.png">
</figure>

è¿™æ ·å°±èƒ½è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå•¦~

<figure>
  <img width="100%" src="https://developers-center.oss-cn-beijing.aliyuncs.com/644.gif">
</figure>


d:T7c2,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)

## é—®é¢˜æè¿°

åœ¨ä½¿ç”¨`input`æ ‡ç­¾çš„æ—¶å€™ï¼Œå¦‚æœè®¾ç½®`type="number"`ï¼Œé‚£ä¹ˆ`maxlength`å±æ€§å°±ä¼šå¤±æ•ˆï¼Œæ— è®ºè®¾ç½®å¤šå°‘ä½æ•°ï¼Œéƒ½å¯ä»¥è¾“å…¥ã€‚

## è§£å†³æ–¹æ¡ˆ

åœ¨`input`æ ‡ç­¾ä¸Šæ·»åŠ `oninput`äº‹ä»¶ï¼Œç„¶ååœ¨äº‹ä»¶ä¸­åˆ¤æ–­è¾“å…¥çš„å€¼æ˜¯å¦è¶…è¿‡äº†`maxlength`çš„å€¼ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå°±æˆªå–å‰é¢çš„å€¼ã€‚

## Htmlä¸­çš„å®ç°

```
<input type="number" maxlength="3" oninput="checkLength(this)" />
<script>
  function checkLength(obj) {
    if (obj.value.length > obj.maxLength) {
      obj.value = obj.value.slice(0, obj.maxLength);
    }
  }
</script>
```
## Vueä¸­çš„å®ç°

```
<template>
  <div>
    <input type="number" maxlength="3" @input="checkLength" />
  </div>
</template>
<script>
export default {
  methods: {
    checkLength(e) {
      if (e.target.value.length > e.target.maxLength) {
        e.target.value = e.target.value.slice(0, e.target.maxLength);
      }
    },
  },
}
</script>
```


## Reactä¸­çš„å®ç°

```
import React from 'react';
export default function App() {
  const checkLength = (obj) => {
    if (obj.value.length > obj.maxLength) {
      obj.value = obj.value.slice(0, obj.maxLength);
    }
  };
  return (
    <div>
      <input type="number" maxLength="3" onInput={checkLength} />
    </div>
  );
}
```

## Angularä¸­çš„å®ç°

```
import { Component } from '@angular/core';
@Component({
  selector: 'app-root',
  template: `<input type="number" maxlength="3" (input)="checkLength($event)" />`,
})
export class AppComponent {
  checkLength(obj) {
    if (obj.value.length > obj.maxLength) {
      obj.value = obj.value.slice(0, obj.maxLength);
    }
  }
}
```

## Svelteä¸­çš„å®ç°

```
<script>
  const checkLength = (obj) => {
    if (obj.value.length > obj.maxLength) {
      obj.value = obj.value.slice(0, obj.maxLength);
    }
  };
</script>
<input type="number" maxlength="3" on:input={checkLength} />
```e:T6f6,

![](http://developers-center.oss-cn-beijing.aliyuncs.com/axios-http.com_1920-1080.png)

## POSTçš„å‡ ç§æäº¤æ–¹å¼

* application/json

> è¿™ä¸ªæ˜¯æˆ‘çš„é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ï¼Œæˆ‘è§‰å¾—è¿™ç§æ ¼å¼çš„å¥½å¤„æ˜¯æŠ“åŒ…çš„æ—¶å€™éå¸¸ç›´è§‚ï¼Œèƒ½å¤Ÿå¾ˆæ¸…æ¥šçš„çœ‹åˆ°dataçš„ç»“æ„ã€‚
axiosé»˜è®¤Content-typeæ˜¯é‡‡ç”¨application/json;charset=UTF-8ï¼Œæ— éœ€è®¾ç½®ç›´æ¥æŠŠå¯¹è±¡ä¼ è¿›å»å³å¯ã€‚è´¼æ–¹ä¾¿ã€‚

* application/x-www-form-urlencoded

> ajax ä¸­ï¼Œ contentTypeéƒ½æ˜¯é»˜è®¤çš„å€¼ï¼šapplication/x-www-form-urlencoded
ç‰¹ç‚¹æ˜¯æäº¤çš„æ•°æ®æŒ‰ç…§ key1=val1&key2=val2 çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œkey å’Œ val ä¼šè¿›è¡Œäº† URL è½¬ç ã€‚

* multipart/form-data

> è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„ POST æ•°æ®æäº¤çš„æ–¹å¼ã€‚æˆ‘ä»¬ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°±è¦è®© form çš„ enctype ç­‰äºè¿™ä¸ªå€¼ã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œå„å¤§æœåŠ¡ç«¯è¯­è¨€å¯¹å®ƒä¹Ÿæœ‰ç€è‰¯å¥½çš„æ”¯æŒã€‚è¿™ä¸ªå’Œapplication/x-www-form-urlencodedçš„åŒºåˆ«åœ¨äºä¸€ä¸ªé€‚åˆä¼ å­—æ®µé”®å€¼ï¼Œä¸€ä¸ªé€‚åˆä¼ æ–‡ä»¶ã€‚

* text/xml

> å’Œapplication/jsonçš„åŒºåˆ«æ˜¯æŠŠä¼ è¾“çš„æ ¼å¼æ¢æˆxmlæ ¼å¼ï¼Œç»“æ„å¤æ‚ï¼Œè‡ƒè‚¿ã€‚åæ­£æˆ‘æ˜¯ä¸ä¼šç”¨ã€‚

é‚£ä¹ˆä½¿ç”¨axioséœ€è¦æ€æ ·è®¾ç½®æ‰èƒ½ä½¿ç”¨ `application/x-www-form-urlencoded` ç¼–ç æ ¼å¼å‘¢ï¼ˆæ¯”è¾ƒç‰¹æ®Šï¼‰ï¼Ÿ
å¦‚æœæˆ‘ä»¬éœ€è¦é‡‡ç”¨è¡¨å•ä¸Šä¼ çš„æ–¹å¼ï¼ˆapplication/x-www-form-urlencodedï¼‰æ¥ç»™åå°ä¼ é€’æ•°æ®çš„è¯ï¼Œåˆ™éœ€è¦å¼•å…¥qsåº“,qsåº“åœ¨æˆ‘ä»¬ å®‰è£… axiosçš„æ—¶å€™å°±å·²ç»ç»™æˆ‘ä»¬é»˜è®¤å®‰è£…äº† è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬éœ€è¦å°†å‚æ•°è½¬æ¢ä¸€ä¸‹:

```
import qs from 'qs'
export function post (url, data = {}) {
  return new Promise((resolve, reject) => {
    axios.post(url, qs.stringify(data))
      .then(response => {
        resolve(response.data)
      }, err => {
        reject(err)
      })
  })
```f:T1282,![](http://developers-center.oss-cn-beijing.aliyuncs.com/image.png)

è®°å½•ä¸€ä¸‹jså…¼å®¹å„ä¸ªæµè§ˆå™¨çš„å¯åŠ¨å’Œé€€å‡ºå…¨å±æ–¹æ³•

JSæ ‡å‡†APIå…¶å®å·²ç»åŒ…å«äº†ç›¸å…³çš„å‡ ä¸ªæ–¹æ³•ï¼š

* å…¨å±æ˜¯å¦å¯ç”¨ï¼š[Document.fullscreenEnabled](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FDocument%2FfullscreenEnabled)
* å¼€å¯å…¨å±ï¼š[Document.requestFullScreen()](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FElement%2FrequestFullScreen)
* é€€å‡ºå…¨å±ï¼š[Document.exitFullscreen()](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDocument%2FexitFullscreen)
* è·å–å…¨å±å…ƒç´ ï¼š[document.mozFullScreenElement](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDocument%2FfullscreenElement)
* ç›‘å¬å…¨å±æ¨¡å¼å˜åŒ–: [fullscreenchange](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDocument%2Ffullscreenchange_event)

## å…¨å±jsåº“æ¨è

* [be-fullğŸš€](https://www.npmjs.com/package/be-full)
> å…¨å±æ˜¾ç¤º, æ”¯æŒPC/ç§»åŠ¨ç«¯, ä¸åˆ°1kb. ğŸš€[åœ¨çº¿æ¼”ç¤º](https://any86.github.io/be-full/example/)

## å…¨å±æ˜¯å¦å¯ç”¨ï¼š Document.fullscreenEnabled

`fullscreenEnabled` å±æ€§æä¾›äº†å¯ç”¨å…¨å±æ¨¡å¼çš„å¯èƒ½æ€§ã€‚å½“å®ƒçš„å€¼æ˜¯ `false` çš„æ—¶å€™ï¼Œè¡¨ç¤ºå…¨å±æ¨¡å¼ä¸å¯ç”¨ï¼ˆå¯èƒ½çš„åŸå› æœ‰ "`fullscreen`" ç‰¹æ€§ä¸è¢«å…è®¸ï¼Œæˆ–å…¨å±æ¨¡å¼ä¸è¢«æ”¯æŒç­‰ ï¼‰

```
function fullscreenEnabled() {
  return (
    document.fullscreenElement ||
    document.mozFullScreenElement ||
    document.webkitFullscreenElement
  );
}
```

## å¯åŠ¨å…¨å±ï¼š Document.exitFullscreen()

`Element.requestFullscreen()` æ–¹æ³•ç”¨äºå‘å‡ºå¼‚æ­¥è¯·æ±‚ä½¿å…ƒç´ è¿›å…¥å…¨å±æ¨¡å¼ã€‚ä½œç”¨æ˜¯è¯·æ±‚æµè§ˆå™¨å°†æŒ‡å®šçš„å…ƒç´ è®¾ç½®ä¸ºå…¨å±æ¨¡å¼ï¼Œ ç»“æœä¼šè¿”å›ä¸€ä¸ª`Promise`ï¼Œå…¨å±æ¨¡å¼è¢«æ¿€æ´»çš„æ—¶å€™å˜æˆ `resolved` çŠ¶æ€ã€‚

å¦‚æœå…¨å±æ¨¡å¼è¢«ç¦ç”¨æˆ–è€…ä¸æ”¯æŒï¼Œåˆ™ä¼šè¿”å›`reject`ã€‚`Document.fullscreenEnabled` å¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ”¯æŒå…¨å±æ¨¡å¼ã€‚

```
function fullscreen(element) {
  if (document.mozFullScreenEnabled) {
    return Promise.reject(new Error("å…¨å±æ¨¡å¼è¢«ç¦ç”¨"));
  }
  let result = null;
  if (element.requestFullscreen) {
    result = element.requestFullscreen();
  } else if (element.mozRequestFullScreen) {
    result = element.mozRequestFullScreen();
  } else if (element.msRequestFullscreen) {
    result = element.msRequestFullscreen();
  } else if (element.webkitRequestFullscreen) {
    result = element.webkitRequestFullScreen();
  }
  return result || Promise.reject(new Error("ä¸æ”¯æŒå…¨å±"));
}
```

## é€€å‡ºå…¨å±ï¼šDocument.exitFullscreen()

`Document.exitFullscreen()`  æ–¹æ³•ç”¨äºè®©å½“å‰æ–‡æ¡£é€€å‡ºå…¨å±æ¨¡å¼ã€‚å…ƒç´ æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚

MDNæœ‰è¿™æ ·çš„ä¸€ä¸ªå¤‡æ³¨ï¼š

> å¦‚æœä¸€ä¸ªå…ƒç´ Aåœ¨è¯·æ±‚è¿›å»å…¨å±æ¨¡å¼ä¹‹å‰ï¼Œå·²ç»å­˜åœ¨å…¶ä»–å…ƒç´ å¤„äºå…¨å±çŠ¶æ€ï¼Œå½“è¿™ä¸ªå…ƒç´ Aé€€å‡ºå…¨å±æ¨¡å¼ä¹‹åï¼Œä¹‹å‰çš„å…ƒç´ ä»ç„¶å¤„äºå…¨å±çŠ¶æ€ã€‚æµè§ˆå™¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå…¨å±å…ƒç´ æ ˆç”¨äºå®ç°è¿™ä¸ªç›®çš„

> Document.exitFullscreen() æ–¹æ³•è®©å…¨å±å…ƒç´ æ ˆçš„æ ˆé¡¶å…ƒç´ é€€å‡ºå…¨å±çŠ¶æ€ï¼Œå¹¶è®©æ–°çš„æ ˆé¡¶çš„å…ƒç´ è¿›å…¥å…¨å±çŠ¶æ€

è¿™å°±æ„å‘³ç€å¯ä»¥æœ‰å¤šä¸ªå…ƒç´ åŒæ—¶å…¨å±ã€‚å¹¶ä¸”è¿™äº›å…¨å±çš„å…ƒç´ è¢«å­˜å‚¨åœ¨ä¸€ä¸ªæ ˆä¸­ã€‚

```
function cancelFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  }
}
```

## è·å–å…¨å±å…ƒç´ ï¼šdocument.mozFullScreenElement

è¯¥æ–¹æ³•å¯ä»¥ç”¨æ¥æ£€æŸ¥å½“å‰æ˜¯å¦æœ‰å…ƒç´ å¤„äºå…¨å±çŠ¶æ€ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿”å›è¯¥å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›nullã€‚

```
  if (document.fullscreenElement === null) {
    console.log("å½“å‰å¤„äºå…¨å±æ¨¡å¼");
  } else {
    console.log("å½“å‰ä¸å¤„äºå…¨å±æ¨¡å¼");
  }
```

## ç›‘å¬å…¨å±æ¨¡å¼å˜åŒ–: fullscreenchange

å®é™…ä¸šåŠ¡ä¸­ä¸€èˆ¬ä¼šå­˜åœ¨ç›‘å¬å…¨å±æ¨¡å¼å˜åŒ–ï¼Œä¾‹å¦‚ï¼šéå…¨å±æ¨¡å¼æ—¶å€™æ˜¾ç¤º"å…¨å±"æŒ‰é’®ï¼Œå…¨å±æ—¶å€™æ˜¾ç¤º"é€€å‡ºå…¨å±"æŒ‰é’®ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬ç›‘å¬å…¨å±çŠ¶æ€æ¥æ§åˆ¶æ“ä½œæŒ‰é’®çš„æ˜¾ç¤ºä¸éšè—ã€‚

```
let isFullscreen = false;

const handler = () => {
  isFullscreen = document.fullscreenElement !== null;
  if (!isFullscreen) {
    // é€€å‡ºå…¨å±æ—¶å€™è§£é™¤ç›‘å¬ï¼Œä¸ç„¶æ¯æ¬¡ç›‘å¬éƒ½ä¼šæ·»åŠ ä¸€æ¬¡ç»‘å®š 
    document.removeEventListener("fullscreenchange", handler);
  }
};

document.addEventListener("fullscreenchange", handler);
```10:T224e,## èƒŒæ™¯

ä¹‹å‰çš„demoåŠ äº†å›¾ç‰‡é¢„è§ˆï¼Œæ‰€ä»¥ä»Šå¤©ä¸‹åˆè¿½ç•ªå‰§ä¹‹åçªç„¶æƒ³åˆ°èƒ½ä¸èƒ½åšä¸€ä¸ªpdfçš„åœ¨çº¿é¢„è§ˆã€‚åŠ¨æ‰‹å§ã€‚ä¸€å¼€å§‹æˆ‘æŸ¥äº†å¾ˆå¤šæ•™ç¨‹ï¼Œå‘ç°å¾ˆå¤šäººéƒ½åœ¨è¯´pdf.jsçš„åº“å½“ç„¶è¿™ä¸ªæ²¡é—®é¢˜ã€‚Pdf.jsç¡®å®å¯ä»¥å®Œç¾çš„å®ç°Pdfåœ¨çº¿é¢„è§ˆçš„è¿‡ç¨‹ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™æ ·ç›´æ¥èµ°å°±ä¸ä¼˜é›…äº†ã€‚äºæ˜¯æˆ‘æ‰¾ç°æˆçš„ç»„ä»¶ï¼Œæ‰¾åˆ°äº†vue-pdfã€‚è™½ç„¶æ²¡æœ‰nativeé‚£ä¹ˆå¼ºå¤§ï¼Œæ¯”å¦‚ä¸æ”¯æŒpdfæ–‡æœ¬å¤åˆ¶ï¼Œæ‰“å°ä¼šæœ‰ä¹±ç ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰å·²ç»è¶³å¤Ÿæ»¡è¶³æˆ‘çš„éœ€æ±‚äº†ã€‚è¿™ä¸ªç¬”è®°æ˜¯ä¸€æ­¥ä¸€æ­¥çš„ï¼Œä»åŸºç¡€æ¼”ç¤ºåˆ°èƒ½ç”¨çš„ç¨‹åº¦ã€‚æ–‡ç« æœ€ååˆ—ä¸¾äº†ä½ åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚

## å®‰è£…ï¼š

```
npm install --save vue-pdf
```

## vue-pdf åˆä½“éªŒï¼š

å®‰è£…å®Œæˆåï¼Œä½¿ç”¨vue-pdféå¸¸ç®€å•ï¼Œå’Œå…¶ä»–ç»„ä»¶æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ä»£ç å¦‚ä¸‹:

å¼•å…¥ç»„ä»¶ï¼š

```
<script>
import pdf from 'vue-pdf'
export default {
  components:{
      pdf
  },
  data(){
      return {
          url:"http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf",
      }
  }
</script>   
```

ç„¶ååœ¨é¡µé¢ä¸Šç”¨vue-pdfï¼ŒåŠ æ ‡ç­¾å°±è¡Œäº†ï¼š

```
<template>
<div>
  <pdf 
    ref="pdf"
    :src="url">
  </pdf>
</div>
</template>
```

é‡å¯ä½ çš„é¡¹ç›®ï¼Œè®¿é—®è¿™ä¸ªç•Œé¢ï¼Œä½ ä¼šå‘ç°pdfå·²ç»å¤§æ¦‚ç‡æˆåŠŸæ˜¾ç¤ºåœ¨ä½ çš„ç•Œé¢ä¸Šäº†ã€‚æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå°±åœ¨ä½ å‡†å¤‡æ‹¿èµ·ä¸€æ ¹çƒŸï¼Œç‚¹ç‡ƒå®ƒï¼Œå’Œèˆ’é€‚ç¾ä¸½çš„ç´¢ç½—æ²³ä¸€èµ·äº«å—ä½ æˆåŠŸçš„æ°ä½œçš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ï¼Œ* *ç¥åœ£çš„ç‹—å±ï¼Œä¸ºä»€ä¹ˆåªæœ‰ä¸€é¡µ* *ï¼Œå½“çœ¼é•œç¢°åœ¨ä¸€èµ·ï¼Œæ¢¦ç¢çš„å£°éŸ³å……æ–¥ä¸–ç•Œã€‚

æ‰€ä»¥ï¼Œè¿™åªæ˜¯ç¬¬ä¸€æ¬¡ç»å†ã€‚å¦‚æœä½ çš„pdfåªæœ‰ä¸€é¡µï¼Œå½“ç„¶è¿™æ ·å†™æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å½“æˆ‘ä»¬çš„pdfæœ‰å¾ˆå¤šé¡µçš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å®ƒä¸è¡Œäº†ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•è®©å®ƒæ˜¾ç¤ºå¤šä¸ªé¡µé¢ã€‚

## vue-pdf æ¸å…¥ä½³å¢ƒï¼š

å…¶å®æ˜¾ç¤ºå¤šä¸ªé¡µé¢ä¹Ÿæ²¡é‚£ä¹ˆå¤æ‚ã€‚ä¸€æ¬¡æ˜¾ç¤ºä¸€é¡µã€‚æˆ‘ï¼Œç›´æ¥v-forå¾ªç¯ï¼Œç›´æ¥æ˜¾ç¤ºã€‚ç®€å•ç²—æš´ã€‚

é¡µé¢ä»£ç :

```
<template>
	<div>
	<pdf  v-for="i in numPages" :key="i"  :src="url" :page="i"></pdf>	
	</div>
</template>

<script>
	import pdf from 'vue-pdf'
	export default {
		components: {
			pdf
		},
		data(){
			 return{
				    url: '',
				    numPages:1,
			 }
		 },
		mounted: function() {
		  this.getNumPages("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")
		  
		}, 
		methods: {
			getNumPages(url) {
				var loadingTask = pdf.createLoadingTask(url)
				loadingTask.then(pdf => {
					this.url = loadingTask
					this.numPages = pdf.numPages
				}).catch((err) => {
					console.error('pdfåŠ è½½å¤±è´¥')
				})
			},
		}
	}
</script>
```

å±æ€§ï¼š

-   url ï¼špdf æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨çº¿è·¯å¾„ã€‚
-   numPages ï¼š pdf æ–‡ä»¶æ€»é¡µæ•°ã€‚

getNumPages è®¡ç®—æ€»é¡µæ•°ï¼Œé¡ºä¾¿ç»™urlå’ŒnumPagesèµ‹å€¼ã€‚

ä½ å”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯è¿™å¥è¯:

```
this.getNumPages("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")
```

æ³¨æ„å•Šï¼Œè¿™å¥ä¸ä¸€å®šéè¦å†™åˆ°mountedé‡Œé¢ï¼Œä½ æƒ³å†™å“ªå°±å†™å“ªï¼Œæ¯”å¦‚ä½ å‰ç«¯è¯·æ±‚åç«¯ï¼Œåç«¯è¿”å›ä¸€ä¸ªpdf çš„urlï¼Œåœ¨é‚£é‡Œå†™å°±è¡Œï¼Œå†™åœ¨ä½ éœ€è¦çš„åœ°æ–¹ã€‚

## vue-pdf è½»è½¦ç†Ÿè·¯ï¼š

å¾ˆå¤šäººçœ‹åˆ°è¿™ä¸ªï¼Œå°±åœ¨è¿™é‡Œï¼Œå°±åœ¨è¿™é‡Œï¼Ÿä¸‡ä¸€æˆ‘çš„pdfæœ‰ä¸€åƒé¡µï¼Œæˆ‘çš„æµè§ˆå™¨åº”è¯¥ä¸ä¼šè¢«ç ´è§£ã€‚æˆ‘è¿½æ±‚çš„æ˜¯åœ¨ä¸€ä¸ªå¾®é†ºçš„ä¸‹åˆç¿»é˜…ä¹¦é¡µçš„æ„Ÿè§‰ã€‚ä½ èƒ½ç»™æˆ‘å—ï¼Ÿ

ä¸è¡Œï¼Œä¸è¡Œï¼Œæˆ‘ä¿è¯è®©ä½ æ»¡æ„ã€‚

```
<template>
	<div>
		<div class="tools">
			<bk-button :theme="'default'" type="submit" :title="'åŸºç¡€æŒ‰é’®'" @click.stop="prePage" class="mr10"> ä¸Šä¸€é¡µ</bk-button>
			<bk-button :theme="'default'" type="submit" :title="'åŸºç¡€æŒ‰é’®'" @click.stop="nextPage" class="mr10"> ä¸‹ä¸€é¡µ</bk-button>
			<div class="page">{{pageNum}}/{{pageTotalNum}} </div>
			<bk-button :theme="'default'" type="submit" :title="'åŸºç¡€æŒ‰é’®'" @click.stop="clock" class="mr10"> é¡ºæ—¶é’ˆ</bk-button>
			<bk-button :theme="'default'" type="submit" :title="'åŸºç¡€æŒ‰é’®'" @click.stop="counterClock" class="mr10"> é€†æ—¶é’ˆ</bk-button>
		</div>
		<pdf ref="pdf" 
		:src="url" 
		:page="pageNum"
		:rotate="pageRotate"  
		@progress="loadedRatio = $event"
		@page-loaded="pageLoaded($event)" 
		@num-pages="pageTotalNum=$event" 
		@error="pdfError($event)" 
		@link-clicked="page = $event">
		</pdf>
	</div>
</template>
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹è¿™äº›æ˜¯ä»€ä¹ˆã€‚

å‚æ•°ä»‹ç»ï¼š

-   `page`: å½“å‰æ˜¾ç¤ºçš„é¡µæ•°ï¼Œæ¯”å¦‚ç¬¬ä¸€é¡µpage=1
-   `rotate` ï¼š æ—‹è½¬è§’åº¦ï¼Œæ¯”å¦‚0å°±æ˜¯ä¸æ—‹è½¬ï¼Œ+90ï¼Œ-90 å°±æ˜¯æ°´å¹³æ—‹è½¬ã€‚
-   `progress` ï¼šå½“å‰é¡µé¢çš„åŠ è½½è¿›åº¦ï¼ŒèŒƒå›´æ˜¯0-1 ï¼Œç­‰äº1çš„æ—¶å€™ä»£è¡¨å½“å‰é¡µå·²ç»å®Œå…¨åŠ è½½å®Œæˆäº†ã€‚
-   `page-loaded` ï¼šé¡µé¢åŠ è½½æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œä¸å’‹èƒ½ç”¨åˆ°ã€‚
-   `num-pages` ï¼šæ€»é¡µæ•°
-   `error` ï¼šåŠ è½½é”™è¯¯çš„å›è°ƒ
-   `link-clicked`ï¼šå•æœºpdfå†…çš„é“¾æ¥ä¼šè§¦å‘ã€‚

å…¶ä»–ï¼š

-   print è¿™ä¸ªæ˜¯æ‰“å°å‡½æ•°ã€‚ æ³¨æ„ï¼šè°·æ­Œæµè§ˆå™¨ä¼šå‡ºç°ä¹±ç ï¼Œè¿™ä¸ªå’Œå­—ä½“æœ‰å…³ç³»ã€‚

æ¥ï¼Œjsä»£ç èµ°ä¸€ä¸ª:

```
<script>
	import pdf from 'vue-pdf'
	export default {
		name: 'Home',
		components: {
			pdf
		},
		data() {
			return {
				url: "http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf",
				pageNum: 1,
				pageTotalNum: 1,
				pageRotate: 0,
				// åŠ è½½è¿›åº¦
				loadedRatio: 0,
				curPageNum: 0,
			}
		},
		mounted: function() {},
		methods: {
            // ä¸Šä¸€é¡µå‡½æ•°ï¼Œ
			prePage() {
				var page = this.pageNum
				page = page > 1 ? page - 1 : this.pageTotalNum
				this.pageNum = page
			},
            // ä¸‹ä¸€é¡µå‡½æ•°
			nextPage() {
				var page = this.pageNum
				page = page < this.pageTotalNum ? page + 1 : 1
				this.pageNum = page
			},
            // é¡µé¢é¡ºæ—¶é’ˆç¿»è½¬90åº¦ã€‚
			clock() {
				this.pageRotate += 90
			},
            // é¡µé¢é€†æ—¶é’ˆç¿»è½¬90åº¦ã€‚
			counterClock() {
				this.pageRotate -= 90
			},
            // é¡µé¢åŠ è½½å›è°ƒå‡½æ•°ï¼Œå…¶ä¸­eä¸ºå½“å‰é¡µæ•°
			pageLoaded(e) {
				this.curPageNum = e
			},
            // å…¶ä»–çš„ä¸€äº›å›è°ƒå‡½æ•°ã€‚
			pdfError(error) {
				console.error(error)
			},
		}
	}
</script>
```

å…¶ä»–Saoæ“ä½œ:

```
// æ‰“å°å…¨éƒ¨
pdfPrintAll() {
	this.$refs.pdf.print()
		},
// æ‰“å°æŒ‡å®šéƒ¨åˆ†
pdfPrint() {
	this.$refs.pdf.print(100, [1, 2])
	},
```

å…·ä½“é£æ ¼ä»€ä¹ˆçš„æˆ‘å°±ä¸è´´äº†ã€‚è¿™äº›éƒ½ä¸æ˜¯é‡ç‚¹ï¼Œå¯ä»¥æ”¹æˆè‡ªå·±çš„ã€‚

æˆå“å±•ç¤º:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7ad8892249345e5a2fb29295a7e4983~tplv-k3u1fbpfcp-zoom-1.image)

## å…¶ä»–é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆï¼š

### å¦‚ä½•åŠ è½½æœ¬åœ°pdfæ–‡ä»¶(2020.4.27æ›´æ–°)ï¼š

è¯„è®ºåŒºæœ‰äººæåˆ°è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»Šå¤©ä¸­åˆè¯•äº†ä¸€ä¸‹ï¼Œæ²¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°é…ç½®flie-loaderã€‚å¦åˆ™webpackæ— æ³•ç¼–è¯‘pdfæ–‡ä»¶ï¼Œé…ç½®æ–¹æ³•éå¸¸ç®€å•ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªvue.config.jsæ–‡ä»¶ï¼Œæˆ‘å‘ç°å¾ˆå¤šäººåªæ˜¯å»babel.config.jsé…ç½®ä¸€ä¸‹ã€‚è¿™æ˜¯é”™è¯¯çš„ï¼Œè‚¯å®šä¼šç»™å‡ºé”™è¯¯ã€‚

å…ˆå®‰è£…file-loader:

```
npm install --save file-loader
å¤åˆ¶ä»£ç 
```

ç„¶ååœ¨vue.config.jsä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
module.exports = {
    chainWebpack: config => {
        const fileRule = config.module.rule('file')
        fileRule.uses.clear()
        fileRule
            .test(/.pdf|ico$/)
            .use('file-loader')
            .loader('file-loader')
            .options({
                limit: 10000,
            })
    },
    publicPath: './'
}
```

ä¹‹åå†`url:require("../assets/1.pdf")`å°±æ²¡æœ‰ä»»ä½•é—®é¢˜äº†ï¼Œæ³¨æ„ï¼Œvue-pdf srcæ¥æ”¶çš„æ˜¯stringå¯¹è±¡ï¼Œå¦‚æœç›´æ¥ä¼ urlæˆ‘è¿™é‡ŒæŠ¥é”™äº†ï¼Œä½ å¯èƒ½éœ€è¦ä¼ `url.default`ä¸€ä¸‹ã€‚

### è·¨åŸŸé—®é¢˜ï¼š

ç½‘ä¸Šç”¨pdf.js å¾ˆå¤šéƒ½ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œè¿™ä¸ªæˆ‘ä»Šå¤©å®é™…åº”ç”¨åˆ°è‡ªå·±çš„é¡¹ç›®é‡Œé¢äº†ï¼Œç”±äºæˆ‘æœåŠ¡ç«¯è®¾ç½®äº†è·¨åŸŸï¼Œæ‰€ä»¥æ²¡æœ‰å‡ºç°è·¨åŸŸçš„é—®é¢˜ï¼Œå¦‚æœå‡ºç°è·¨åŸŸéœ€è¦ä¿®æ”¹ä½ åç«¯çš„è¯·æ±‚å¤´ã€‚

### æ‰“å°ç•Œé¢å­—ç¬¦ä¹±ç ï¼š

è¿™ä¸ªæˆ‘å€’æ˜¯ç¢°åˆ°äº†ï¼Œè°·æ­Œæµè§ˆå™¨æ‰“å°çš„æ—¶å€™ï¼Œé¢„è§ˆç•Œé¢çœŸçš„å˜æˆäº† çœŸÂ·æ–¹å—å­— ï¼Œå…¨æ˜¯æ–¹å—ã€‚è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºä½ pdfä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰å­—ä½“å¯¼è‡´çš„ï¼Œå…·ä½“è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š

é¦–å…ˆï¼Œæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼šnode_modules/vue-pdf/src/pdfjsWrapper.js

ç„¶åæ ¹æ®githubä¸Šè¿™ä¸ªissueï¼Œå…¶ä¸­çº¢è‰²çš„æ˜¯è¦åˆ æ‰çš„ï¼Œç»¿è‰²çš„æ˜¯è¦åŠ ä¸Šå»çš„ï¼Œç…§ç€æ”¹å°±å¯ä»¥è§£å†³äº†ã€‚

åœ°å€ï¼š [github.com/FranckFreibâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFranckFreiburger%2Fvue-pdf%2Fpull%2F130%2Fcommits%2F253f6186ff0676abf9277786087dda8d95dd8ea7 "https://github.com/FranckFreiburger/vue-pdf/pull/130/commits/253f6186ff0676abf9277786087dda8d95dd8ea7")

æ ¹æ®æˆ‘çš„å®é™…æµ‹è¯•ï¼Œæ˜¯å¯ä»¥è§£å†³æ‰“å°ä¹±ç çš„é—®é¢˜çš„ã€‚11:Tcd5,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)

## é¡¹ç›®ç»“æ„

```
â”œâ”€public
â””â”€src
    â”œâ”€assets
    â”‚  â”œâ”€images
    â”‚  â””â”€svg
    â”œâ”€components
    â”‚  â””â”€custom-component.vue
    â”œâ”€core
    â”‚  â”œâ”€api
    â”‚  â”œâ”€libs
    â”‚  â”œâ”€links
    â”‚  â””â”€utils
    â”‚      â””â”€request.js
    â”œâ”€layouts
    â”œâ”€pages
    â”‚  â””â”€index.vue
    â”œâ”€plugins
    â”œâ”€router
    â”‚   â””â”€index.js
    â”œâ”€stores
    â”œâ”€styles
    â””â”€themes
```

## åœ¨jsä¸­ä½¿ç”¨è·¯ç”±è·³è½¬

åœ¨vue3ä¸­æˆ‘ä»¬ä½¿ç”¨comAPIï¼Œä½†æ˜¯åœ¨è‡ªå·±å°è£…çš„jsé‡Œé¢ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨useRouter ,useRouteï¼Œä»–ä»¬éœ€è¦åœ¨setupä¸­è°ƒç”¨æ‰§è¡Œåæ‰èƒ½ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è·¯ç”±å®ä¾‹ï¼š

`/src/core/utils/request.js`

```js
import router from '../../router';
router.push('/login')
```

## å®šä¹‰v-modelå±æ€§

`/src/components/custom-component.vue`
```
<template>
  <div>{{infos}}</div>
</template>
<script setup>
const props = defineProps(['infos'])
const emits = defineEmits(['update:infos'])
setTimeout(() => {
  emits('update:infos', 'hello v-model')
}, 2000)
</script>
```

ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶

`/src/pages/index.vue`

```
<template>
  <div>
    <custom-component v-model:infos="infos"></custom-component>
  </div>
</template>

<script setup>
import {ref} from 'vue';
import CustomComp from '../components/custom-component.vue';
const infos = ref('hello custom-comp');
</script>
```

## çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•

`å­ç»„ä»¶ Child.vue`

```
<template>
  <div>å­é¡µé¢è®¡æ•°ï¼š{{ count }}</div>
</template>

<script setup>
import { ref } from "vue";

const count = ref(0);
const add = () => {
  count.value++;
};
const addCustom = (value) => {
  count.value += value;
};
defineExpose({
  add,
  addCustom
})
</script>
```

`çˆ¶ç»„ä»¶ Index.vue`
```
<template>
  <div>
    <Child ref="child"></Child>
    <br />
    çˆ¶é¡µé¢æŒ‰é’®ï¼š<button @click="handleAdd">ç‚¹å‡»+1</button>
    <br />
    çˆ¶é¡µé¢æŒ‰é’®ï¼š<button @click="handleAddCustom">(æ·»åŠ è‡ªå®šä¹‰æ•°å€¼)ç‚¹å‡»+10</button>
  </div>
</template>

<script setup>
import { ref } from "vue";
import Child from "./Child";

const child = ref();
const handleAdd = () => {
  child.value.add();
};
const handleAddCustom = () => {
  child.value.addCustom(10);
};
</script>
```
## ä½¿ç”¨ keep-alive ç¼“å­˜ç»„ä»¶çŠ¶æ€

1. ä¿®æ”¹ `<router-view></route-view>` éƒ¨åˆ†

    ```
    <template>
      <router-view v-slot="{ Component }">
        <keep-alive>
          <component :is="Component"/>
        </keep-alive>
      </router-view> 
    </template>
    ```

2. å­ç»„ä»¶çŠ¶æ€åˆ·æ–°

    - æ–¹æ¡ˆä¸€ ä½¿ç”¨ `keep-alive` çš„ç”Ÿå‘½å‘¨æœŸï¼š`activated`
    
        `child.vue`
        ```
        <script setup>
            activated() {
               // TODO: è¿™é‡Œå¤„ç†éœ€è¦åˆ·æ–°çš„çŠ¶æ€
            },
        </script>
        ```
    - æ–¹æ¡ˆäºŒ é€šè¿‡ç›‘å¬è·¯ç”±ç­‰å‘ç”Ÿæ”¹å˜éœ€è¦æ”¹å˜çš„åœºæ™¯
    
        `child.vue`

        ```
        <script setup>
        import {watch} from 'vue';
        import {useRoute} from 'vue-router';
        const route = useRoute();
        watch(() => route.params.id, (id) => {
          // TODO: è¿™é‡Œå¤„ç†éœ€è¦åˆ·æ–°çš„çŠ¶æ€
        });
        </script>
        ```12:Tbef,![](https://developers-center.oss-cn-beijing.aliyuncs.com/undraw_static_assets_rpm6.svg)

## å¾®ä¿¡webview

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨å¾®ä¿¡ä¸­æ‰“å¼€;

```js
function isWeChat() {
    return (/MicroMessenger/i.test(window.navigator.userAgent));
}
```

## Androidç³»ç»Ÿ

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨å®‰å“ç³»ç»Ÿä¸­æ‰“å¼€;

```js
function isAndroid() {
    return /Android/i.test(navigator.userAgent) || /Linux/i.test(navigator.appVersion);
}
```
## è‹¹æœæ‰‹æœº

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨è‹¹æœæ‰‹æœºä¸­æ‰“å¼€;

```js
function isIphone() {
    return /iPhone/i.test(navigator.userAgent);
}
```

## Iosç³»ç»Ÿ

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨Iosç³»ç»Ÿä¸­æ‰“å¼€;

```js
function isIOS() {
    return (/ipad|iphone/i.test(navigator.userAgent));
}
```
## Safariæµè§ˆå™¨

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨Safariæµè§ˆå™¨ä¸­æ‰“å¼€;

```js
function isSafari() {
    return (/msie|applewebkit.+safari/i.test(navigator.userAgent));
}
```

## Windows

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨Windowsç³»ç»Ÿä¸­æ‰“å¼€;

```js
function isWindows() {
    return /windows|win32/i.test(navigator.userAgent);
}
```

## Mac

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨Macç³»ç»Ÿä¸­æ‰“å¼€;

```js
function isMac() {
    return /macintosh|mac os x/i.test(navigator.userAgent);
}
```

## ç§»åŠ¨ç«¯(æ‰‹æœº)

åˆ¤æ–­ç½‘é¡µæ˜¯å¦åœ¨ç§»åŠ¨ç«¯æ‰“å¼€;

```js
function isMobile() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
}
```

## PWA(Progressive web appsï¼Œæ¸è¿›å¼ Web åº”ç”¨)

åˆ¤æ–­ç½‘é¡µæ˜¯å¦ä»¥PWAæ¨¡å¼æ‰“å¼€;

```js
function isPwa() {
    return ["fullscreen", "standalone", "minimal-ui"].some(
        (displayMode) => window.matchMedia('(display-mode: ' + displayMode + ')').matches
    );
}
```

## å®Œæ•´ä»£ç å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨

`runtime-env.js` `runtime-env.ts`

```js
export class RuntimeEnv {
  /**
   * å¾®ä¿¡webview
   * @return {boolean}
   */
  static isWeChat() {
    return (/MicroMessenger/i.test(window.navigator.userAgent));
  }
  /**
   * Androidç³»ç»Ÿ
   * @return {boolean}
   */
  static isAndroid() {
    return /Android/i.test(navigator.userAgent) || /Linux/i.test(navigator.appVersion);
  }
  /**
   * è‹¹æœæ‰‹æœº
   * @return {boolean}
   */
  static isIphone() {
    return /iPhone/i.test(navigator.userAgent);
  }
  /**
   * Iosç³»ç»Ÿ
   * @return {boolean}
   */
  static isIOS() {
    return (/ipad|iphone/i.test(navigator.userAgent));
  }
  /**
   * Safariæµè§ˆå™¨
   * @return {boolean}
   */
  static isSafari() {
    return (/msie|applewebkit.+safari/i.test(navigator.userAgent));
  }
  /**
   * Windows
   * @return {boolean}
   */
  static isWindows() {
    return /windows|win32/i.test(navigator.userAgent);
  }
  /**
   * Mac
   * @return {boolean}
   */
  static isMac() {
    return /macintosh|mac os x/i.test(navigator.userAgent);
  }
  static isMobile() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
  }
  static isPwa() {
    return ["fullscreen", "standalone", "minimal-ui"].some(
        (displayMode) => window.matchMedia('(display-mode: ' + displayMode + ')').matches
    );
  }
}
```13:T1be0,iPhoneX å–æ¶ˆäº†ç‰©ç†æŒ‰é”®ï¼Œæ”¹æˆåº•éƒ¨å°é»‘æ¡ï¼Œè¿™ä¸€æ”¹åŠ¨å¯¼è‡´ç½‘é¡µå‡ºç°äº†æ¯”è¾ƒå°´å°¬çš„å±å¹•é€‚é…é—®é¢˜ã€‚å¯¹äºç½‘é¡µè€Œè¨€ï¼Œé¡¶éƒ¨ï¼ˆåˆ˜æµ·éƒ¨ä½ï¼‰çš„é€‚é…é—®é¢˜æµè§ˆå™¨å·²ç»åšäº†å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³æ³¨åº•éƒ¨ä¸å°é»‘æ¡çš„é€‚é…é—®é¢˜å³å¯ï¼ˆå³å¸¸è§çš„å¸åº•å¯¼èˆªã€è¿”å›é¡¶éƒ¨ç­‰å„ç§ç›¸å¯¹åº•éƒ¨ fixed å®šä½çš„å…ƒç´ ï¼‰ã€‚

ç¬”è€…é€šè¿‡æŸ¥é˜…äº†ä¸€äº›å®˜æ–¹æ–‡æ¡£ï¼Œä»¥åŠç»“åˆå®é™…é¡¹ç›®ä¸­çš„ä¸€äº›å¤„ç†ç»éªŒï¼Œæ•´ç†äº†ä¸€å¥—ç®€å•çš„é€‚é…æ–¹æ¡ˆåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œä»¥ä¸‹æ˜¯å¤„ç†å‰åæ•ˆæœå›¾ï¼š

![](http://developers-center.oss-cn-beijing.aliyuncs.com/2692140-3ce5b351236f8139.png)

## é€‚é…ä¹‹å‰éœ€è¦äº†è§£çš„å‡ ä¸ªæ–°çŸ¥è¯†

### å®‰å…¨åŒºåŸŸ

å®‰å…¨åŒºåŸŸæŒ‡çš„æ˜¯ä¸€ä¸ªå¯è§†çª—å£èŒƒå›´ï¼Œå¤„äºå®‰å…¨åŒºåŸŸçš„å†…å®¹ä¸å—åœ†è§’ï¼ˆcornersï¼‰ã€é½åˆ˜æµ·ï¼ˆsensor housingï¼‰ã€å°é»‘æ¡ï¼ˆHome Indicatorï¼‰å½±å“ï¼Œå¦‚ä¸‹å›¾è“è‰²åŒºåŸŸï¼š

![](http://developers-center.oss-cn-beijing.aliyuncs.com/2692140-d9540c615721d55f.png)

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦åšå¥½é€‚é…ï¼Œå¿…é¡»ä¿è¯é¡µé¢å¯è§†ã€å¯æ“ä½œåŒºåŸŸæ˜¯åœ¨å®‰å…¨åŒºåŸŸå†…ã€‚

æ›´è¯¦ç»†è¯´æ˜ï¼Œå‚è€ƒæ–‡æ¡£ï¼šÂ [Human Interface Guidelines - iPhoneX](https://developer.apple.com/ios/human-interface-guidelines/overview/iphone-x/)

### viewport-fit

iOS11 æ–°å¢ç‰¹æ€§ï¼Œè‹¹æœå…¬å¸ä¸ºäº†é€‚é… iPhoneX å¯¹ç°æœ‰ viewport meta æ ‡ç­¾çš„ä¸€ä¸ªæ‰©å±•ï¼Œç”¨äºè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼ï¼Œå¯è®¾ç½®ä¸‰ä¸ªå€¼ï¼š

-   contain: å¯è§†çª—å£å®Œå…¨åŒ…å«ç½‘é¡µå†…å®¹ï¼ˆå·¦å›¾ï¼‰
-   coverï¼šç½‘é¡µå†…å®¹å®Œå…¨è¦†ç›–å¯è§†çª—å£ï¼ˆå³å›¾ï¼‰
-   autoï¼šé»˜è®¤å€¼ï¼Œè·Ÿ contain è¡¨ç°ä¸€è‡´

![](http://developers-center.oss-cn-beijing.aliyuncs.com/2692140-a6dde8b38ea30aff.png)

> æ³¨æ„ï¼šç½‘é¡µé»˜è®¤ä¸æ·»åŠ æ‰©å±•çš„è¡¨ç°æ˜¯ viewport-fit=containï¼Œéœ€è¦é€‚é… iPhoneX å¿…é¡»è®¾ç½® viewport-fit=coverï¼Œè¿™æ˜¯é€‚é…çš„å…³é”®æ­¥éª¤ã€‚

æ›´è¯¦ç»†è¯´æ˜ï¼Œå‚è€ƒæ–‡æ¡£ï¼šÂ [viewport-fit-descriptor](https://www.w3.org/TR/css-round-display-1/#viewport-fit-descriptor)

### env() å’Œ constant()

iOS11 æ–°å¢ç‰¹æ€§ï¼ŒWebkit çš„ä¸€ä¸ª CSS å‡½æ•°ï¼Œç”¨äºè®¾å®šå®‰å…¨åŒºåŸŸä¸è¾¹ç•Œçš„è·ç¦»ï¼Œæœ‰å››ä¸ªé¢„å®šä¹‰çš„å˜é‡ï¼š

-   safe-area-inset-leftï¼šå®‰å…¨åŒºåŸŸè·ç¦»å·¦è¾¹è¾¹ç•Œè·ç¦»
-   safe-area-inset-rightï¼šå®‰å…¨åŒºåŸŸè·ç¦»å³è¾¹è¾¹ç•Œè·ç¦»
-   safe-area-inset-topï¼šå®‰å…¨åŒºåŸŸè·ç¦»é¡¶éƒ¨è¾¹ç•Œè·ç¦»
-   safe-area-inset-bottomï¼šå®‰å…¨åŒºåŸŸè·ç¦»åº•éƒ¨è¾¹ç•Œè·ç¦»

è¿™é‡Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ safe-area-inset-bottom è¿™ä¸ªå˜é‡ï¼Œå› ä¸ºå®ƒå¯¹åº”çš„å°±æ˜¯å°é»‘æ¡çš„é«˜åº¦ï¼ˆæ¨ªç«–å±æ—¶å€¼ä¸ä¸€æ ·ï¼‰ã€‚

> æ³¨æ„ï¼šå½“ viewport-fit=contain æ—¶ env() æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå¿…é¡»è¦é…åˆ viewport-fit=cover ä½¿ç”¨ã€‚å¯¹äºä¸æ”¯æŒenv() çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨å°†ä¼šå¿½ç•¥å®ƒã€‚

åœ¨è¿™ä¹‹å‰ï¼Œç¬”è€…ä½¿ç”¨çš„æ˜¯ constant()ï¼Œåæ¥ï¼Œå®˜æ–¹æ–‡æ¡£åŠ äº†è¿™ä¹ˆä¸€æ®µæ³¨é‡Šï¼ˆå‘ï¼‰ï¼š

> The env() function shipped in iOS 11 with the name constant(). Beginning with Safari Technology Preview 41 and the iOS 11.2 beta, constant() has been removed and replaced with env(). You can use the CSS fallback mechanism to support both versions, if necessary, but should prefer env() going forward.

è¿™å°±æ„å‘³ç€ï¼Œä¹‹å‰ä½¿ç”¨çš„ constant() åœ¨ iOS11.2 ä¹‹åå°±ä¸èƒ½ä½¿ç”¨çš„ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åšå‘åå…¼å®¹ï¼Œåƒè¿™æ ·ï¼š

```
padding-bottom: constant(safe-area-inset-bottom); /* å…¼å®¹ iOS < 11.2 */
padding-bottom: env(safe-area-inset-bottom); /* å…¼å®¹ iOS >= 11.2 */
```

æ³¨æ„ï¼šenv() è·Ÿ constant() éœ€è¦åŒæ—¶å­˜åœ¨ï¼Œè€Œä¸”é¡ºåºä¸èƒ½æ¢ã€‚

æ›´è¯¦ç»†è¯´æ˜ï¼Œå‚è€ƒæ–‡æ¡£ï¼šÂ [Designing Websites for iPhone X](https://webkit.org/blog/7929/designing-websites-for-iphone-x/?hmsr=funteas.com&utm_medium=funteas.com&utm_source=funteas.com)

## å¦‚ä½•é€‚é…

äº†è§£äº†ä»¥ä¸Šæ‰€è¯´çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€‚é…çš„æ€è·¯å°±å¾ˆæ¸…æ™°äº†ã€‚

### ç¬¬ä¸€æ­¥ï¼šè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼

æ–°å¢ viweport-fit å±æ€§ï¼Œä½¿å¾—é¡µé¢å†…å®¹å®Œå…¨è¦†ç›–æ•´ä¸ªçª—å£ï¼š

```
<meta name="viewport" content="width=device-width, viewport-fit=cover">
```

å‰é¢ä¹Ÿæœ‰æåˆ°è¿‡ï¼Œåªæœ‰è®¾ç½®äº† viewport-fit=coverï¼Œæ‰èƒ½ä½¿ç”¨ env()ã€‚

### ç¬¬äºŒæ­¥ï¼šé¡µé¢ä¸»ä½“å†…å®¹é™å®šåœ¨å®‰å…¨åŒºåŸŸå†…

è¿™ä¸€æ­¥æ ¹æ®å®é™…é¡µé¢åœºæ™¯é€‰æ‹©ï¼Œå¦‚æœä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œå¯èƒ½å­˜åœ¨å°é»‘æ¡é®æŒ¡é¡µé¢æœ€åº•éƒ¨å†…å®¹çš„æƒ…å†µã€‚

```
body {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}
```

### ç¬¬ä¸‰æ­¥ï¼šfixed å…ƒç´ çš„é€‚é…

#### ç±»å‹ä¸€ï¼šfixed å®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom = 0ï¼‰ï¼Œæ¯”å¦‚ä¸‹å›¾è¿™ä¸¤ç§æƒ…å†µï¼š


![](http://developers-center.oss-cn-beijing.aliyuncs.com/2692140-2418ec8e3d444790.png)

å¯ä»¥é€šè¿‡åŠ å†…è¾¹è· padding æ‰©å±•é«˜åº¦ï¼š

```
{
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}
```

æˆ–è€…é€šè¿‡è®¡ç®—å‡½æ•° calc è¦†ç›–åŸæ¥é«˜åº¦ï¼š

```
{
  height: calc(60px(å‡è®¾å€¼) + constant(safe-area-inset-bottom));
  height: calc(60px(å‡è®¾å€¼) + env(safe-area-inset-bottom));
}
```

> æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ¡ˆéœ€è¦å¸åº•æ¡å¿…é¡»æ˜¯æœ‰èƒŒæ™¯è‰²çš„ï¼Œå› ä¸ºæ‰©å±•çš„éƒ¨åˆ†èƒŒæ™¯æ˜¯è·Ÿéšå¤–å®¹å™¨çš„ï¼Œå¦åˆ™å‡ºç°é•‚ç©ºæƒ…å†µã€‚

è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆå°±æ˜¯ï¼Œå¯ä»¥é€šè¿‡æ–°å¢ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼ˆç©ºçš„é¢œè‰²å—ï¼Œä¸»è¦ç”¨äºå°é»‘æ¡é«˜åº¦çš„å ä½ï¼‰ï¼Œç„¶åå¸åº•å…ƒç´ å¯ä»¥ä¸æ”¹å˜é«˜åº¦åªéœ€è¦è°ƒæ•´ä½ç½®ï¼Œåƒè¿™æ ·ï¼š

```
{
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
```

ç©ºçš„é¢œè‰²å—ï¼š

```
{
  position: fixed;
  bottom: 0;
  width: 100%;
  height: constant(safe-area-inset-bottom);
  height: env(safe-area-inset-bottom);
  background-color: #fff;
}
```

#### ç±»å‹äºŒï¼šfixed éå®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom â‰  0ï¼‰ï¼Œæ¯”å¦‚ â€œè¿”å›é¡¶éƒ¨â€ã€â€œä¾§è¾¹å¹¿å‘Šâ€ ç­‰

åƒè¿™ç§åªæ˜¯ä½ç½®éœ€è¦å¯¹åº”å‘ä¸Šè°ƒæ•´ï¼Œå¯ä»¥ä»…é€šè¿‡å¤–è¾¹è· margin æ¥å¤„ç†ï¼š

```
{
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
```

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¡ç®—å‡½æ•° calc è¦†ç›–åŸæ¥ bottom å€¼ï¼š

```
{
  bottom: calc(50px(å‡è®¾å€¼) + constant(safe-area-inset-bottom));
  bottom: calc(50px(å‡è®¾å€¼) + env(safe-area-inset-bottom));
}
```

### ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ @supports éš”ç¦»å…¼å®¹æ ·å¼

å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¸¸è§çš„ä¸¤ç§ç±»å‹çš„ fixed å…ƒç´ é€‚é…æ–¹æ¡ˆå·²ç»äº†è§£äº†å§ã€‚å¦‚æœæˆ‘ä»¬åªå¸Œæœ› iPhoneX æ‰éœ€è¦æ–°å¢é€‚é…æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ @supports æ¥éš”ç¦»å…¼å®¹æ ·å¼ï¼Œå½“ç„¶è¿™ä¸ªå¤„ç†å¯¹é¡µé¢å±•ç¤ºå®é™…ä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼š

```
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {
  div {
    margin-bottom: constant(safe-area-inset-bottom);
    margin-bottom: env(safe-area-inset-bottom);
  }
}
```

## å†™åœ¨æœ€å

ä»¥ä¸Šå‡ ç§æ–¹æ¡ˆä»…ä¾›å‚è€ƒï¼Œç¬”è€…è®¤ä¸ºï¼Œç°é˜¶æ®µé€‚é…å¤„ç†èµ·æ¥æ˜¯æœ‰ç‚¹æŠ˜è…¾ï¼Œä½†æ˜¯è‡³å°‘èƒ½è§£å†³ï¼Œå…·ä½“éœ€è¦æ ¹æ®é¡µé¢å®é™…åœºæ™¯ï¼Œåœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒä¸æ“ä½œçš„å¤§å‰æä¸‹ä¸æ–­å°è¯•ä¸æ¢ç´¢ï¼Œæ‰èƒ½æ›´å®Œç¾çš„é€‚é…ã€‚

æ¥æº: [äº¬ä¸œé›¶å”®å®˜æ–¹è®¾è®¡ä½“éªŒå¹³å°](https://jelly.jd.com/article/6006b1055b6c6a01506c87fd)14:T605,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)

## èƒŒæ™¯

é¡¹ç›®ä¸­çš„å¤šä¸ªé¡µé¢å…¶ä¸­çš„å˜é‡åŠæ–¹æ³•é‡å¤å‡ºç°ï¼Œæ¯ä¸ªé¡µé¢ç»„ä»¶éƒ½å»æ‰‹å†™ä¸€éï¼Œè¿™æ ·çš„ä»£ç é‡å¤ªå¤§ï¼Œä¸åˆ©äºç»´æŠ¤ã€‚

å…¶æ¬¡è¿™æ ·çš„ä»£ç ä¹Ÿä¸æ˜¯ç‰¹åˆ«ä¼˜é›…ï¼Œé‚£ä¹ˆå¦‚ä½•è®©ä»£ç æ›´ä¼˜é›…å‘¢ï¼Ÿç†Ÿæ‚‰é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é€‰æ‰‹éƒ½ä¼šæƒ³åˆ°é€šè¿‡ç»§æ‰¿å»æŠŠç›¸ä¼¼çš„ç±»çš„æ“ä½œé€šè¿‡ç»§æ‰¿æ¥å®ç°ã€‚

é‚£ä¹ˆè¿™æ ·çš„ç»§æ‰¿åœ¨vueä¸­æ€ä¹ˆå®ç°å‘¢ï¼Ÿ

## ç¯å¢ƒ

* ![](https://img.shields.io/badge/vue-2.6.10-green)
* ![](https://img.shields.io/badge/vue--cli-4.5.17-green)
* ![](https://img.shields.io/badge/typescript-4.7.3-blue)
* ![](https://img.shields.io/badge/vue--class--component-^7.2.6-green)
* ![](https://img.shields.io/badge/vue--property--decorator-^9.1.2-green)

## å®ç°

ä¸Šé¢ç†è®ºæœ‰äº† æ¥ä¸‹æ¥å°±æ˜¯å®è·µäº†

### åˆ›å»º mixin æ–‡ä»¶

`test.mixin.ts`

```typescript
import { Vue, Provide, Component } from "vue-property-decorator";
@Component
export default class TestMixin extends Vue {
  @Provide() protected version: string = "1.0.0";
}
```

### ä½¿ç”¨ mixins

```

<template>
  <button @click="handlerClick">button</button>
</template>

<script lang="ts">
import TestMixin from "@/mixins/test.mixin";
import Test2Mixin from "@/mixins/test2.mixin";
import {Component, Mixins} from "vue-property-decorator";

@Component()
export default class Home extends Mixins(TestMixin, Test2Mixin) {
  private handlerClick() {
    console.log(this.version);
  }
}
</script>

```
15:T8b2,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)

## èƒŒæ™¯

åœ¨ç»´æŠ¤å·²æœ‰çš„ vue 2 é¡¹ç›®çš„æ—¶å€™å¼•å…¥äº† typescript è¿›è¡Œæ··åˆå¼€å‘ï¼Œæ–°çš„æ¨¡å—ä½¿ç”¨ typescript å¼€å‘ï¼Œæ—§çš„æ¨¡å—ä½¿ç”¨ vue å¼€å‘ï¼Œè¿™æ ·çš„æ··åˆå¼€å‘æ–¹å¼ [å…·ä½“æ··åˆæ–¹æ¡ˆå¯ä»¥çœ‹è¿™é‡Œ](http://developer.bulv.life/blogs/62a7e9c7957f80472322d084)ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

é¡¹ç›®ä¸­tsæ–‡ä»¶åŠç»„ä»¶åªèƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ï¼š

```js
import Button from '../../../../components/upload/Upload'
```
å¾ˆæ˜¾ç„¶ï¼Œè¿™æ ·çš„è·¯å¾„å¾ˆé•¿ï¼Œå¦‚æœç»„ä»¶å±‚æ¬¡å¾ˆæ·±ï¼Œé‚£ä¹ˆç›¸å¯¹è·¯å¾„å°±ä¼šå¾ˆé•¿ï¼Œå› æ­¤è¿™ç§æƒ…å†µä¸‹å¾ˆæœ‰å¿…è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚

## ç¯å¢ƒ

* ![](https://img.shields.io/badge/vue-2.6.10-green)
* ![](https://img.shields.io/badge/vue--cli-4.5.17-green)
* ![](https://img.shields.io/badge/typescript-4.7.3-blue)

## è§£å†³æ–¹æ¡ˆ

åœ¨webpackä¸­ï¼Œä½¿ç”¨aliasåŠŸèƒ½ï¼Œå¯ä»¥ä½¿å¾—æˆ‘ä»¬ä½¿ç”¨ç»å¯¹è·¯å¾„. `webpack.config.js`

```js
module.exports = {
  //...
  resolve: {
    alias: {
      '@src': path.resolve(__dirname, '../src')
    }
  }
}
```

è€Œæˆ‘ä»¬çš„é¡¹ç›®ä¸º vue-cli 4.xï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ `vue.config.js` ä¸­é…ç½® `resolve` å±æ€§ï¼Œå¹¶ä¸”é…ç½® `alias` å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„äº†ã€‚

`vue.config.js`

```js
const path = require("path");
module.exports = {
  configureWebpack: {
    resolve: {
      alias: {
        "@": path.resolve(__dirname, "./src"),
      }
    }
  }
}
```
è€Œé¡¹ç›®æœ¬èº«åœ¨æœªè¿›è¡Œtsæ··åˆå¼€å‘çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦é…ç½® `resolve` å±æ€§ï¼Œä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨ç»å¯¹è·¯å¾„äº†ï¼Œè¿™æ˜¯ç”±äº vue-cli å·²ç»é»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½äº†ã€‚ 

ç”±æ­¤çœ‹æ¥æˆ‘ä»¬çš„é¡¹ç›®å¹¶éæ˜¯ `webpack` é…ç½®å¼•å‘çš„æ— æ³•ä½¿ç”¨ç»å¯¹è·¯å¾„çš„é—®é¢˜ï¼Œè€Œæ˜¯ typeScript ä¸è®¤è¯†webpackçš„é…ç½®çš„ç»å¯¹è·¯å¾„çš„é—®é¢˜ã€‚

æ‰€ä»¥åœ¨ `tsconfig.json` ä¸­é…ç½® `compilerOptions` å±æ€§ï¼Œå¹¶ä¸”é…ç½® `paths` å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„äº†ã€‚

```json
{
  "baseUrl": ".",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "src/*"
      ]
    }
  }
}
```

åˆ°æ­¤æˆ‘ä»¬å°±å¯ä»¥æ”¾å¿ƒä½¿ç”¨ç»å¯¹è·¯å¾„äº†ã€‚16:T679,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)
## ç¯å¢ƒ

* ![](https://img.shields.io/badge/vue-2.6.10-green)
* ![](https://img.shields.io/badge/vue--cli-4.5.17-green)
* ![](https://img.shields.io/badge/typescript-4.7.3-blue)

## é…ç½®


é…ç½®æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è´´ä»£ç äº†ï¼š

```
// vue.config.js

const { ESBuildMinifyPlugin } = require('esbuild-loader');

module.exports = {
  // ...

  chainWebpack: (config) => {
    // ä½¿ç”¨ esbuild ç¼–è¯‘ js æ–‡ä»¶
    const rule = config.module.rule('js');

    // æ¸…ç†è‡ªå¸¦çš„ babel-loader
    rule.uses.clear();

    // æ·»åŠ  esbuild-loader
    rule
      .use('esbuild-loader')
      .loader('esbuild-loader')
      .options({
        loader: 'ts', // å¦‚æœä½¿ç”¨äº† ts, æˆ–è€… vue çš„ class è£…é¥°å™¨ï¼Œåˆ™éœ€è¦åŠ ä¸Šè¿™ä¸ª option é…ç½®ï¼Œ å¦åˆ™ä¼šæŠ¥é”™ï¼š ERROR: Unexpected "@"
        target: 'es2015',
        tsconfigRaw: require('./tsconfig.json')
      })

    // åˆ é™¤åº•å±‚ terser, æ¢ç”¨ esbuild-minimize-plugin
    config.optimization.minimizers.delete('terser');

    // ä½¿ç”¨ esbuild ä¼˜åŒ– css å‹ç¼©
    config.optimization
      .minimizer('esbuild')
      .use(ESBuildMinifyPlugin, [{ minify: true, css: true }]);
  }
}

```

## äº†è§£ esbuild


1.  [ã€Œ ä¸æ‡‚å°±é—® ã€esbuild å¿«åœ¨å“ªé‡Œ ?](https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000040076960 "https://segmentfault.com/a/1190000040076960")
1.  [ã€Œ ä¸æ‡‚å°±é—® ã€webpack æ‰“åŒ…çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªé‡Œ ï¼Ÿ](https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000040083830 "https://segmentfault.com/a/1190000040083830")17:T6e3,
![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_javascript_frameworks_-8-qpc.svg)


å†™ä¹ æƒ¯tsåå°±ä¸æƒ³å†™jsäº†ï¼Œæ­£å¥½æŠŠæ‰‹å¤´çš„çº¯jsé¡¹ç›®è½¬æˆæ··åˆçš„ï¼Œæ–°ä»£ç ç”¨tsï¼Œæ—§ä»£ç æ…¢æ…¢æ”¹é€ 

## package.jsonéœ€è¦ä¸‹è½½çš„åº“

```
// webpackä¸­çš„ts-loader
"ts-loader"
// ä¸è§£é‡Š
"typescript"
// ä¸‹é¢ä¸¤ä¸ªæ˜¯vue tsç›¸å…³çš„
"vue-class-component"
"vue-property-decorator"
```

## tsconfigç›¸å…³ï¼ˆé…ç½®å®Œåè¦é‡å¯IDEï¼‰

1.  æ ¹ç›®å½•å»ºä¸€ä¸ª **vue-shim.d.ts** æ–‡ä»¶

```
declare module '*.vue' {
  import Vue from 'vue';

  export default Vue;
}

// overwrite windowï¼Œè¿™å—ä»£ç åªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œæ ¹æ®ä½ éœ€è¦æ¥
interface Window {
  _actions: Array<string>;
}

```

2.  æ ¹ç›®å½•å»ºä¸€ä¸ª **tsconfig.json** æ–‡ä»¶

```
{
  "compilerOptions": {
    "baseUrl": ".",
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    "strict": true,
    "allowJs": true,
    "sourceMap": true,
    "moduleResolution": "node"
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
  ],
  "files": [
    "./vue-shim.d.ts"
  ]
}
```

## webpacké…ç½®(vue.config.js)

å› ä¸ºæ˜¯ä½¿ç”¨vue-cliåˆ›å»ºçš„é¡¹ç›®ï¼Œæ‰€ä»¥åœ¨vue.config.jsé‡Œä¿®æ”¹ã€‚åªéœ€è¦ä¿®æ”¹ä¸‰ä¸ªåœ°æ–¹å°±å¥½

```

module.exports = {
    resolve: {
        extensions: ['.ts', '.tsx', '.js', '.json'],
    }
    configureWebpack: {
        resolve: { extensions: [".ts", ".tsx", ".js", ".json"] },
        module: {
            rules: [
                {
                  test: /\.tsx?$/,
                  loader: 'ts-loader',
                  exclude: /node_modules/,
                  options: {
                    appendTsSuffixTo: [/\.vue$/],
                  }
                }
            ]
        }
    }
}
```18:Tac5,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_static_assets_rpm6.svg)
## 1.åœ¨ color ä¸­é…ç½®æ¸å˜è‰²ï¼š

[echarts é…ç½®é¡¹](https://echarts.apache.org/zh/option.html)

```javascript
// çº¿æ€§æ¸å˜ï¼Œå‰å››ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ x0, y0, x2, y2, èŒƒå›´ä» 0 - 1ï¼Œç›¸å½“äºåœ¨å›¾å½¢åŒ…å›´ç›’ä¸­çš„ç™¾åˆ†æ¯”ï¼Œå¦‚æœ globalCoord ä¸º `true`ï¼Œåˆ™è¯¥å››ä¸ªå€¼æ˜¯ç»å¯¹çš„åƒç´ ä½ç½®
const linearGradientColor = {
    type: 'linear',
    x: 0,
    y: 0,
    x2: 0,
    y2: 1,
    colorStops: [{
        offset: 0, color: 'red' // 0% å¤„çš„é¢œè‰²
    }, {
        offset: 1, color: 'blue' // 100% å¤„çš„é¢œè‰²
    }],
    globalCoord: false // ç¼ºçœä¸º false
};
// å¾„å‘æ¸å˜ï¼Œå‰ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯åœ†å¿ƒ x, y å’ŒåŠå¾„ï¼Œå–å€¼åŒçº¿æ€§æ¸å˜
const radialGradientColor = {
    type: 'radial',
    x: 0.5,
    y: 0.5,
    r: 0.5,
    colorStops: [{
        offset: 0, color: 'red' // 0% å¤„çš„é¢œè‰²
    }, {
        offset: 1, color: 'blue' // 100% å¤„çš„é¢œè‰²
    }],
    globalCoord: false // ç¼ºçœä¸º false
}
// çº¹ç†å¡«å……
const textureFillColor = {
    image: imageDom, // æ”¯æŒä¸º HTMLImageElement, HTMLCanvasElementï¼Œä¸æ”¯æŒè·¯å¾„å­—ç¬¦ä¸²
    repeat: 'repeat' // æ˜¯å¦å¹³é“º, å¯ä»¥æ˜¯ 'repeat-x', 'repeat-y', 'no-repeat'
}
const option = {
    series: [
        {
            type: 'line',
            areaStyle: {
                color: linearGradientColor||radialGradientColor||textureFillColor
            },
        },
    ],
};
chart.setOption({option})
```

## 2.ä½¿ç”¨echartså†…ç½®çš„æ¸å˜è‰²ç”Ÿæˆå™¨echarts.graphic.LinearGradient

echartsçš„å®˜æ–¹APIä¸­éƒ½æ²¡æœ‰å¯¹è¿™ä¸ªAPIæ·»åŠ è¯´æ˜æ–‡æ¡£, æ•…ç”¨æœ¬ç¯‡æ–‡ç« æ¥ç®€ç•¥è¯´æ˜å…¶ç”¨æ³•.

```javascript
const color = new echarts.graphic.LinearGradient(
    0, 0, 0, 1,
    [
        {offset: 0, color: '#000'},
        {offset: 0.5, color: '#888'},
        {offset: 1, color: '#ddd'}
    ]
);
const option = {
    series: [
        {
            type: 'line',
            areaStyle: {
                color: color,
            },
        },
    ],
};
chart.setOption({option})
```

0ï¼Œ0ï¼Œ0ï¼Œ1åˆ†åˆ«ä»£è¡¨äº†å³ã€ä¸‹ã€å·¦ã€ä¸Šå››ä¸ªä½ç½®çš„é¢œè‰²åæ ‡

é€šè¿‡ä¿®æ”¹è¿™4ä¸ªå‚æ•°, å¯ä»¥å®ç°ä¸åŒçš„æ¸å˜æ–¹å‘, å¦‚:
0 1 0 0 ä»£è¡¨ä»æ­£ä¸‹æ–¹å‘æ­£ä¸Šæ–¹æ¸å˜;
1 0 0 1 ä»£è¡¨ä»å³ä¸Šæ–¹å‘å·¦ä¸‹æ–¹æ¸å˜,

ç¬¬5ä¸ªå‚æ•°åˆ™æ˜¯ä¸€ä¸ªæ•°ç»„, ç”¨äºé…ç½®é¢œè‰²çš„æ¸å˜è¿‡ç¨‹. æ¯ä¸€é¡¹ä¸ºä¸€ä¸ªå¯¹è±¡, åŒ…å«offsetå’Œcolorä¸¤ä¸ªå‚æ•°. offsetçš„èŒƒå›´æ˜¯0 ~ 1, ç”¨äºè¡¨ç¤ºä½ç½®, colorä¸ç”¨å¤šè¯´è‚¯å®šæ˜¯è¡¨ç¤ºé¢œè‰²äº†. åƒç¤ºä¾‹ä»£ç çš„é…ç½®åˆ™è¡¨ç¤º:
æ•´ä¸ªæ¸å˜è¿‡ç¨‹æ˜¯ä»æ­£ä¸Šæ–¹å‘æ­£ä¸‹æ–¹å˜åŒ–
èµ·å§‹(offset: 0)é¢œè‰²ä¸º#000, å˜åŒ–åˆ°æ­£ä¸­é—´(offset: 0.5)ä½ç½®æ—¶é¢œè‰²ä¸º#888, å˜åŒ–åˆ°ç»“æŸ(offset: 1)ä½ç½®æ—¶é¢œè‰²ä¸º#ddd.19:Td10,## èµ·æº

### ä»‹ç»

è¿™æ˜¯ä¸€ä¸ªç”¨äº ç”Ÿäº§ç¯å¢ƒçš„ React æ¡†æ¶

Next.js ä¸ºæ‚¨æä¾›ç”Ÿäº§ç¯å¢ƒæ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ä»¥åŠæœ€ä½³çš„å¼€å‘ä½“éªŒï¼šåŒ…æ‹¬é™æ€åŠæœåŠ¡å™¨ç«¯èåˆæ¸²æŸ“ã€ æ”¯æŒ TypeScriptã€æ™ºèƒ½åŒ–æ‰“åŒ…ã€ è·¯ç”±é¢„å–ç­‰åŠŸèƒ½ æ— éœ€ä»»ä½•é…ç½®ã€‚

ä¸ºä»€ä¹ˆé€‰æ‹© Next.js (å…¨çƒé¢†å…ˆçš„å…¬å¸éƒ½åœ¨ä½¿ç”¨å¹¶å–œçˆ± Next.js)

* é›¶é…ç½® - è‡ªåŠ¨ç¼–è¯‘å¹¶æ‰“åŒ…ã€‚ä»ä¸€å¼€å§‹å°±ä¸ºç”Ÿäº§ç¯å¢ƒè€Œä¼˜åŒ–ã€‚
* æ··åˆæ¨¡å¼ï¼š SSG å’Œ SSR - åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­åŒæ—¶æ”¯æŒæ„å»ºæ—¶é¢„æ¸²æŸ“é¡µé¢ï¼ˆSSGï¼‰å’Œè¯·æ±‚æ—¶æ¸²æŸ“é¡µé¢ï¼ˆSSRï¼‰ã€‚
* å¢é‡é™æ€ç”Ÿæˆ - åœ¨æ„å»ºä¹‹åä»¥å¢é‡çš„æ–¹å¼æ·»åŠ å¹¶æ›´æ–°é™æ€é¢„æ¸²æŸ“çš„é¡µé¢ã€‚
* æ”¯æŒ TypeScript - è‡ªåŠ¨é…ç½®å¹¶ç¼–è¯‘ TypeScriptã€‚
* å¿«é€Ÿåˆ·æ–° - å¿«é€Ÿã€å¯é çš„å®æ—¶ç¼–è¾‘ä½“éªŒï¼Œå·²åœ¨ Facebook çº§åˆ«çš„åº”ç”¨ä¸Šè§„æ¨¡ä¸Šå¾—åˆ°éªŒè¯ã€‚
* åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”± - æ¯ä¸ª pages ç›®å½•ä¸‹çš„ç»„ä»¶éƒ½æ˜¯ä¸€æ¡è·¯ç”±ã€‚
* API è·¯ç”± - åˆ›å»º API ç«¯ç‚¹ï¼ˆå¯é€‰ï¼‰ä»¥æä¾›åç«¯åŠŸèƒ½ã€‚
* å†…ç½®æ”¯æŒ CSS - ä½¿ç”¨ CSS æ¨¡å—åˆ›å»ºç»„ä»¶çº§çš„æ ·å¼ã€‚å†…ç½®å¯¹ Sass çš„æ”¯æŒã€‚
* ä»£ç æ‹†åˆ†å’Œæ‰“åŒ… - é‡‡ç”¨ç”± Google Chrome å°ç»„åˆ›å»ºçš„ã€å¹¶ç»è¿‡ä¼˜åŒ–çš„æ‰“åŒ…å’Œæ‹†åˆ†ç®—æ³•ã€‚

ä»¥ä¸Šå†…å®¹å‡æ‘˜å½•è‡ª [Next.js ä¸­æ–‡å®˜ç½‘](https://www.nextjs.cn/)

### ä¸ºä»€ä¹ˆæ˜¯ Next.js

å¦‚ä½ æ‰€è§è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œ ä½ å·²ç»èº«å¤„äº Next.js ç”Ÿäº§çš„ç½‘ç«™ä¹‹ä¸­äº†ï¼Œ æˆ–è®¸å¥¹å¹¶ä¸å®Œç¾ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡å¥¹æ¥äº†è§£åˆ°ï¼Œ Next.js çš„ä¸€äº›ç‰¹æ€§ï¼Œä»¥åŠå¸®åŠ©ä½ åˆ¤æ–­æ˜¯å¦éœ€è¦é€‰æ‹© Next.js ã€‚

é¦–å…ˆæœ¬ç½‘ç«™å®Œå…¨ä½¿ç”¨ Next.js æ„å»ºï¼Œ å¥¹æ˜¯ä¸€ä¸ªæŠ€æœ¯ç±»ç½‘ç«™ï¼Œé‚£ä¹ˆå¥¹å°±éœ€è¦æ›´å¤šçš„å‡ºç°åœ¨ä½ ä»¬çš„è§†é‡ä¹‹ä¸­ï¼Œ
é‚£ä¹ˆè¿™ä¸€ç‚¹æ˜¯å’Œæˆ‘ä»¬å¸¸è§çš„ç®¡ç†ç³»ç»Ÿwebåº”ç”¨æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±äº†è§£åˆ°å¥¹éœ€è¦æ›´å¥½çš„ SEO æ”¯æŒï¼Œ
è€Œåœ¨å‰ç«¯æ¡†æ¶å¤§è¡Œå…¶é“çš„æ—¶ä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¹ æƒ¯äºä½¿ç”¨ Create React App ç­‰æ„å»ºå·¥å…·æ„å»ºç°ä»£åŒ–çš„ Web åº”ç”¨ï¼Œ
ä½† Create React App åªæ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œå…¶æ„å»ºçš„ç»“æœæ˜¯ SPA å•é¡µåº”ç”¨ï¼Œ
ä½œä¸º Web å¼€å‘äººå‘˜ æˆ‘ä»¬éƒ½äº†è§£åˆ° SPA å•é¡µåº”ç”¨å¯¹äº SEO æ”¯æŒå¹¶ä¸å‹å¥½ï¼Œ
å†è€…ä½¿ä¼ ç»Ÿ SPA å•é¡µåº”ç”¨å¯¹ SEO æ›´å¥½åœ°æ”¯æŒéœ€è¦è¾ƒå¤šçš„é…ç½®ç­‰æ“ä½œä»¥åŠè¾ƒå¤šè§£å†³æ–¹æ¡ˆä½¿æˆ‘ä»¬éš¾ä»¥é€‰æ‹©ï¼Œé‚£ä¹ˆ Next.js å°±æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œ
æ­£å¦‚ Next.js å®˜ç½‘æ‰€æåˆ°çš„ç‰¹æ€§ï¼Œå¤§å¤§é™ä½äº†æˆ‘ä»¬æ­å»ºåº”ç”¨çš„æˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ç½‘ç«™ä½¿ç”¨ Next.js çš„åŸå› ã€‚

## ç°åœ¨å¼€å§‹

### åˆ›å»º Next.js åº”ç”¨

è‹¥è¦åˆ›å»º Next.js åº”ç”¨ï¼Œè¯·æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥è¦åœ¨å…¶ä¸­åˆ›å»ºåº”ç”¨çš„ç›®å½•ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤

```shell
npx create-next-app nextjs-blog --use-npm --example "https://github.com/vercel/next-learn/tree/master/basics/learn-starter"
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```shell
cd nextjs-blog
npm run dev
```

è¿™å°†åœ¨ç«¯å£ 3000 ä¸Šå¯åŠ¨ Next.js åº”ç”¨çš„â€œå¼€å‘æœåŠ¡å™¨â€ ä»æµè§ˆå™¨æ‰“å¼€http://localhost:3000

å½“æ‚¨è®¿é—® http://localhost:3000 æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°è¿™æ ·çš„é¡µé¢ã€‚è¿™æ˜¯å…¥é—¨æ¨¡æ¿é¡µé¢ï¼Œå…¶ä¸­æ˜¾ç¤ºäº†æœ‰å…³Next.jsçš„ä¸€äº›æœ‰ç”¨ä¿¡æ¯ã€‚

![](http://developers-center.oss-cn-beijing.aliyuncs.com/welcome-to-nextjs.png)
## ç»“æŸè¯­

åˆ°æ­¤ä¸€ä¸ªæœ€ç®€å•çš„ Next.js åº”ç”¨å°±åˆ›å»ºæˆåŠŸäº† åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­æˆ‘å°†ä¼šæŒç»­ä¸ºå¤§å®¶åˆ†äº«æˆ‘ä»¬çš„åº”ç”¨çš„æ„å»ºè¿‡ç¨‹


1a:T10e4,![](https://pic3.zhimg.com/80/v2-18f4b340b48c89daaafe0116405a543e_720w.jpg)

å¯¹åº”ç”¨ç¨‹åºè¿›è¡ŒDockeråŒ–éå¸¸ç®€å•ï¼Œæœ‰æ•ˆï¼Œä½†æ˜¯ä¼˜åŒ–Docker Imageçš„å¤§å°æ˜¯æ£˜æ‰‹çš„éƒ¨åˆ†ã€‚ Dockeræ˜“äºä½¿ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦åº”ç”¨ç¨‹åºå¼€å§‹æ‰©å±•ï¼Œé•œåƒå¤§å°å°±ä¼šå‘ˆæŒ‡æ•°å¢é•¿ã€‚é€šå¸¸ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºçš„Node.js dockeré•œåƒå¤§å°è¶…è¿‡1 GBã€‚

### ä¸ºä»€ä¹ˆé•œåƒå¤§å°å¾ˆé‡è¦

* è¾ƒå¤§çš„dockeré•œåƒéœ€è¦æ›´å¤šç©ºé—´ï¼Œè¿™æ„å‘³ç€å¢åŠ è´¹ç”¨ã€‚
* è¾ƒé•¿çš„æ„å»ºæ—¶é—´-å°†é•œåƒé€šè¿‡ç½‘ç»œæ¨é€ä¼šèŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œå¹¶å¯¼è‡´CIç®¡é“å»¶è¿Ÿã€‚

### è®©æˆ‘ä»¬å¼€å§‹ä¼˜åŒ–

è¿™æ˜¯ä½¿ç”¨VueJSåº”ç”¨ç¨‹åºæ„å»ºçš„ [æ¼”ç¤ºåº”ç”¨ç¨‹åº](https://link.zhihu.com/?target=https%3A//github.com/championshuttler/fluentbit-dashboard)ã€‚

è¿™æ˜¯åˆå§‹çš„Dockerfile

```text
FROM node:10
WORKDIR /app
COPY . /app
EXPOSE 8080
RUN npm install http-server -g
RUN npm install && npm run build
CMD http-server ./dist
```
è¯¥é•œåƒçš„å¤§å°çº¦ä¸º1.34GBï¼š

![](https://pic2.zhimg.com/80/v2-7c174001efb6585ef9588a7d9ea72a19_720w.jpg)

è®©æˆ‘ä»¬å¼€å§‹é€æ­¥ä¼˜åŒ–ã€‚

1. ä½¿ç”¨å¤šé˜¶æ®µDockeræ„å»º
    
   å¤šé˜¶æ®µæ„å»ºå¯é€šè¿‡åœ¨å•ä¸ªDockerfileä¸­ä½¿ç”¨å¤šä¸ªä¸­é—´é•œåƒæ¥è½»æ¾ä¼˜åŒ–Dockeré•œåƒã€‚åœ¨æ­¤å¤„äº†è§£æ›´å¤šä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„å»ºé•œåƒä¸­å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå¹¶å°†å®ƒä»¬å¤åˆ¶åˆ°ç²¾ç®€è¿è¡Œæ—¶é•œåƒä¸­ã€‚
   
   ```text
   FROM node:10 AS BUILD_IMAGE
    WORKDIR /app
    COPY . /app
    EXPOSE 8080
    RUN npm install && npm run build
    FROM node:10
    WORKDIR /app
    # copy from build image
    COPY --from=BUILD_IMAGE /app/dist ./dist
    COPY --from=BUILD_IMAGE /app/node_modules ./node_modules
    RUN npm i -g http-server
    CMD http-server ./dist
   ```
   ç°åœ¨ï¼Œæ­¤é•œåƒçš„å¤§å°ä¸º1.24GBï¼š
   
2. åˆ é™¤å¼€å‘ä¾èµ–é¡¹å¹¶ä½¿ç”¨ Node Prune å·¥å…·

    node-pruneæ˜¯ä¸€ä¸ªå¼€æºå·¥å…·ï¼Œç”¨äºä»node_modulesæ–‡ä»¶å¤¹ä¸­åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ã€‚é€šå¸¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æœ¬ä¸éœ€è¦NpmåŒ…ä¸­çš„æµ‹è¯•æ–‡ä»¶ï¼Œmarkdownæ–‡ä»¶ï¼Œç±»å‹æ–‡ä»¶å’Œ* .mapæ–‡ä»¶ï¼Œå¤§å¤šæ•°å¼€å‘äººå‘˜éƒ½ä¸ä¼šä»ç”Ÿäº§åŒ…ä¸­åˆ é™¤å®ƒä»¬ã€‚é€šè¿‡ä½¿ç”¨node-pruneï¼Œå¯ä»¥å®‰å…¨åœ°å°†å…¶åˆ é™¤ã€‚
    
    æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ é™¤å¼€å‘ä¾èµ–é¡¹ï¼š
    
    ```shell
    npm prune --production
    ```
    
    è¿›è¡Œè¿™äº›æ›´æ”¹åï¼ŒDockerfile å°†å¦‚ä¸‹æ‰€ç¤ºï¼š
    
    ```text
    FROM node:10 AS BUILD_IMAGE
    RUN curl -sfL https://install.goreleaser.com/github.com/tj/node-prune.sh | bash -s -- -b /usr/local/bin
    WORKDIR /app
    COPY . /app
    EXPOSE 8080
    RUN npm install && npm run build
    # remove development dependencies
    RUN npm prune --production
    # run node prune
    RUN /usr/local/bin/node-prune
    FROM node:10
    WORKDIR /app
    # copy from build image
    COPY --from=BUILD_IMAGE /app/dist ./dist
    COPY --from=BUILD_IMAGE /app/node_modules ./node_modules
    RUN npm i -g http-server
    CMD http-server ./dist
    ```
    
    é€šè¿‡ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œæˆ‘ä»¬å°†æ•´ä½“å¤§å°å‡å°åˆ°1.09GBã€‚
    
3. é€‰æ‹©è¾ƒå°çš„æœ€ç»ˆåŸºç¡€é•œåƒ
    
    åœ¨å¯¹Node.jsåº”ç”¨ç¨‹åºè¿›è¡ŒdockeråŒ–æ—¶ï¼Œæœ‰å¾ˆå¤šåŸºæœ¬é•œåƒå¯ä¾›é€‰æ‹©ã€‚
    
    è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨ alpine é•œåƒï¼› alpineæ˜¯ä¸€ä¸ªç²¾ç®€çš„dockeré•œåƒï¼Œå…·æœ‰æœ€å°‘çš„è½¯ä»¶åŒ…ï¼Œä½†è¶³ä»¥è¿è¡ŒèŠ‚ç‚¹åº”ç”¨ç¨‹åºã€‚
    
    ```text
    FROM node:10 AS BUILD_IMAGE
    RUN curl -sfL https://install.goreleaser.com/github.com/tj/node-prune.sh | bash -s -- -b /usr/local/bin
    WORKDIR /app
    COPY . /app
    EXPOSE 8080
    RUN npm install && npm run build
    # remove development dependencies
    RUN npm prune --production
    # run node prune
    RUN /usr/local/bin/node-prune
    FROM node:10-alpine
    WORKDIR /app
    # copy from build image
    COPY --from=BUILD_IMAGE /app/dist ./dist
    COPY --from=BUILD_IMAGE /app/node_modules ./node_modules
    RUN npm i -g http-server
    CMD http-server ./dist
    ```
    
    é€šè¿‡ä½¿ç”¨æ­¤Dockerfileï¼Œé•œåƒå¤§å°é™è‡³157MB ã€‚
    
    ![](https://pic2.zhimg.com/80/v2-5ea46fdb0a7079b37c3b6049404dbf29_720w.jpg)
    
### ç»“è®º
é€šè¿‡åº”ç”¨è¿™3ä¸ªç®€å•æ­¥éª¤ï¼Œæˆ‘ä»¬å°†dockeré•œåƒå¤§å°å‡å°äº†10å€ã€‚

PS: æœ¬æ–‡å±äºç¿»è¯‘ï¼Œ[åŸæ–‡](https://link.zhihu.com/?target=https%3A//itsopensource.com/how-to-reduce-node-docker-image-size-by-ten-times/%3Futm_sq%3Dgi94nhjf7x)1b:T18cb,
å¦‚æœä½ ä¸¥è‚ƒå¯¹å¾…ç¼–ç¨‹ï¼Œå°±å¿…å®šä¼šä½¿ç”¨"[ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ](https://www.ruanyifeng.com/blog/2008/12/a_visual_guide_to_version_control.html)"ï¼ˆVersion Control Systemï¼‰ã€‚

çœ¼ä¸‹æœ€æµè¡Œçš„"ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ"ï¼Œé[Git](https://git-scm.com/)è«å±ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6eff5ab7f7c349cb945fd235ca909abc~tplv-k3u1fbpfcp-zoom-1.image)

ç›¸æ¯”åŒç±»è½¯ä»¶ï¼Œ Git æœ‰å¾ˆå¤šä¼˜ç‚¹ã€‚å…¶ä¸­å¾ˆæ˜¾è‘—çš„ä¸€ç‚¹ï¼Œå°±æ˜¯ç‰ˆæœ¬çš„åˆ†æ”¯ï¼ˆbranchï¼‰å’Œåˆå¹¶ï¼ˆmergeï¼‰ååˆ†æ–¹ä¾¿ã€‚æœ‰äº›ä¼ ç»Ÿçš„ç‰ˆæœ¬ç®¡ç†è½¯ä»¶ï¼Œåˆ†æ”¯æ“ä½œå®é™…ä¸Šä¼šç”Ÿæˆä¸€ä»½ç°æœ‰ä»£ç çš„ç‰©ç†æ‹·è´ï¼Œè€Œ Git åªç”Ÿæˆä¸€ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬ï¼ˆåˆç§°"å¿«ç…§"ï¼‰çš„æŒ‡é’ˆï¼Œå› æ­¤éå¸¸å¿«æ·æ˜“ç”¨ã€‚

ä½†æ˜¯ï¼Œå¤ªæ–¹ä¾¿äº†ä¹Ÿä¼šäº§ç”Ÿå‰¯ä½œç”¨ã€‚å¦‚æœä½ ä¸åŠ æ³¨æ„ï¼Œå¾ˆå¯èƒ½ä¼šç•™ä¸‹ä¸€ä¸ªæèŠ‚è”“ç”Ÿã€å››å¤„å¼€æ”¾çš„ç‰ˆæœ¬åº“ï¼Œåˆ°å¤„éƒ½æ˜¯åˆ†æ”¯ï¼Œå®Œå…¨çœ‹ä¸å‡ºä¸»å¹²å‘å±•çš„è„‰ç»œã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eab76ecf796a41c183bfd5402d46a2c7~tplv-k3u1fbpfcp-zoom-1.image)

[Vincent Driessen](http://nvie.com/)æå‡ºäº†ä¸€ä¸ªåˆ†æ”¯ç®¡ç†çš„[ç­–ç•¥](http://nvie.com/posts/a-successful-git-branching-model/)ï¼Œæˆ‘è§‰å¾—éå¸¸å€¼å¾—å€Ÿé‰´ã€‚å®ƒå¯ä»¥ä½¿å¾—ç‰ˆæœ¬åº“çš„æ¼”è¿›ä¿æŒç®€æ´ï¼Œä¸»å¹²æ¸…æ™°ï¼Œå„ä¸ªåˆ†æ”¯å„å¸å…¶èŒã€äº•äº•æœ‰æ¡ã€‚ç†è®ºä¸Šï¼Œè¿™äº›ç­–ç•¥å¯¹æ‰€æœ‰çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿéƒ½é€‚ç”¨ï¼Œ Git åªæ˜¯ç”¨æ¥ä¸¾ä¾‹è€Œå·²ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰ Git ï¼Œè·³è¿‡ä¸¾ä¾‹éƒ¨åˆ†å°±å¯ä»¥äº†ã€‚

**ä¸€ã€ä¸»åˆ†æ”¯Master**

é¦–å…ˆï¼Œä»£ç åº“åº”è¯¥æœ‰ä¸€ä¸ªã€ä¸”ä»…æœ‰ä¸€ä¸ªä¸»åˆ†æ”¯ã€‚æ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7236b7b924bd4fe6ba60ac933b70f917~tplv-k3u1fbpfcp-zoom-1.image)

Gitä¸»åˆ†æ”¯çš„åå­—ï¼Œé»˜è®¤å«åšMasterã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹çš„ï¼Œç‰ˆæœ¬åº“åˆå§‹åŒ–ä»¥åï¼Œé»˜è®¤å°±æ˜¯åœ¨ä¸»åˆ†æ”¯åœ¨è¿›è¡Œå¼€å‘ã€‚

**äºŒã€å¼€å‘åˆ†æ”¯Develop**

ä¸»åˆ†æ”¯åªç”¨æ¥åˆ†å¸ƒé‡å¤§ç‰ˆæœ¬ï¼Œæ—¥å¸¸å¼€å‘åº”è¯¥åœ¨å¦ä¸€æ¡åˆ†æ”¯ä¸Šå®Œæˆã€‚æˆ‘ä»¬æŠŠå¼€å‘ç”¨çš„åˆ†æ”¯ï¼Œå«åšDevelopã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f96d0e26fc534bd4acd81667fb3fc4a0~tplv-k3u1fbpfcp-zoom-1.image)

è¿™ä¸ªåˆ†æ”¯å¯ä»¥ç”¨æ¥ç”Ÿæˆä»£ç çš„æœ€æ–°éš”å¤œç‰ˆæœ¬ï¼ˆnightlyï¼‰ã€‚å¦‚æœæƒ³æ­£å¼å¯¹å¤–å‘å¸ƒï¼Œå°±åœ¨Masteråˆ†æ”¯ä¸Šï¼Œå¯¹Developåˆ†æ”¯è¿›è¡Œ"åˆå¹¶"ï¼ˆmergeï¼‰ã€‚

Gitåˆ›å»ºDevelopåˆ†æ”¯çš„å‘½ä»¤ï¼š
```shell
git checkout -b develop master
```

å°†Developåˆ†æ”¯å‘å¸ƒåˆ°Masteråˆ†æ”¯çš„å‘½ä»¤ï¼š
```shell
# åˆ‡æ¢åˆ°Masteråˆ†æ”¯\
git checkout master

# å¯¹Developåˆ†æ”¯è¿›è¡Œåˆå¹¶\
git merge --no-ff develop
```

è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œä¸Šä¸€æ¡å‘½ä»¤çš„--no-ffå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ Git æ‰§è¡Œ"å¿«è¿›å¼åˆå¹¶"ï¼ˆfast-farward mergeï¼‰ï¼Œä¼šç›´æ¥å°†Masteråˆ†æ”¯æŒ‡å‘Developåˆ†æ”¯ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/903cd4ae680341e1985a6d1f0751fe9f~tplv-k3u1fbpfcp-zoom-1.image)

ä½¿ç”¨--no-ffå‚æ•°åï¼Œä¼šæ‰§è¡Œæ­£å¸¸åˆå¹¶ï¼Œåœ¨Masteråˆ†æ”¯ä¸Šç”Ÿæˆä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚ä¸ºäº†ä¿è¯ç‰ˆæœ¬æ¼”è¿›çš„æ¸…æ™°ï¼Œæˆ‘ä»¬å¸Œæœ›é‡‡ç”¨è¿™ç§åšæ³•ã€‚å…³äºåˆå¹¶çš„æ›´å¤šè§£é‡Šï¼Œè¯·å‚è€ƒBenjamin Sandofskyçš„[ã€ŠUnderstanding the Git Workflowã€‹](https://sandofsky.com/blog/git-workflow.html)ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e9f0547d6d541fc808047814d1fbb99~tplv-k3u1fbpfcp-zoom-1.image)

**ä¸‰ã€ä¸´æ—¶æ€§åˆ†æ”¯**

å‰é¢è®²åˆ°ç‰ˆæœ¬åº“çš„ä¸¤æ¡ä¸»è¦åˆ†æ”¯ï¼šMasterå’ŒDevelopã€‚å‰è€…ç”¨äºæ­£å¼å‘å¸ƒï¼Œåè€…ç”¨äºæ—¥å¸¸å¼€å‘ã€‚å…¶å®ï¼Œå¸¸è®¾åˆ†æ”¯åªéœ€è¦è¿™ä¸¤æ¡å°±å¤Ÿäº†ï¼Œä¸éœ€è¦å…¶ä»–äº†ã€‚

ä½†æ˜¯ï¼Œé™¤äº†å¸¸è®¾åˆ†æ”¯ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸´æ—¶æ€§åˆ†æ”¯ï¼Œç”¨äºåº”å¯¹ä¸€äº›ç‰¹å®šç›®çš„çš„ç‰ˆæœ¬å¼€å‘ã€‚ä¸´æ—¶æ€§åˆ†æ”¯ä¸»è¦æœ‰ä¸‰ç§ï¼š

> * åŠŸèƒ½ï¼ˆfeatureï¼‰åˆ†æ”¯
>
> * é¢„å‘å¸ƒï¼ˆreleaseï¼‰åˆ†æ”¯
>
> * ä¿®è¡¥bugï¼ˆfixbugï¼‰åˆ†æ”¯

è¿™ä¸‰ç§åˆ†æ”¯éƒ½å±äºä¸´æ—¶æ€§éœ€è¦ï¼Œä½¿ç”¨å®Œä»¥åï¼Œåº”è¯¥åˆ é™¤ï¼Œä½¿å¾—ä»£ç åº“çš„å¸¸è®¾åˆ†æ”¯å§‹ç»ˆåªæœ‰Masterå’ŒDevelopã€‚

**å››ã€ åŠŸèƒ½åˆ†æ”¯**

æ¥ä¸‹æ¥ï¼Œä¸€ä¸ªä¸ªæ¥çœ‹è¿™ä¸‰ç§"ä¸´æ—¶æ€§åˆ†æ”¯"ã€‚

ç¬¬ä¸€ç§æ˜¯åŠŸèƒ½åˆ†æ”¯ï¼Œå®ƒæ˜¯ä¸ºäº†å¼€å‘æŸç§ç‰¹å®šåŠŸèƒ½ï¼Œä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚å¼€å‘å®Œæˆåï¼Œè¦å†å¹¶å…¥Developã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/783d9ae482984afe8743dbcb4f28f666~tplv-k3u1fbpfcp-zoom-1.image)

åŠŸèƒ½åˆ†æ”¯çš„åå­—ï¼Œå¯ä»¥é‡‡ç”¨feature-*çš„å½¢å¼å‘½åã€‚

åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼š
```shell
git checkout -b feature-x develop
```
å¼€å‘å®Œæˆåï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ï¼š
```shell
git checkout develop

git merge --no-ff feature-x
```

åˆ é™¤featureåˆ†æ”¯ï¼š
```shell
git branch -d feature-x
```

**äº”ã€é¢„å‘å¸ƒåˆ†æ”¯**

ç¬¬äºŒç§æ˜¯é¢„å‘å¸ƒåˆ†æ”¯ï¼Œå®ƒæ˜¯æŒ‡å‘å¸ƒæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼ˆå³åˆå¹¶åˆ°Masteråˆ†æ”¯ä¹‹å‰ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªé¢„å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚

é¢„å‘å¸ƒåˆ†æ”¯æ˜¯ä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ï¼Œé¢„å‘å¸ƒç»“æŸä»¥åï¼Œå¿…é¡»åˆå¹¶è¿›Developå’ŒMasteråˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨release-*çš„å½¢å¼ã€‚

åˆ›å»ºä¸€ä¸ªé¢„å‘å¸ƒåˆ†æ”¯ï¼š
```shell
git checkout -b release-1.2 develop
```

ç¡®è®¤æ²¡æœ‰é—®é¢˜åï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯ï¼š
```shell
git checkout master

git merge --no-ff release-1.2

# å¯¹åˆå¹¶ç”Ÿæˆçš„æ–°èŠ‚ç‚¹ï¼Œåšä¸€ä¸ªæ ‡ç­¾\
git tag -a 1.2
```
å†åˆå¹¶åˆ°developåˆ†æ”¯ï¼š
```shell
git checkout develop

git merge --no-ff release-1.2
```
æœ€åï¼Œåˆ é™¤é¢„å‘å¸ƒåˆ†æ”¯ï¼š
```shell
git branch -d release-1.2
```

**å…­ã€ä¿®è¡¥bugåˆ†æ”¯**

æœ€åä¸€ç§æ˜¯ä¿®è¡¥bugåˆ†æ”¯ã€‚è½¯ä»¶æ­£å¼å‘å¸ƒä»¥åï¼Œéš¾å…ä¼šå‡ºç°bugã€‚è¿™æ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®è¡¥ã€‚

ä¿®è¡¥bugåˆ†æ”¯æ˜¯ä»Masteråˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚ä¿®è¡¥ç»“æŸä»¥åï¼Œå†åˆå¹¶è¿›Masterå’ŒDevelopåˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨fixbug-*çš„å½¢å¼ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bf2c6516741413da238520feb05d440~tplv-k3u1fbpfcp-zoom-1.image)

åˆ›å»ºä¸€ä¸ªä¿®è¡¥bugåˆ†æ”¯ï¼š
```shell
git checkout -b fixbug-0.1 master
```
ä¿®è¡¥ç»“æŸåï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯ï¼š
```shell
git checkout master

git merge --no-ff fixbug-0.1

git tag -a 0.1.1
```

å†åˆå¹¶åˆ°developåˆ†æ”¯ï¼š
```shell
git checkout develop

git merge --no-ff fixbug-0.1
```

æœ€åï¼Œåˆ é™¤"ä¿®è¡¥bugåˆ†æ”¯"ï¼š
```shell
git branch -d fixbug-0.1
```

ä½œè€…ï¼šÂ [é˜®ä¸€å³°](https://www.ruanyifeng.com/)

æ—¥æœŸï¼šÂ [2012å¹´7æœˆ 5æ—¥](https://www.ruanyifeng.com/blog/2012/07/)1c:T17d8,
![](http://developers-center.oss-cn-beijing.aliyuncs.com/å¾®ä¿¡å›¾ç‰‡_20220428202250.png)

æœ€è¿‘æ¥æ‰‹äº†ä¸€ä¸ªåŸºäº uniapp çš„å¼€å‘é¡¹ç›®ï¼Œæˆ‘ä¸ªäººå¯¹äºå®ƒèƒ½å¤Ÿä½¿ç”¨åŒä¸€å¥—ä»£ç å°±èƒ½å¤Ÿå¼€å‘ h5\app\å°ç¨‹åº çš„å¼ºå¤§åŠŸèƒ½è¡¨ç¤ºéå¸¸é’¦ä½©ã€‚ä½†æ˜¯å…¶é…ç½®æ–‡ä»¶ pages.json ä¹Ÿè®©æˆ‘ååˆ†éƒé—·ï¼ŒåŸå› æ— ä»–ï¼Œåªå› å…¶æ˜¯å†™æ­» JSON æ–‡ä»¶ï¼Œåœ¨ç®¡ç†çš„æ—¶å€™æ˜¯ååˆ†ä¸ä¾¿çš„ã€‚

åœ¨æœç´¢äº†ä¸€äº›èµ„æ–™ï¼ŒæœŸæœ›å¯ä»¥ç”¨ pages.js æ–‡ä»¶æ¥æ›¿ä»£ pages.json é…ç½®æ–‡ä»¶ï¼ˆJSçš„åŠ¨æ€èƒ½åŠ›ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‹†åˆ†è·¯ç”±é…ç½®ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å€’æ˜¯æœ‰ä¸€ä¸ªï¼Œä½†æ˜¯æå¾—è¿‡äºç¹çï¼Œæƒ³æƒ³è¿˜æ˜¯ç®—çƒäº†ã€‚

äºæ˜¯ï¼Œæˆ‘è‡ªå·±ç”¨ Nodejs æ‰‹å†™äº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œè™½ç„¶åŸå§‹äº†ä¸€äº›ï¼Œä½†æ˜¯ä¾èµ–ååˆ†è½»ï¼Œä½¿ç”¨ä¹Ÿæ¯”è¾ƒä¾¿æ·ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯é¢‡æœ‰ç”¨å¤„çš„ï¼Œæ‰€ä»¥ç‰¹åœ°æ’°æ–‡åˆ†äº«ç»™å¤§å®¶ã€‚

## æ„å»ºæ–‡ä»¶æ„æ¶

é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ–°å»º `router` æ–‡ä»¶å¤¹ï¼Œç„¶åæ ¹æ®å¦‚ä¸‹çš„æ ¼å¼æ„å»ºæ–‡ä»¶ç»“æ„ã€‚

```
router              # åŠ¨æ€è·¯ç”±æ–‡ä»¶å¤¹
â”œâ”€â”€ build.js        # ç¼–è¯‘è·¯ç”±é…ç½®ä¸»æ–‡ä»¶
â”œâ”€â”€ index.js        # ä¸»é…ç½®æ–‡ä»¶
â””â”€â”€ modules         # åŠ¨æ€è·¯ç”±æ¨¡å—æ–‡ä»¶
    â””â”€â”€ small.js    # æ‹†åˆ†å‡ºæ¥çš„æ¨¡å—è·¯ç”±æ–‡ä»¶
```
### ç¼–å†™ `build.js` æ–‡ä»¶

ä»£ç å¦‚ä¸‹ï¼š

```
const fs = require('fs')
const path = require('path')
const router = require('./index.js')

// å°†å­è·¯ç”±æ¨¡å—é…ç½®æ–‡ä»¶è½¬åŒ–ä¸º uniapp é…ç½®æ–‡ä»¶æ ¼å¼
const buildRouter = route => {
  const res = []
  const { baseUrl, children } = route
  children.forEach(i => {
    const obj = {
      path: baseUrl + i.path,
      style: {
        navigationBarTitleText: i.name
      }
    }
    Object.keys(i).forEach(ii => {
      !['path', 'name'].includes(ii) && (obj.style[ii] = i[ii])
    })
    res.push(obj)
  })
  return res
}

// è‡ªåŠ¨åŠ è½½ './modules' ç›®å½•å­è·¯ç”±é…ç½®æ–‡ä»¶
const getRouter = () => {
  const srcPath = path.resolve(__dirname, './modules')
  const result = fs.readdirSync(srcPath)
  let router = []
  result.forEach(r => {
    const route = require('./modules/' + r)
    router = [...router, ...buildRouter(route)]
  })
  return router
}

// æ„å»º pages å¹¶å†™å…¥ pages.json æ–‡ä»¶
router.pages = getRouter()
fs.writeFile(
  __dirname + '/../pages.json',
  // æˆ‘è¿™è¾¹æ˜¯ç”¨ä¸¤ä¸ªç©ºæ ¼æ¥ç¼©è¿› pages.jsonï¼Œå¦‚æœå–œæ¬¢åˆ¶è¡¨ç¬¦ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ›´æ¢ä½ ä¸º \t å³å¯
  JSON.stringify(router, null, '  '),
  e => e ? console.error(e) : console.log('pages.json é…ç½®æ–‡ä»¶æ›´æ–°æˆåŠŸ')
)
```

`build.js` æ–‡ä»¶ä¸ºä¸»æ–‡ä»¶ï¼Œæ˜¯ç”¨äºç¼–è¯‘ `pages.json` çš„ã€‚å¦‚æœä½ æœ‰ `nodejs` ç¼–ç¨‹åŸºç¡€çš„è¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨ç®€å•çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±ä¸ç”¨ç®¡äº†ï¼Œç›´æ¥å¤åˆ¶èµ°å³å¯ã€‚

### ç¼–å†™ index.js æ–‡ä»¶

è¿™ä¸ªæ–‡ä»¶æ²¡å•¥è¯´çš„ï¼Œå°±æ˜¯é™¤äº† `pages.json` è¿™ä¸ªæ–‡ä»¶ä¸­çš„ `pages` å­—æ®µå¤–çš„å…¶ä»–å†…å®¹ï¼Œå¯¼å‡ºå³å¯ã€‚æˆ‘è¿™è¾¹ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹ï¼š

```
module.exports = {
  globalStyle: {
    navigationBarTextStyle: 'white',
    navigationBarTitleText: 'å¸æœºé…é€',
    navigationBarBackgroundColor: '#4a9ff8',
    backgroundColor: '#4a9ff8'
  },
  tabBar: {
    color: '#666',
    selectedColor: '#4a9ff8',
    backgroundColor: '#f7f7f7',
    borderStyle: 'white',
    list: [
      {
        pagePath: 'pages/index/index',
        iconPath: 'static/images/icon-homeed.png',
        selectedIconPath: 'static/images/icon-home.png',
        text: 'é¦–é¡µ'
      },
      {
        pagePath: 'pages/task/task',
        iconPath: 'static/images/icon-tasked.png',
        selectedIconPath: 'static/images/icon-task.png',
        text: 'ä»»åŠ¡'
      },
      {
        pagePath: 'pages/my/my',
        iconPath: 'static/images/icon-myed.png',
        selectedIconPath: 'static/images/icon-my.png',
        text: 'æˆ‘çš„'
      }
    ]
  }
}
```

è¿™é‡Œé¢éƒ½æ˜¯æ ¹æ®å®˜æ–¹çš„é…ç½®å»å†™å³å¯äº†ã€‚å› ä¸ºè¿™éƒ¨åˆ†å†…å®¹ä¸å¤šï¼Œå› æ­¤æ²¡æœ‰å¿…è¦æ‹†åˆ†ã€‚åŒºåˆ«å°±æ˜¯ï¼Œè¿™é‡Œæ˜¯JSï¼Œæ‰€ä»¥ä¸ç”¨å†™åŒå¼•å·~å‘µå‘µã€‚ã€‚ã€‚

### ç¼–å†™ modules ä¸‹å­è·¯ç”±æ–‡ä»¶

ä¸Šä»£ç ï¼š

```
module.exports = {
  baseUrl: 'pages/small/',
  children: [
    {
      path: 'register',
      name: 'æ³¨å†Œ'
    }, {
      path: 'login',
      name: 'ç™»å½•'
    }
  ]
}
```

å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ `baseUrl` æ˜¯æŒ‡ä½ è¿™äº›æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ç›®å½•ã€‚æ‹†åˆ†å‡ºæ¥çš„åŸå› æ˜¯ä¸æƒ³åœ¨æ¯ä¸ªé¡µé¢çš„è·¯å¾„é‡Œéƒ½è¦å†™è¿™äº›é‡å¤çš„ä»£ç ã€‚

`children` ä¸­å°±æ˜¯è¯¥å­è·¯ç”±æ¶µç›–çš„å„ä¸ªé¡µé¢çš„è·¯å¾„ä»¥åŠæ ‡é¢˜äº†ã€‚

> è¿™é‡Œå’Œ `uniapp` é»˜è®¤çš„ `pages.json` ä¸­çš„æ ¼å¼ç•¥æœ‰åŒºåˆ«ï¼Œæˆ‘åœ¨ `build.js` æ–‡ä»¶é‡Œé¢çš„ `buildRouter()` å‡½æ•°å°±æ˜¯åšè¿™ä¸ªæ•°æ®æ ¼å¼è½¬åŒ–çš„ã€‚ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„å­è·¯ç”±é…ç½®ä»£ç æ›´åŠ ç®€æ´ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨åˆ°å…¶ä»–çš„é…ç½®é¡¹ï¼Œå°±ç›´æ¥å†™å°±å¯ä»¥äº†ã€‚åŸæ¥å•¥æ ¼å¼å°±æ˜¯å•¥æ ¼å¼ï¼Œæ¯”å¦‚è¿™æ ·ï¼š

```
module.exports = {
  baseUrl: 'pages/small/',
  children: [
    {
      path: 'register',
      name: 'æ³¨å†Œ',
      'app-plus': {
        titleNView: {
          buttons: [
            {
              text: 'æ¶ˆæ¯',
              fontSize: '16px'
            }
          ]
        }
      }
    }, {
      path: 'login',
      name: 'ç™»å½•'
    }
  ]
}
```

ä¸Šé¢çš„è¿™ä¸ª `'app-plus'` ä¼šè‡ªåŠ¨æ’å…¥è¿›å»çš„ï¼Œå®˜æ–¹æ–‡æ¡£è¦æ±‚æ€ä¹ˆå†™ï¼Œä½ åœ¨è¿™è¾¹å°±æ€ä¹ˆå†™å°±å¥½äº†ã€‚ä¸€èˆ¬è¿™ä¸ªç”¨å¾—æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥è¿™ä¸ªæˆ‘å°±ä¸åšé¢å¤–çš„å¤„ç†äº†ã€‚

## ä½¿ç”¨

æ„å»ºå¥½è¿™äº›ä»£ç ä¹‹åï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `node router/build.js` å°±ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ç”Ÿæˆ `pages.json` æ–‡ä»¶äº†ã€‚

> è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘è¿™è¾¹é¡¹ç›®æ˜¯ä½¿ç”¨ `hbuilder` GUIç•Œé¢ç”Ÿæˆçš„é¡¹ç›®ï¼Œæ‰€ä»¥æ ¹ç›®å½•å°±æ˜¯é¡¹ç›®æ ¹ç›®å½•ã€‚**å¦‚æœæ˜¯ä½¿ç”¨çš„ CLI å·¥å…·ç”Ÿæˆçš„é¡¹ç›®ï¼Œä¸Šæ–‡ä¸­çš„æ ¹ç›®å½•å°±å˜æˆäº†é¡¹ç›®çš„** `src` **ç›®å½•ã€‚**

å¦‚æœæƒ³ç›´æ¥ä¸‹è½½ä»£ç ï¼Œå¯ä»¥çœ‹æˆ‘çš„ä»“åº“ https://github.com/fengcms/uniapp-pages-json-cli-build å¦‚æœå» github ä¸‹è½½çš„è¯ï¼Œç»™æˆ‘ç‚¹ä¸ªèµå“¦ï¼

## Copyright and License

Copyright by FungLeo(web@fengcms.com)

License: MIT1d:T5df,
![](http://developers-center.oss-cn-beijing.aliyuncs.com/js-logo.png)

## fileå¯¹è±¡è½¬base64

```js
  let reader = new FileReader();
  reader.readAsDataURL(file[0])
  console.log(reader)
```

## base64 è½¬æˆblob ä¸Šä¼ 

```js
function dataURItoBlob(dataURI) {  
    var byteString = atob(dataURI.split(',')[1]);  
    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];  
    var ab = new ArrayBuffer(byteString.length);  
    var ia = new Uint8Array(ab);  
    for (var i = 0; i < byteString.length; i++) {  
        ia[i] = byteString.charCodeAt(i);  
    }  
    return new Blob([ab], {type: mimeString});  
}
```

## blob è½¬æˆArrayBuffer

```js
let blob = new Blob([1,2,3,4])
let reader = new FileReader();
reader.onload = function(result) {
    console.log(result);
}
reader.readAsArrayBuffer(blob);
```

## buffer è½¬æˆblob

```js
let blob = new Blob([buffer])
```

## base64 è½¬ file

```js
const base64ConvertFile = function (urlData, filename) { // 64è½¬file
  if (typeof urlData != 'string') {
    this.$toast("urlDataä¸æ˜¯å­—ç¬¦ä¸²")
    return;
  }
  var arr = urlData.split(',')
  var type = arr[0].match(/:(.*?);/)[1]
  var fileExt = type.split('/')[1]
  var bstr = atob(arr[1])
  var n = bstr.length
  var u8arr = new Uint8Array(n)
  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new File([u8arr], 'filename.' + fileExt, {
    type: type
  });
}
```
## ä»‹ç»

> Web Api æ¥å£å‚è€ƒ [File](https://developer.mozilla.org/zh-CN/docs/Web/API/File)

> 1e:T600,![](http://developers-center.oss-cn-beijing.aliyuncs.com/image.png)
 
 vue2 ä¸­ä½¿ç”¨ swiper æ’ä»¶çš„ä¸€äº›è®°å½•

### å®‰è£…

```
npm install swiper@6 vue-awesome-swiper@4 --save
```

### å…¨å±€æ³¨å†Œ

```js
import Vue from 'vue'
import VueAwesomeSwiper from 'vue-awesome-swiper'
 
// import style (>= Swiper 5.x)
import 'swiper/css/swiper.css';
// import style (>= Swiper 6.x)
import 'swiper/swiper-bundle.css'
 
Vue.use(VueAwesomeSwiper, /* { default options with global component } */)
```

### ä½¿ç”¨

```html
<swiper ref="mySwiper" :options="swiperOptions">
    <swiper-slide>Slide 1</swiper-slide>
    <swiper-slide>Slide 2</swiper-slide>
    <swiper-slide>Slide 3</swiper-slide>
    <swiper-slide>Slide 4</swiper-slide>
    <swiper-slide>Slide 5</swiper-slide>
    <div class="swiper-pagination" slot="pagination"></div>
  </swiper>
```
```js
swiperOptions: {
  slidesPerView: 4,//æ˜¾ç¤ºä¸ªæ•°
  direction: 'vertical',
   pagination: {
      el: '.swiper-pagination'
   },
}
```
```js
computed: {
   swiper() {
      return this.$refs.mySwiper.swiper
   }
},
 mounted() {
    this.swiper.slideTo(3, 1000, false)
 }
```

### é…ç½®

æ ¹æ®å…·ä½“æƒ…å†µè‡ªè¡Œé…ç½®ï¼Œå…·ä½“å‚è€ƒ [swiperä¸­æ–‡æ–‡æ¡£](https://www.swiper.com.cn/api/index.html)

dataä¸­è®¾ç½®å‚æ•°
```js
swiperOption: {
  loop: true,
  autoplay: {
    delay: 3000,
    disableOnInteraction: false,
  },
}
```

éƒ¨åˆ†é…ç½®æ— æ•ˆéœ€å¼•å…¥ç›¸å…³ä¾èµ–(ps: å¦‚autoplayï¼Œ effetcs)

```js
import SwiperCore, { Autoplay } from 'swiper';
SwiperCore.use([Autoplay]);
```1f:T5ec,![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6eff5ab7f7c349cb945fd235ca909abc~tplv-k3u1fbpfcp-zoom-1.image)

###  æŸ¥çœ‹æ‰€æœ‰é…ç½®
```
git config --list
```
### æŸ¥çœ‹å½“å‰é¡¹ç›®é…ç½®çš„ git ç”¨æˆ·

åœ¨é¡¹ç›®ç›®å½•ä¸‹è¾“å…¥

```
git config user.name	// å½“å‰é¡¹ç›®gitç”¨æˆ·å
git config user.email	// å½“å‰é¡¹ç›®gitç”¨æˆ·é‚®ç®±
```

### è®¾ç½®å½“å‰é¡¹ç›®çš„ git ç”¨æˆ·

```
git config user.name myName	// è‡ªå·±çš„ç”¨æˆ·å
git config user.email myEmail	// è‡ªå·±çš„é‚®ç®±
git config --list	// æŸ¥çœ‹å½“å‰é¡¹ç›®çš„gité…ç½®ä¿¡æ¯ï¼ˆä¼šå…ˆåˆ—å‡ºå…¨å±€é…ç½®ï¼Œæœ€ä¸‹é¢åˆ—å‡ºçš„æ˜¯å½“å‰é¡¹ç›®çš„é…ç½®ï¼‰
```
åœ¨å½“å‰é¡¹ç›®ä¸‹é¢æŸ¥çœ‹çš„é…ç½®æ˜¯å…¨å±€é…ç½® + å½“å‰é¡¹ç›®çš„é…ç½®, ä½¿ç”¨çš„æ—¶å€™ä¼šä¼˜å…ˆä½¿ç”¨å½“å‰é¡¹ç›®çš„é…ç½®ã€‚
ä¹Ÿå¯ä»¥ç›´æ¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•é‡Œçš„ .git æ–‡ä»¶å¤¹é‡Œï¼Œæ‰“å¼€ config æ–‡ä»¶æŸ¥çœ‹å½“å‰é¡¹ç›®çš„ git é…ç½®ä¿¡æ¯ï¼š

```
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[submodule]
	active = .
[remote "origin"]
	url = https://github.com/DawnYu9/Test.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
	remote = origin
	merge = refs/heads/master

```

åœ¨æœ€åé¢æ·»åŠ è¯¥é¡¹ç›®çš„ç”¨æˆ·ä¿¡æ¯ï¼š

```
[user]
	name = myName
	email = myEmail
```

### è®¾ç½®å…¨å±€çš„ git ç”¨æˆ·

```
git config --global user.name globalName	// å…¨å±€çš„ç”¨æˆ·å
git config --global user.email globalEmail	// å…¨å±€çš„é‚®ç®±
git config --list	// æŸ¥çœ‹é…ç½®ä¿¡æ¯
```20:T52b,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_static_assets_rpm6.svg)

## æ–¹æ¡ˆ1ï¼šå¦‚æœä¸æ˜¯æƒ³è®¾ç½®ä¸ºé€æ˜è‰² å¯ç›´æ¥ä½¿ç”¨ [box-shadow](https://developer.mozilla.org/zh-CN/docs/Web/CSS/box-shadow)

```
input:-webkit-autofill{
	-webkit-box-shadow:0 0 0 1000px white inset !important;
}
```

## æ–¹æ¡ˆ2ï¼šå…³é—­è‡ªåŠ¨å¡«å……åŠŸèƒ½ ( ä¹Ÿå¯å®ç° ä¸æ¨è )

```
<input type="text" autocomplete="off">
```

## æ–¹æ¡ˆ3ï¼šé€šè¿‡CSS3åŠ¨ç”»è§£å†³

```
input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-transition-delay: 111111s;
        -webkit-transition: color 11111s ease-out, background-color 111111s ease-out;
    } 
```

## ä»£ç ç¤ºä¾‹

```

    .entername>.el-input__inner{
        border: none;
        line-height: 38px;
        padding-left: 10px;
        padding-right: 0;
        background: transparent; 
        color:#ccc
    } 
     .entername>.el-input__inner:-webkit-autofill,
     .entername>.el-input__inner:-webkit-autofill:hover,
     .entername>.el-input__inner:-webkit-autofill:focus,
     .entername>.el-input__inner:-webkit-autofill:active {
        -webkit-transition-delay: 99999s;
        -webkit-transition: color 99999s ease-out, background-color 99999s ease-out;
    }  
```21:T16e6,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_next_js_-8-g5m.7d2e18ea.svg)

## æ·»åŠ  Google AdSense

å°†Google AdSenseå®¢æˆ·ç«¯IDæ·»åŠ ä¸ºç¯å¢ƒå˜é‡ã€‚

.env.local
```
NEXT_PUBLIC_GOOGLE_ADSENSE=ca-pub-5674178816323888
```
ç„¶åï¼Œåœ¨_document.tsxä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚ è¿™æ ·ï¼ŒGoogle AdSenseåŠ è½½ä¸€æ—¦æ‚¨çš„ä¸‹ä¸€ä¸ªåº”ç”¨ç¨‹åºå®‰è£…ã€‚<script> <head>
```javascript
<script
  async
  src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}`}
  crossOrigin="anonymous"
/>
```
åœ¨AdSenseæ§åˆ¶å°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¹¿å‘Šå•å…ƒã€‚ æ‚¨å°†è¢«è¦æ±‚å¤åˆ¶ä¸€äº›çœ‹èµ·æ¥è¿™æ ·çš„ä»£ç ã€‚ ä¸è¦å¤åˆ¶å®ƒã€‚ è¿™æ˜¯ååº”å°†è¿›å…¥çš„åœ°æ–¹ã€‚
```javascript
<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5674178816323888"
  crossorigin="anonymous"
></script>
<!-- responsive -->
<ins
  class="adsbygoogle"
  style="display:block"
  data-ad-client="ca-pub-5674178816323888"
  data-ad-slot="7181773959"
  data-ad-format="auto"
  data-full-width-responsive="true"
></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>
```

## åˆ›å»ºGoogle Adsense AD Reactç»„ä»¶
æœ¬æ–‡å…¶ä½™éƒ¨åˆ†ä¸­çš„ä¿¡æ¯é€‚ç”¨äºæ‚¨æ˜¯å¦ä½¿ç”¨Next.jsï¼Œgatsby.jsï¼ŒCreate React App æˆ– custom react setupã€‚

çµæ„Ÿæ¥è‡ªè¿™ä¸ª [GitHub comment](https://github.com/vercel/next.js/discussions/14395#discussioncomment-28847) ï¼Œåˆ›å»ºä¸€ä¸ªç»„ä»¶æ¥å°è£…æ‚¨çš„Googleå¹¿å‘Šã€‚

components/GoogleAd.tsx

```typescript
import {useEffect} from 'react';

export function GoogleAd() {
  useEffect(() => {
    try {
      // @ts-ignore
      (window.adsbygoogle = window.adsbygoogle || []).push({});
    } catch (err) {
      console.error(err);
    }
  }, []);

  return (
    <ins
      className="adsbygoogle"
      style={{display: 'block'}}
      data-ad-client={process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}
      data-ad-slot="7181773959"
      data-ad-format="auto"
      data-full-width-responsive="true"
    />
  );
}
```

ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ”¾ç½®Googleå¹¿å‘Šåœ¨ä»»ä½•æ‚¨æƒ³è¦çš„åœ°æ–¹ã€‚

## Supporting Multiple Ad Unit Types
Define an for each ad unit you define. For example,enum

components/GoogleAd.tsx

```
export enum AdType {
  DEFAULT,
  ARTICLE,
  VERTICAL,
}
```

ç„¶åï¼Œè®¾ç½®å°†æ¯ä¸ªå¹¿å‘Šå•å…ƒæ˜ å°„åˆ°å…¶ç›¸åº”çš„props.Record

components/GoogleAd.tsx

```typescript
const adUnitProps: Record<AdType, any> = {
  [AdType.DEFAULT]: {
    'data-ad-slot': '7181773959',
    'data-ad-format': 'auto',
    'data-full-width-responsive': 'true',
  },
  [AdType.ARTICLE]: {
    'data-ad-slot': '3197857275',
    'data-ad-format': 'fluid',
    'data-ad-layout': 'in-article',
  },
  [AdType.VERTICAL]: {
    'data-ad-slot': '8863578035',
    'data-ad-format': 'auto',
    'data-full-width-responsive': 'true',
  },
};
```

ä¿®æ”¹æ‚¨çš„ç»„ä»¶ä»¥æ¥å—Prop.GoogleAdtype

components/GoogleAd.tsx
```typescript
import {useEffect} from 'react';

interface GoogleAdProps {
  variant?: AdType;
}

export function GoogleAd({variant = AdType.DEFAULT}: GoogleAdProps) {
  useEffect(() => {
    try {
      // @ts-ignore
      (window.adsbygoogle = window.adsbygoogle || []).push({});
    } catch (err) {
      console.error(err);
    }
  }, []);

  return (
    <ins
      className="adsbygoogle"
      style={{display: 'block'}}
      data-ad-client={process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}
      {...adUnitProps[variant]}
    />
  );
}
```
ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨æ‚¨çš„Next.jsç½‘ç«™ä¸Šä½¿ç”¨Google AdSenseå¹¿å‘Šã€‚

## Fixing Overflow with Adsense Ads
Sometimes the ads can overflow when resizing the viewport.

Here's what it could look like.

Main Content

Ad

Following Google's advice on overflow issues, we'll hide the overflow content.

components/GoogleAd.tsx
```
<div style={{overflow: 'hidden'}}>
  <ins
    className="adsbygoogle"
    style={{display: 'block'}}
    data-ad-client={process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}
    {...adUnitProps[variant]}
  />
</div>
```
Setting might cut off part of your ad when the viewport's resized. But at least the ad won't break your site's layout if the viewport shrinks.overflow: 'hidden'

Here's what it looks like when you set .overflow: 'hidden'

Main Content

Ad

## Preventing Cumulative Layout Shift with Google Adsense
Cumulative Layout Shift (CLP) occurs when the ad pushes your content out of the way after loading. CLP will hurt your Lighthouse score and SEO.

To minimize layout shift, preemptively set a height and width to make room for your ad.

components/GoogleAd.tsx
```
<div style={{overflow: 'hidden', minWidth: '300px', minHeight: '250px'}}>
  <ins
    className="adsbygoogle"
    style={{display: 'block'}}
    data-ad-client={process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}
    {...adUnitProps[variant]}
  />
</div>
```
## Remove Ads from Assistive Technologies like Screen Readers
The problem with Google Adsense ads is you inject an containing the advertisers content and markup on your site. Then, when you run a Lighthouse check on your site, the advertiser's problems become your problem. If the ad contains bad HTML decisions, you will get dinged for it.<iframe>

Let's address this by hiding the aria contained by the ad. It doesn't make sense to expose an ad to assistive technologies like screen readers anyway. But you should do your own testing and see if it makes sense to follow this advice for your own business.

If you make this change, then your Lighthouse score won't be affected by any crap the advertiser puts in their markup.
```
<div
  aria-hidden={true}
  style={{overflow: 'hidden', minWidth: '300px', minHeight: '250px'}}
>
  <ins
    className="adsbygoogle"
    style={{display: 'block'}}
    data-ad-client={process.env.NEXT_PUBLIC_GOOGLE_ADSENSE}
    {...adUnitProps[variant]}
  />
</div>
```
Hope this info helps you prosper. ğŸ’¸22:T2f25,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_react_y-7-wq.1ac05cd7.svg)

## å‰è¨€

åœ¨å­¦ä¹ ä»»ä½•ä¸€ä¸ªæ¡†æ¶åŸç†ä¹‹å‰ï¼Œå­¦ä¹ å®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯éå¸¸å¿…è¦çš„ï¼Œè‡³å°‘å¯ä»¥è®©æˆ‘ä»¬æ˜ç™½åœ¨ä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆäº‹æƒ…ã€‚ä¸è‡³äºçŠ¯ä¸€äº›ä½çº§é”™è¯¯ã€‚

`React 16.8` ç‰ˆæœ¬æ­£å¼å‘å¸ƒäº† `Hook`Â æœºåˆ¶ï¼Œå› æ­¤æœ¬æ–‡ä¼šåˆ†åˆ«è®²è§£ `Class Component`Â ç”Ÿå‘½å‘¨æœŸä¸ `Function Component`Â ç”Ÿå‘½å‘¨æœŸã€‚

## Class Component ç”Ÿå‘½å‘¨æœŸ

React ç”Ÿå‘½å‘¨æœŸæŒ‡çš„æ˜¯ç»„ä»¶ä»åˆ›å»ºåˆ°å¸è½½çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œæ¯ä¸ªè¿‡ç¨‹éƒ½æœ‰å¯¹åº”çš„é’©å­å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

-   æŒ‚è½½é˜¶æ®µÂ  -Â  ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå’Œæ’å…¥ DOM æ ‘çš„è¿‡ç¨‹
-   æ›´æ–°é˜¶æ®µÂ  -Â  ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“çš„è¿‡ç¨‹
-   å¸è½½é˜¶æ®µÂ  -Â  ç»„ä»¶ä» DOM æ ‘ä¸­è¢«åˆ é™¤çš„è¿‡ç¨‹

### æŒ‚è½½é˜¶æ®µ

è¿™ä¸ªé˜¶æ®µæ˜¯åšåˆå§‹åŒ–æ“ä½œï¼Œä¸»è¦æœ‰è¿™å‡ ä¸ªé’©å­å‡½æ•°ï¼š

#### static defaultProps

è®¾ç½® props çš„é»˜è®¤å€¼

```
static defaultProps = {
  name: 'å­ç»„ä»¶è®¾ç½®çš„é»˜è®¤props'
}
```

#### static propTypesÂ 

props æ•°æ®ç±»å‹æ£€æŸ¥

```
import PropTypes from 'prop-types';

static propsTypes = {
  name: PropTypes.string // é™å®šnameä¸ºstringç±»å‹
}
```

#### constructor(props)Â 

æ„é€ å‡½æ•°çš„ä½œç”¨ï¼š

-   åˆå§‹åŒ– `props and state`
-   ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°

```
constructor(props) {
  super(props);
  this.state = {number: 0};
  this.handlexxx = this.handlexxx.bind(this)
}
```

#### componentWillMount()Â 

ç»„ä»¶æŒ‚è½½å‰é’©å­**(17ç‰ˆæœ¬åä¸æ¨èä½¿ç”¨)**

ç”±äº React æœªæ¥çš„ç‰ˆæœ¬ä¸­æ¨å‡ºäº†å¼‚æ­¥æ¸²æŸ“ï¼ŒDOM è¢«æŒ‚è½½ä¹‹å‰çš„é˜¶æ®µéƒ½å¯ä»¥è¢«æ‰“æ–­é‡æ¥ï¼Œå¯¼è‡´ `componentWillMount` ã€ `componentWillUpdate` ã€ `componentWillReceiveProps` åœ¨ä¸€æ¬¡æ›´æ–°ä¸­å¯èƒ½ä¼šè¢«è§¦å‘å¤šæ¬¡ï¼Œå› æ­¤é‚£äº›åªå¸Œæœ›è§¦å‘ä¸€æ¬¡çš„å‰¯ä½œç”¨åº”è¯¥æ”¾åœ¨ `componentDidMount` ä¸­ã€‚

è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦æŠŠå¼‚æ­¥è¯·æ±‚æ”¾åœ¨ `componentDidMount`Â ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åœ¨ `componentWillMount`Â ä¸­çš„åŸå› ï¼Œæ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚

```
componentWillMount() {
	// componentWillMountåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæ‰§è¡Œå¤šæ¬¡
}
```

#### componentDidMount()Â 

ç»„ä»¶æŒ‚è½½æˆåŠŸé’©å­ï¼Œè¯¥è¿‡ç¨‹ç»„ä»¶å·²ç»æˆåŠŸæŒ‚è½½åˆ°äº†çœŸå® DOM ä¸Šã€‚

ç”±äºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åªæ‰§è¡Œä¸€æ¬¡ï¼Œå› æ­¤å¸¸ç”¨æ¥ï¼š

-   ç›‘å¬äº‹ä»¶ï¼›
-   è·å–åˆ°çœŸå® DOMï¼›
-   è¯·æ±‚åå°æ¥å£ã€‚

```
componentDidMount(){
  fetch('https://api.github.com/users').then(res=>res.json()).then(users=>{
    console.log(users);
    this.setState({users});
  });
}
```

### æ›´æ–°é˜¶æ®µ

è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯åšçŠ¶æ€æ›´æ–°æ“ä½œï¼Œä¸»è¦æœ‰è¿™å‡ ä¸ªé’©å­å‡½æ•°ï¼š

#### componentWillReceiveProps(newProps)Â 

çˆ¶ç»„ä»¶æ›´æ–° props é’©å­**(17ç‰ˆæœ¬åä¸æ¨èä½¿ç”¨)**

#### shouldComponentUpdate(nextProps, nextState)Â Â 

ç»„ä»¶æ˜¯å¦æ›´æ–°é’©å­

ç”±äº React çˆ¶ç»„ä»¶æ›´æ–°ï¼Œå¿…ç„¶ä¼šå¯¼è‡´å­ç»„ä»¶æ›´æ–°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨å­ç»„ä»¶ä¸­é€šè¿‡æ‰‹åŠ¨å¯¹æ¯” `props` ä¸ `nextProps`ï¼Œ`state` ä¸ `nextState` æ¥ç¡®å®šæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“å­ç»„ä»¶ï¼Œå¦‚æœéœ€è¦åˆ™è¿”å›`true`ï¼Œä¸éœ€è¦åˆ™è¿”å› `false`ã€‚è¯¥å‡½æ•°é»˜è®¤è¿”å› `true`ã€‚

```
 shouldComponentUpdate(nextProps, nextState) {
   console.log('Counter', nextProps, nextState);
   console.log('5. shouldComponentUpdate è¯¢é—®ç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°');
   return true;
 }
```

#### componentWillUpdate()

ç»„ä»¶æ›´æ–°å‰é’©å­**(17ç‰ˆæœ¬åä¸æ¨èä½¿ç”¨)**

#### componentDidUpdate()Â 

æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ç»„ä»¶æ›´æ–°å®Œåè¢«è°ƒç”¨ã€‚

-   å› ä¸ºç»„ä»¶å·²ç»é‡æ–°æ¸²æŸ“äº†æ‰€ä»¥è¿™é‡Œå¯ä»¥å¯¹ç»„ä»¶ä¸­çš„ DOM è¿›è¡Œæ“ä½œï¼›
-   åœ¨æ¯”è¾ƒäº† `this.props`Â å’Œ `nextProps`Â çš„å‰æä¸‹å¯ä»¥å‘é€ç½‘ç»œè¯·æ±‚ã€‚

```
componentDidUpdate(prevProps, prevState, snapshot) {
	if (this.props.userID !== prevProps.userID) {
    this.fetchData(this.props.userID);
  }
}
```

### å¸è½½é˜¶æ®µ

è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯ä» DOM æ ‘ä¸­åˆ é™¤ç»„ä»¶çš„æ“ä½œï¼Œå®ƒçš„é’©å­åªæœ‰ä¸€ä¸ª `componentWillUnmount`Â ã€‚

#### componentWillUnmount()Â 

è¿™æ˜¯ `unmount`Â é˜¶æ®µå”¯ä¸€çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™é‡Œè¿›è¡Œçš„æ˜¯å–„åå·¥ä½œï¼šæ¸…ç†è®¡æ—¶å™¨ã€å–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–è€…å–æ¶ˆäº‹ä»¶ç›‘å¬ç­‰ã€‚


### 17ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸ

æ–°å¢äº†ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š

1.  `static getDerivedStateFromProps(nextProps, prevState)`
1.  `getSnapshotBeforeUpdate(prevProps, prevState)`

åˆ é™¤äº†ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š

1.  `componentWillMount`
1.  `componentWillReceiveProps`
1.  `componentWillUpdate`

ä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œåªæœ‰æ–°çš„ `UNSAFE_`Â ç”Ÿå‘½å‘¨æœŸåç§°å°†èµ·ä½œç”¨ï¼š

1.  `UNSAFE_componentWillMount`
1.  `UNSAFE_componentWillReceiveProps`
1.  `UNSAFE_componentWillUpdate`

#### static getDerivedStateFromProps(nextProps, prevState)

åœ¨ `render` å‰è°ƒç”¨ï¼Œåœ¨åˆå§‹æŒ‚è½½ä»¥åŠåç»­æ›´æ–°æ—¶éƒ½ä¼šè¢«è°ƒç”¨ã€‚

ä»–åº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° `state`ã€‚å¦‚æœè¿”å› `null` åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹ã€‚

å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ä¼ è¿›æ¥çš„ `nextProps` å’Œä¹‹å‰çš„ `prevState`ã€‚

```
static getDerivedStateFromProps(nextProps, prevState){
  console.log('getDerivedStateFromProps',nextProps,prevState);
  return null;
}
```

#### getSnapshotBeforeUpdate(prevProps, prevState)

åœ¨æ›´æ–°é˜¶æ®µ render åæŒ‚è½½åˆ°çœŸå® DOM å‰è¿›è¡Œçš„æ“ä½œï¼Œå®ƒä½¿å¾—ç»„ä»¶èƒ½åœ¨å‘ç”Ÿæ›´æ”¹ä¹‹å‰ä» DOM ä¸­æ•è·ä¸€äº›ä¿¡æ¯ã€‚æ­¤ç»„ä»¶è¿”å›çš„ä»»ä½•å€¼å°†ä½œä¸º `componentDidUpdate` çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚

```
  getSnapshotBeforeUpdate(prevProps, prevState){
    return "getSnapshotBeforeUpdate";
  }

  // ç»„ä»¶æ›´æ–°æˆåŠŸé’©å­
  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log(snapshot); // "getSnapshotBeforeUpdate"
  }
```

[ç”Ÿå‘½å‘¨æœŸç½‘ç«™æŸ¥è¯¢é“¾æ¥](https://link.juejin.cn?target=https%3A%2F%2Fprojects.wojtekmaj.pl%2Freact-lifecycle-methods-diagram%2F "https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/")

ä»¥ä¸Šå°±æ˜¯ Class ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä»¥åŠä½¿ç”¨æ–¹æ³•ï¼Œç„¶è€Œä¸è®º Class ç»„ä»¶å¤šå¥½ç”¨ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æŠ±Hooksã€‚

## Function Component ç”Ÿå‘½å‘¨æœŸ

`Function Component`Â æ˜¯æ›´å½»åº•çš„çŠ¶æ€é©±åŠ¨æŠ½è±¡ï¼Œç”šè‡³æ²¡æœ‰ `Class Component`Â ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œåªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œè€Œ React è´Ÿè´£åŒæ­¥åˆ° DOMã€‚

å›é¡¾ä¸‹åœ¨ `Class Component`Â çš„æ•°æ®è¯·æ±‚ï¼š

1.  åœ¨ `componentDidMount` åˆå§‹åŒ–å‘è¯·æ±‚ï¼›
1.  åœ¨ `componentDidUpdate` åˆ¤æ–­å‚æ•°æ˜¯å¦å˜åŒ–ï¼Œå˜åŒ–å°±è°ƒç”¨è¯·æ±‚å‡½æ•°é‡æ–°è¯·æ±‚æ•°æ®ï¼›
1.  åœ¨ `componentWillUnmount` ç”Ÿå‘½å‘¨æœŸå–æ¶ˆå‘é€è¯·æ±‚ã€‚

é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶ä¸­æˆ‘ä»¬è¯¥å¦‚ä½•åšå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ `useEffect`Â ã€‚

### useEffect

`useEffect`Â å°±æ˜¯ä¸€ä¸ª `Effect Hook`Â ï¼Œç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„Â `componentDidMount`Â ã€ `componentDidUpdate`Â Â å’ŒÂ `componentWillUnmount`Â å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚

**useEffect åšäº†ä»€ä¹ˆï¼š**

-   ä½¿ç”¨ `useEffect`Â ç›¸å½“äºå‘Šè¯‰ React ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œï¼ŒReact å°†åœ¨æ‰§è¡Œ DOM æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚
-   React ä¿è¯äº†æ¯æ¬¡è¿è¡Œ `useEffect` çš„æ—¶å€™ï¼ŒDOM å·²ç»æ›´æ–°å®Œæ¯•ã€‚

Class ç»„ä»¶ Demoï¼š

```
class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  componentDidMount() {
    document.title = `You clicked ${this.state.count} times`;
  }
  componentDidUpdate() {
    document.title = `You clicked ${this.state.count} times`;
  }

  render() {
    return (
      <div>
        <p>You clicked {this.state.count} times</p>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Click me
        </button>
      </div>
    );
  }
}
```

Function Component é‡å†™è¯¥æ¡ˆä¾‹ï¼š

```
import React, { useState, useEffect } from 'react';

function Example() {
  const [count, setCount] = useState(0);

  // ç›¸å½“äº componentDidMount å’Œ componentDidUpdate:
  useEffect(() => {
    // ä½¿ç”¨æµè§ˆå™¨çš„ API æ›´æ–°é¡µé¢æ ‡é¢˜
    document.title = `You clicked ${count} times`;
  });

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

### éœ€è¦æ¸…é™¤çš„ effect

åœ¨ class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å»ç›‘å¬åŸç”Ÿ DOM äº‹ä»¶æ—¶ï¼Œä¼šåœ¨ `componentDidMount` è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å»åšï¼Œå› ä¸ºåœ¨è¿™é‡Œå¯ä»¥è·å–åˆ°å·²ç»æŒ‚è½½çš„çœŸå® DOMã€‚æˆ‘ä»¬ä¹Ÿä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™å»å–æ¶ˆäº‹ä»¶ç›‘å¬é¿å…å†…å­˜æ³„éœ²ã€‚é‚£ä¹ˆåœ¨ `useEffect` ä¸­è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ

```
useEffect(() => {
  function handleClick(status) {
    document.title = `You clicked ${count} times`;
  }
  
  document.body.addEventListener("click",handleClick,false);
 
  return function cleanup() {
    document.body.removeEventListener("click",handleClick,false);
  };
});
```

é€šè¿‡åœ¨ `useEffect` ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¾¿å¯ä»¥æ¸…ç†å‰¯ä½œç”¨ã€‚

æ¸…ç†è§„åˆ™æ˜¯ï¼š

-   **é¦–æ¬¡æ¸²æŸ“ä¸ä¼šè¿›è¡Œæ¸…ç†ï¼Œä¼šåœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“ï¼Œæ¸…é™¤ä¸Šä¸€æ¬¡çš„å‰¯ä½œç”¨ï¼›**
-   **å¸è½½é˜¶æ®µä¹Ÿä¼šæ‰§è¡Œæ¸…é™¤æ“ä½œã€‚**

### Dependencies

åœ¨ `useEffect`Â ä¸­æˆ‘ä»¬ä¼šå»è¯·æ±‚åå°æ•°æ®ï¼Œé€šè¿‡å‰é¢çš„å­¦ä¹ æˆ‘ä»¬ä¹Ÿäº†è§£åˆ°æ¯æ¬¡æ›´æ–°ç»„ä»¶æ—¶æˆ‘ä»¬éƒ½ä¼šå†æ¬¡å»æ‰§è¡Œ `useEffect` ï¼Œä½†å…¶å®æˆ‘ä»¬å¹¶ä¸éœ€è¦æ¯æ¬¡æ›´æ–°ç»„ä»¶éƒ½å‘é€è¯·æ±‚ã€‚é‚£ä¹ˆç¢°åˆ°è¿™æ ·çš„é—®é¢˜å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

å›é¡¾ä¸Šé¢æ˜¯ä¸æ˜¯ç±»ä¼¼äº `componentDidUpdate` ä¸­å‘é€è¯·æ±‚å‘¢ï¼Ÿç›´è§‰æ˜¯å¯¹çš„ï¼Œåœ¨`componentDidUpdate` ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡åˆ¤æ–­å‚æ•°æ˜¯å¦å˜åŒ–æ¥é¿å…æ¯æ¬¡éƒ½å‘é€è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨ `useEffect hook` ä¸­æˆ‘ä»¬ä¹Ÿæ˜¯å¼‚æ›²åŒå·¥ï¼Œé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦å‘ç”Ÿå˜æ¢æ¥å†³å®šæ˜¯å¦é‡å¤æ‰§è¡Œï¼Œå¦‚æœç¬¬äºŒå‚æ•°ä¸ºç©ºæ•°ç»„ï¼Œåˆ™è¡¨ç¤ºåªåœ¨åˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­æ›´æ–°ä¸ä¼šå†æ¬¡è°ƒç”¨ã€‚

```
useEffect(() => {
  fetchData(instanceId){...}
  
  fetchData(instanceId);
}, [instanceId]);
```

ä¸Šé¢ä¾‹å­æ˜¯é€šè¿‡ `fetchData` å‡½æ•°å»è¯·æ±‚åå°æ•°æ®ï¼Œå…·ä½“å‡½æ•°ä½“æˆ‘ä»¬å°±çœç•¥äº†ï¼Œç„¶åä½ ä¼šå‘ç°`useEffect` çš„ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ äº†ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ·»åŠ äº†ä¸€ä¸ªå‚æ•° `instanceId`ï¼Œå®ƒè¡¨ç¤ºåªæœ‰å½“`instanceId` å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ‰å»å†æ¬¡æ‰§è¡Œ `useEffect`ã€‚è¿™æ ·å°±å¯ä»¥é¿å…æˆ‘ä»¬å¤šæ¬¡è¯·æ±‚åå°æ•°æ®ã€‚

å½“ç„¶æˆ‘ä»¬çš„ä¾èµ–é¡¹è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå°±è¡¨ç¤ºåªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ï¼š

```
useEffect(() => {
  fetchData(instanceId){...}
  
  fetchData(instanceId);
}, []);
```

### useCallback

```
const memoizedCallback = useCallback(
  () => {
    doSomething(a);
  },
  [a],
);
```

æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥Â `useCallback`Â ï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ `memoized`Â ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚

é€šä¿—æ¥è®²å½“å‚æ•° a å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨èµ‹å€¼ç»™ `memoizedCallback`Â å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå˜é‡å°±å¯ä»¥å½“åš `useEffect` ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™æ ·å°±æœ‰æ•ˆçš„å°†é€»è¾‘åˆ†ç¦»å‡ºæ¥ã€‚

```
function Parent(){
	const [query,setQuery] = useState('q');
  const fetchData = useCallback(()=>{
  	...çœç•¥å‡½æ•°ä½“çš„å…·ä½“å®ç°
  },[query]);
  return <Child fetchData={fetchData} />
}
  
function Child({fetchData}){
  const [data,setData] = useState(null);
	useEffect(()=>{
  	fetchData().then(setData);
  },[fetchData])
}
```

ç»è¿‡ `useCallback` åŒ…è£…è¿‡çš„å‡½æ•°å¯ä»¥å½“ä½œæ™®é€šå˜é‡ä½œä¸º `useEffect` çš„ä¾èµ–ã€‚ `useCallback`åšçš„äº‹æƒ…ï¼Œå°±æ˜¯åœ¨å…¶ä¾èµ–å˜åŒ–æ—¶ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œè§¦å‘ `useEffect` çš„ä¾èµ–å˜åŒ–ï¼Œå¹¶æ¿€æ´»å…¶é‡æ–°æ‰§è¡Œã€‚

ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦åœ¨ `useEffect`Â ä¾èµ–ä¸­ç›´æ¥å¯¹æ¯” `query`Â å‚æ•°äº†ï¼Œè€Œå¯ä»¥ç›´æ¥å¯¹æ¯” `fetchData`Â å‡½æ•°ã€‚useEffect åªè¦å…³å¿ƒ `fetchData`Â å‡½æ•°æ˜¯å¦å˜åŒ–ï¼Œè€Œ `fetchData`Â å‚æ•°çš„å˜åŒ–åœ¨ `useCallback`Â æ—¶å…³å¿ƒï¼Œèƒ½åšåˆ° ä¾èµ–ä¸ä¸¢ã€é€»è¾‘å†…èšï¼Œä»è€Œå®¹æ˜“ç»´æŠ¤ã€‚

## å°ç»“

æœ¬æ–‡é€šè¿‡è®²è§£ `Class Component` ä¸ `Function Component`åˆ†åˆ«çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´åŠ æ·±å…¥çš„ç†è§£ React çš„è¿è¡ŒåŸç†ã€‚å¹¶ä¸”ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯é¢è¯•ä¸­å¸¸è§é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç†Ÿç»ƒæŒæ¡ã€‚

ä½œè€…ï¼šLion
é“¾æ¥ï¼šhttps://juejin.cn/post/6871728918643081230
æ¥æºï¼šç¨€åœŸæ˜é‡‘23:T165f,**å‰è¨€**

åœ¨æ²¡æœ‰å°è£…æ’ä»¶ä¹‹å‰ï¼Œå¦‚æœä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œé‚£ä¹ˆå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šç¼–å†™å‡ ä¸ªå¸¸ç”¨çš„ç»„ä»¶æ¥æä¾›ç»™é¡µé¢ä½¿ç”¨ï¼Œå¦‚Alert/Loadingç»„ä»¶ï¼Œè€Œä½ å¯èƒ½éœ€è¦åœ¨å¾ˆå¤šé¡µé¢ä¸­å¼•å…¥å¹¶ä¸”é€šè¿‡componentsæ³¨å†Œç»„ä»¶ï¼Œä½†æ˜¯åƒè¿™æ ·ä½¿ç”¨ç‡å¾ˆé«˜çš„ç»„ä»¶ä¸€èˆ¬æˆ‘ä»¬å¸Œæœ›å…¨å±€æ³¨å†Œåç›´æ¥å°±å¯ä»¥åœ¨ç›¸åº”é¡µé¢ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†ä»–ä»¬å°è£…æˆæ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªtoastå…¨å±€æç¤ºæ’ä»¶æ¥ä½œä¸ªç®€å•çš„ä»‹ç»

**æ’ä»¶**

```
æ’ä»¶é€šå¸¸ç”¨æ¥ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½ã€‚æ’ä»¶çš„åŠŸèƒ½èŒƒå›´æ²¡æœ‰ä¸¥æ ¼çš„é™åˆ¶â€”â€”ä¸€èˆ¬æœ‰ä¸‹é¢å‡ ç§ï¼š

1.æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€… propertyã€‚

2.æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤/è¿‡æ»¤å™¨/è¿‡æ¸¡ç­‰ã€‚

3.é€šè¿‡å…¨å±€æ··å…¥æ¥æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ã€‚

4.æ·»åŠ  Vue å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° Vue.prototype ä¸Šå®ç°ã€‚

5.ä¸€ä¸ªåº“ï¼Œæä¾›è‡ªå·±çš„ APIï¼ŒåŒæ—¶æä¾›ä¸Šé¢æåˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½ã€‚
```

vueæ’ä»¶çš„ç¼–å†™æ–¹æ³•ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸Š5ç±»ï¼Œå…¶æ³¨å†Œä¸ç»‘å®šæœºåˆ¶å¦‚ä¸‹ï¼š

```
export default {
    install(Vue, options) {
        Vue.myGlobalMethod = function () {  // 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§ï¼Œå¦‚:  vue-custom-element
            // é€»è¾‘...
        }
        Vue.directive('my-directive', {  // 2. æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤/è¿‡æ»¤å™¨/è¿‡æ¸¡ç­‰ï¼Œå¦‚ vue-touch
            bind (el, binding, vnode, oldVnode) {
                // é€»è¾‘...
            }
            ...
        })
        Vue.mixin({
            created: function () {  // 3. é€šè¿‡å…¨å±€ mixinæ–¹æ³•æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ï¼Œå¦‚: vuex
                // é€»è¾‘...
            }
            ...
        })
        Vue.prototype.$myMethod = function (options) {  // 4. æ·»åŠ å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° Vue.prototype ä¸Šå®ç°
            // é€»è¾‘...
        }
    }
}
```

\
ä¸Šæ–¹ä»£ç ä½¿ç”¨äº†es6éƒ¨åˆ†è¯­æ³•åˆ—å‡ºäº†4ç§ç¼–å†™æ’ä»¶çš„æ–¹æ³•ï¼Œè€Œinstallæ˜¯æ³¨å†Œæ’ä»¶ä¸»è¦è°ƒç”¨çš„æ–¹æ³•ï¼ŒåŒ…å«äº†ä¸¤ä¸ªå‚æ•°ï¼ˆVueå®ä¾‹å’Œè‡ªå®šä¹‰é…ç½®å±æ€§optionsï¼‰

**å¼€å‘æ’ä»¶**

æˆ‘ä»¬è¿™é‡Œä¸»è¦ä½¿ç”¨çš„æ˜¯ç¬¬å››ç§æ–¹æ³•ï¼Œå°†æˆ‘ä»¬çš„æ’ä»¶å‡½æ•°æ³¨å†Œåˆ°Vue.prototypeå®ä¾‹ä¸Šé¢\
é¦–å…ˆæˆ‘ä»¬åœ¨pluginé‡Œåˆ›å»ºä¸ªtoastæ–‡ä»¶å¤¹ç”¨æ¥æ”¾ç½®æ’ä»¶,é‡Œé¢åŒ…å«ä¸¤ä¸ªæ–‡ä»¶ï¼Œtoast.vueå’Œtoast.jsï¼Œ

\


![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3762e7487fa745d5a732f5e9697196ee~tplv-k3u1fbpfcp-zoom-1.image)

\


ç„¶ååœ¨ç¼–å†™æˆ‘ä»¬çš„æ ·å¼ç»“æ„æ–‡ä»¶toast.vue

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªvisibleå˜é‡æ¥æ§åˆ¶æç¤ºæ¡†çš„æ˜¾ç¤ºï¼Œmessageä¸ºæç¤ºçš„æ¶ˆæ¯

```
<template>
      <div v-if="visible">
          <div>{{message}}</div>
      </div>
</template>
<script>
export default {
  data() {
    return {
      visible: false,
      message: ""
    };
  }
};
</script>
```

\
æ¥ç€åœ¨toast.jsé‡Œé¢ç¼–å†™æ’ä»¶çš„æ–¹æ³•ä¸å¤„ç†å‡½æ•°

```
import ToastComponent from './toast.vue'    //å¼•å…¥toast.vueç»„ä»¶

export default {    // å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«vueæ³¨å†Œæ’ä»¶æ‰€è°ƒç”¨çš„æ–¹æ³•install
    install: function (Vue) {
        const ToastConstructor = Vue.extend(ToastComponent)    // å°†toast.vueç»„ä»¶ç”Ÿæˆä¸ºVueçš„å­ç±»
        const instance = new ToastConstructor();    // ç”Ÿæˆä¸€ä¸ªè¯¥å­ç±»çš„å®ä¾‹

        instance.$mount(document.createElement('div'))    // å°†è¿™ä¸ªå®ä¾‹æŒ‚è½½åœ¨æ–°åˆ›å»ºçš„divä¸Šï¼Œå¹¶åŠ å…¥åˆ°bodyä¸­
        document.body.appendChild(instance.$el)

        // é€šè¿‡Vueçš„åŸå‹æ³¨å†Œä¸€ä¸ªæ–¹æ³•$toastï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆmsgä¸ºæç¤ºçš„æ–‡å­—ï¼Œdurationä¸ºå»¶æ—¶å…³é—­ï¼‰
        Vue.prototype.$toast = (msg, duration = 1500) => {
            if (instance.visible) return;    // visibleæ˜¯toast.vueç»„ä»¶çš„ä¸€ä¸ªå˜é‡ï¼Œç”¨æ¥æ§åˆ¶æç¤ºæ¡†çš„æ˜¾ç¤º

            instance.message = msg;
            instance.visible = true;

            setTimeout(() => {    // é»˜è®¤å»¶æ—¶1.5så…³é—­æç¤ºæ¡†
                instance.visible = false;
            }, duration);
        }
    }
}
```

\
è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†ç»„ä»¶çš„å°è£…ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•

**ä½¿ç”¨æ’ä»¶**

ç°åœ¨æŠŠæˆ‘ä»¬å°è£…å¥½çš„æ’ä»¶å¼•å…¥åˆ°main.jsä¸­

```
import toast from './plugin/toast'
Vue.use(toast);
```

\
ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒäº†

```
this.$toast('æç¤ºæ–‡å­—')
```

æˆ‘ä»¬ç°åœ¨æŠŠtoast.vueæ·»åŠ ä¸Šæ ·å¼å’Œè¿‡åº¦æ•ˆæœï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´åŠ çš„å‹å¥½ï¼Œä»¥ä¸‹æ˜¯toast.vueæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹

```
<template>
   <!-- å…¨å±€æç¤ºæ¡† -->
   <transition name="slide-fade">
      <div v-if="visible" class="dialog-tips">
          <div>{{message}}</div>
      </div>
  </transition>
</template>
<script>
export default {
  data() {
    return {
      visible: false,
      message: ""
    };
  }
};
</script>
<style scoped>
.dialog-tips{
    min-width: 380px;
    box-sizing: border-box;
    border-radius: 4px;
    border: 1px solid #e1f3d8;
    position: fixed;
    left: 50%;
    top: 20px;
    transform: translateX(-50%);
    background-color: #f0f9eb;
    overflow: hidden;
    padding: 15px 15px 15px 20px;
    display: flex;
    align-items: center;
    color: #67c23a;
}

.slide-fade-enter, .slide-fade-leave-to {
  margin-top:-30px;
  opacity: 0;

}

.slide-fade-enter-active,.slide-fade-leave-active {
  transition: all .3s ease;
}

.slide-fade-enter-to,.slide-fade-leave {
  margin-top:0px;
  opacity:1;
}
</style>
```

\
è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœ

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6174dcccd564c12ac1a757c04726898~tplv-k3u1fbpfcp-zoom-1.image)

\


**ç»“è¯­**

ä»¥ä¸Šæˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„toastæ’ä»¶ï¼Œå¼€å‘æ’ä»¶çš„æ–¹å¼å’Œæ’ä»¶çš„ç±»å‹æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œåªæ˜¯ä»‹ç»äº†å…¶ä¸­çš„ä¸€ç§æ–¹å¼ï¼Œå¸®åŠ©å¤§å®¶äº†è§£åœ¨ç¼–å†™æ’ä»¶çš„è¿‡ç¨‹ä¸­æ‰€ç”¨åˆ°çš„æ–¹æ³•ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒæ–¹æ³•æ¥å»å¼€å‘ä¸åŒç±»å‹çš„æ’ä»¶ã€‚24:T1e17,![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_static_assets_rpm6.svg)

ä¸æ˜¯æ ‡é¢˜å…šï¼Œè¿™æ˜¯ä¸€ä½leaderåœ¨ä¸€æ¬¡ä»£ç è¯„å®¡ä¼šå¯¹å°ç»„æˆå‘˜å‘å‡ºçš„â€œæ€’å¼â€ï¼ŒåŸå› æ˜¯åœ¨ä»£ç è¯„å®¡ä¸­å‘ç°å¾ˆå¤šåœ°æ–¹è¿˜æ˜¯é‡‡ç”¨ES5çš„å†™æ³•ï¼Œä¹Ÿä¸æ˜¯è¯´ç”¨ES5å†™æ³•ä¸è¡Œï¼Œä¼šæœ‰BUGï¼Œåªæ˜¯é€ æˆä»£ç é‡å¢å¤šï¼Œå¯è¯»æ€§å˜å·®è€Œå·²ã€‚

æ°å¥½ï¼Œè¿™ä½leaderæœ‰ä»£ç æ´ç™–ï¼Œé¢å¯¹3~5å¹´ç»éªŒçš„æˆå‘˜ï¼Œè¿˜å†™è¿™ç§æ°´å¹³çš„ä»£ç ï¼Œæä¸ºä¸æ»¡ï¼Œä¸æ–­å¯¹ä»£ç è¿›è¡Œåæ§½ã€‚ä¸è¿‡å¯¹äºä»–çš„åæ§½ï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯æœ‰å¾ˆå¤§æ”¶è·çš„ï¼Œæ•…å°±æŠŠleaderçš„åæ§½è®°å½•ä¸‹æ¥ï¼Œåˆ†äº«ç»™æ˜å‹ä»¬ï¼Œè§‰å¾—æœ‰æ”¶è·ç‚¹ä¸ªèµï¼Œæœ‰é”™è¯¯çš„æˆ–è€…æ›´å¥½çš„å†™æ³•ï¼Œéå¸¸æ¬¢è¿åœ¨è¯„è®ºä¸­ç•™è¨€ã€‚

**psï¼šES5ä¹‹åçš„JSè¯­æ³•ç»Ÿç§°ES6ï¼ï¼ï¼**

## ä¸€ã€å…³äºå–å€¼çš„åæ§½

å–å€¼åœ¨ç¨‹åºä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚ä»å¯¹è±¡`obj`ä¸­å–å€¼ã€‚

```
const obj = {
    a:1,
    b:2,
    c:3,
    d:4,
    e:5,
}
```

**åæ§½**ï¼š

```
const a = obj.a;
const b = obj.b;
const c = obj.c;
const d = obj.d;
const e = obj.e;
```

æˆ–è€…

```
const f = obj.a + obj.d;
const g = obj.c + obj.e;
```

åæ§½ï¼šâ€œä¸ä¼šç”¨ES6çš„è§£æ„èµ‹å€¼æ¥å–å€¼å—ï¼Ÿ5è¡Œä»£ç ç”¨1è¡Œä»£ç æå®šä¸é¦™å—ï¼Ÿç›´æ¥ç”¨å¯¹è±¡ååŠ å±æ€§åå»å–å€¼ï¼Œè¦æ˜¯å¯¹è±¡åçŸ­è¿˜å¥½ï¼Œå¾ˆé•¿å‘¢ï¼Ÿæå¾—ä»£ç ä¸­åˆ°å¤„éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡åã€‚â€

**æ”¹è¿›**ï¼š

```
const {a,b,c,d,e} = obj;
const f = a + d;
const g = c + e;
```

**åé©³**

ä¸æ˜¯ä¸ç”¨ES6çš„è§£æ„èµ‹å€¼ï¼Œè€Œæ˜¯æœåŠ¡ç«¯è¿”å›çš„æ•°æ®å¯¹è±¡ä¸­çš„å±æ€§åä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œè¿™æ ·å–å€¼ï¼Œä¸æ˜¯è¿˜å¾—é‡æ–°åˆ›å»ºä¸ªéå†èµ‹å€¼ã€‚

**åæ§½**

çœ‹æ¥ä½ å¯¹ES6çš„è§£æ„èµ‹å€¼æŒæ¡çš„è¿˜æ˜¯ä¸å¤Ÿå½»åº•ã€‚å¦‚æœæƒ³åˆ›å»ºçš„å˜é‡åå’Œå¯¹è±¡çš„å±æ€§åä¸ä¸€è‡´ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š

```
const {a:a1} = obj;
console.log(a1);// 1
```

**è¡¥å……**

ES6çš„è§£æ„èµ‹å€¼è™½ç„¶å¥½ç”¨ã€‚ä½†æ˜¯è¦æ³¨æ„è§£æ„çš„å¯¹è±¡ä¸èƒ½ä¸º`undefined`ã€`null`ã€‚å¦åˆ™ä¼šæŠ¥é”™ï¼Œæ•…è¦ç»™è¢«è§£æ„çš„å¯¹è±¡ä¸€ä¸ªé»˜è®¤å€¼ã€‚

```
const {a,b,c,d,e} = obj || {};
```

## äºŒã€å…³äºåˆå¹¶æ•°æ®çš„åæ§½

æ¯”å¦‚åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œåˆå¹¶ä¸¤ä¸ªå¯¹è±¡ã€‚

```
const a = [1,2,3];
const b = [1,5,6];
const c = a.concat(b);//[1,2,3,1,5,6]

const obj1 = {
  a:1,
}
const obj2 = {
  b:1,
}
const obj = Object.assign({}, obj1, obj2);//{a:1,b:1}
```

**åæ§½**

ES6çš„æ‰©å±•è¿ç®—ç¬¦æ˜¯ä¸æ˜¯å¿˜è®°äº†ï¼Œè¿˜æœ‰æ•°ç»„çš„åˆå¹¶ä¸è€ƒè™‘å»é‡å—ï¼Ÿ

**æ”¹è¿›**

```
const a = [1,2,3];
const b = [1,5,6];
const c = [...new Set([...a,...b])];//[1,2,3,5,6]

const obj1 = {
  a:1,
}
const obj2 = {
  b:1,
}
const obj = {...obj1,...obj2};//{a:1,b:1}
```

## ä¸‰ã€å…³äºæ‹¼æ¥å­—ç¬¦ä¸²çš„åæ§½

```
const name = 'å°æ˜';
const score = 59;
let result = '';
if(score > 60){
  result = `${name}çš„è€ƒè¯•æˆç»©åŠæ ¼`; 
}else{
  result = `${name}çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼`; 
}
```

**åæ§½**

åƒä½ ä»¬è¿™æ ·ç”¨ES6å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œè¿˜ä¸å¦‚ä¸ç”¨ï¼Œä½ ä»¬æ ¹æœ¬ä¸æ¸…æ¥šåœ¨`${}`ä¸­å¯ä»¥åšä»€ä¹ˆæ“ä½œã€‚åœ¨`${}`ä¸­å¯ä»¥æ”¾å…¥ä»»æ„çš„JavaScriptè¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚

**æ”¹è¿›**

```
const name = 'å°æ˜';
const score = 59;
const result = `${name}${score > 60?'çš„è€ƒè¯•æˆç»©åŠæ ¼':'çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼'}`;
```

## å››ã€å…³äºifä¸­åˆ¤æ–­æ¡ä»¶çš„åæ§½

```
if(
    type == 1 ||
    type == 2 ||
    type == 3 ||
    type == 4 ||
){
   //...
}
```

**åæ§½**

ES6ä¸­æ•°ç»„å®ä¾‹æ–¹æ³•`includes`ä¼šä¸ä¼šä½¿ç”¨å‘¢ï¼Ÿ

**æ”¹è¿›**

```
const condition = [1,2,3,4];

if( condition.includes(type) ){
   //...
}
```

## äº”ã€å…³äºåˆ—è¡¨æœç´¢çš„åæ§½

åœ¨é¡¹ç›®ä¸­ï¼Œä¸€äº›æ²¡åˆ†é¡µçš„åˆ—è¡¨çš„æœç´¢åŠŸèƒ½ç”±å‰ç«¯æ¥å®ç°ï¼Œæœç´¢ä¸€èˆ¬åˆ†ä¸ºç²¾ç¡®æœç´¢å’Œæ¨¡ç³Šæœç´¢ã€‚æœç´¢ä¹Ÿè¦å«è¿‡æ»¤ï¼Œä¸€èˆ¬ç”¨`filter`æ¥å®ç°ã€‚

```
const a = [1,2,3,4,5];
const result = a.filter( 
  item =>{
    return item === 3
  }
)
```

**åæ§½**

å¦‚æœæ˜¯ç²¾ç¡®æœç´¢ä¸ä¼šç”¨ES6ä¸­çš„`find`å—ï¼Ÿæ€§èƒ½ä¼˜åŒ–æ‡‚ä¹ˆï¼Œ`find`æ–¹æ³•ä¸­æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„é¡¹ï¼Œå°±ä¸ä¼šç»§ç»­éå†æ•°ç»„ã€‚

**æ”¹è¿›**

```
const a = [1,2,3,4,5];
const result = a.find( 
  item =>{
    return item === 3
  }
)
```

## å…­ã€å…³äºæ‰å¹³åŒ–æ•°ç»„çš„åæ§½

ä¸€ä¸ªéƒ¨é—¨JSONæ•°æ®ä¸­ï¼Œå±æ€§åæ˜¯éƒ¨é—¨idï¼Œå±æ€§å€¼æ˜¯ä¸ªéƒ¨é—¨æˆå‘˜idæ•°ç»„é›†åˆï¼Œç°åœ¨è¦æŠŠæœ‰éƒ¨é—¨çš„æˆå‘˜idéƒ½æå–åˆ°ä¸€ä¸ªæ•°ç»„é›†åˆä¸­ã€‚

```
const deps = {
'é‡‡è´­éƒ¨':[1,2,3],
'äººäº‹éƒ¨':[5,8,12],
'è¡Œæ”¿éƒ¨':[5,14,79],
'è¿è¾“éƒ¨':[3,64,105],
}
let member = [];
for (let item in deps){
    const value = deps[item];
    if(Array.isArray(value)){
        member = [...member,...value]
    }
}
member = [...new Set(member)]
```

**åæ§½**

è·å–å¯¹è±¡çš„å…¨éƒ¨å±æ€§å€¼è¿˜è¦éå†å—ï¼Ÿ`Object.values`å¿˜è®°äº†å—ï¼Ÿè¿˜æœ‰æ¶‰åŠåˆ°æ•°ç»„çš„æ‰å¹³åŒ–å¤„ç†ï¼Œä¸ºå•¥ä¸ç”¨ES6æä¾›çš„`flat`æ–¹æ³•å‘¢ï¼Œè¿˜å¥½è¿™æ¬¡çš„æ•°ç»„çš„æ·±åº¦æœ€å¤šåªåˆ°2ç»´ï¼Œè¿˜è¦æ˜¯é‡åˆ°4ç»´ã€5ç»´æ·±åº¦çš„æ•°ç»„ï¼Œæ˜¯ä¸æ˜¯å¾—å¾ªç¯åµŒå¥—å¾ªç¯æ¥æ‰å¹³åŒ–ï¼Ÿ

**æ”¹è¿›**

```
const deps = {
    'é‡‡è´­éƒ¨':[1,2,3],
    'äººäº‹éƒ¨':[5,8,12],
    'è¡Œæ”¿éƒ¨':[5,14,79],
    'è¿è¾“éƒ¨':[3,64,105],
}
let member = Object.values(deps).flat(Infinity);
```

å…¶ä¸­ä½¿ç”¨`Infinity`ä½œä¸º`flat`çš„å‚æ•°ï¼Œä½¿å¾—æ— éœ€çŸ¥é“è¢«æ‰å¹³åŒ–çš„æ•°ç»„çš„ç»´åº¦ã€‚

**è¡¥å……**

`flat`æ–¹æ³•ä¸æ”¯æŒIEæµè§ˆå™¨ã€‚

## ä¸ƒã€å…³äºè·å–å¯¹è±¡å±æ€§å€¼çš„åæ§½

```
const name = obj && obj.name;
```

**åæ§½**

ES6ä¸­çš„å¯é€‰é“¾æ“ä½œç¬¦ä¼šä½¿ç”¨ä¹ˆï¼Ÿ

**æ”¹è¿›**

```
const name = obj?.name;
```

## å…«ã€å…³äºæ·»åŠ å¯¹è±¡å±æ€§çš„åæ§½

å½“ç»™å¯¹è±¡æ·»åŠ å±æ€§æ—¶ï¼Œå¦‚æœå±æ€§åæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œè¯¥æ€ä¹ˆå¤„ç†ã€‚

```
let obj = {};
let index = 1;
let key = `topic${index}`;
obj[key] = 'è¯é¢˜å†…å®¹';
```

**åæ§½**

ä¸ºä½•è¦é¢å¤–åˆ›å»ºä¸€ä¸ªå˜é‡ã€‚ä¸çŸ¥é“ES6ä¸­çš„å¯¹è±¡å±æ€§åæ˜¯å¯ä»¥ç”¨è¡¨è¾¾å¼å—ï¼Ÿ

**æ”¹è¿›**

```
let obj = {};
let index = 1;
obj[`topic${index}`] = 'è¯é¢˜å†…å®¹';
```

## ä¹ã€å…³äºè¾“å…¥æ¡†éç©ºçš„åˆ¤æ–­

åœ¨å¤„ç†è¾“å…¥æ¡†ç›¸å…³ä¸šåŠ¡æ—¶ï¼Œå¾€å¾€ä¼šåˆ¤æ–­è¾“å…¥æ¡†æœªè¾“å…¥å€¼çš„åœºæ™¯ã€‚

```
if(value !== null && value !== undefined && value !== ''){
    //...
}
```

**åæ§½**

ES6ä¸­æ–°å‡ºçš„ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦äº†è§£è¿‡å—ï¼Œè¦å†™é‚£ä¹ˆå¤šæ¡ä»¶å—ï¼Ÿ

```
if((value??'') !== ''){
  //...
}
```

## åã€å…³äºå¼‚æ­¥å‡½æ•°çš„åæ§½

å¼‚æ­¥å‡½æ•°å¾ˆå¸¸è§ï¼Œç»å¸¸æ˜¯ç”¨ Promise æ¥å®ç°ã€‚

```
const fn1 = () =>{
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(1);
    }, 300);
  });
}
const fn2 = () =>{
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(2);
    }, 600);
  });
}
const fn = () =>{
   fn1().then(res1 =>{
      console.log(res1);// 1
      fn2().then(res2 =>{
        console.log(res2)
      })
   })
}
```

**åæ§½**

å¦‚æœè¿™æ ·è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä¸æ€•å½¢æˆåœ°ç‹±å›è°ƒå•Šï¼

**æ”¹è¿›**

```
const fn = async () =>{
  const res1 = await fn1();
  const res2 = await fn2();
  console.log(res1);// 1
  console.log(res2);// 2
}
```

**è¡¥å……**

ä½†æ˜¯è¦åšå¹¶å‘è¯·æ±‚æ—¶ï¼Œè¿˜æ˜¯è¦ç”¨åˆ°`Promise.all()`ã€‚

```
const fn = () =>{
   Promise.all([fn1(),fn2()]).then(res =>{
       console.log(res);// [1,2]
   }) 
}
```

å¦‚æœå¹¶å‘è¯·æ±‚æ—¶ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªå¼‚æ­¥å‡½æ•°å¤„ç†å®Œæˆï¼Œå°±è¿”å›ç»“æœï¼Œè¦ç”¨åˆ°`Promise.race()`ã€‚

## åä¸€ã€åç»­

æ¬¢è¿æ¥å¯¹ä»¥ä¸Šåç‚¹leaderçš„åæ§½è¿›è¡Œåé©³ï¼Œä½ çš„åé©³å¦‚æœæœ‰é“ç†çš„ï¼Œä¸‹æ¬¡ä»£ç è¯„å®¡ä¼šä¸Šï¼Œæˆ‘æ›¿ä½ åé©³ã€‚

æ­¤å¤–ä»¥ä¸Šçš„æ•´ç†å†…å®¹æœ‰è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºä¸­æŒ‡æ­£ï¼Œä¸‡åˆ†æ„Ÿè°¢ã€‚

å¦‚æœä½ è¿˜æœ‰å…¶å®ƒæƒ³åæ§½çš„ï¼Œä¹Ÿéå¸¸æ¬¢è¿åœ¨è¯„è®ºä¸­ç•™ä¸‹ä½ çš„åæ§½ã€‚

è¯»å®Œæœ‰å¸®åŠ©ï¼Œä¸å¦¨å…³æ³¨ä¸€ä¸‹ï¼Œç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ã€‚

ä½œè€…ï¼šçº¢å°˜ç‚¼å¿ƒ\
é“¾æ¥ï¼šhttps://juejin.cn/post/7016520448204603423\
æ¥æºï¼šç¨€åœŸæ˜é‡‘9:["$","$Lb",null,{"blogs":[{"_id":"65551ceb3e780e3ef8d6b66f","title":"Vueçš„@inputæ€ä¹ˆåšåˆ°ä¸ç›‘å¬è¾“å…¥æ³•æ‹¼éŸ³çš„ï¼Ÿ90%äººä¸çŸ¥é“~","markContent":"$c","viewCount":54,"createTime":"2023-11-15T19:32:59.962Z","updateTime":"2023-11-16T18:43:02.777Z","__v":0,"createdAt":"2023-11-15T19:32:59.962Z","updatedAt":"2023-11-16T18:54:20.004Z"},{"_id":"64992c7b6aca61d0eb32c65f","title":"Dockerå¸¸ç”¨å‘½ä»¤è¡Œå¤§å…¨ï¼šå¿«é€ŸæŒæ¡Dockerå¸¸ç”¨æ“ä½œ","markContent":"## åœ¨Linuxä¸Šå¯åŠ¨Docker\n\n```\nsudo systemctl start docker\n```\n\n## åœ¨Linuxä¸Šé…ç½®Dockerå¼€æœºè‡ªå¯åŠ¨\n\n```\nsudo systemctl enable docker.service\n```","viewCount":510,"createTime":"2023-06-26T06:13:15.914Z","updateTime":"2023-06-26T06:22:52.972Z","__v":0,"createdAt":"2023-06-26T06:13:15.914Z","updatedAt":"2023-11-16T16:44:18.579Z"},{"_id":"63204271f4a469c3500cc11e","title":"Html input type number maxlength å±æ€§å¤±æ•ˆè§£å†³æ–¹æ³•","markContent":"$d","viewCount":1364,"createTime":"2022-09-13T08:42:25.392Z","updateTime":"2022-09-13T08:42:25.392Z","__v":0,"createdAt":"2022-09-13T08:42:25.392Z","updatedAt":"2023-11-16T16:44:18.525Z"},{"_id":"631c6745f4a469c3500cc037","title":"postcss å¿½ç•¥æ–‡ä»¶å¤¹åŠå•ä¸ªæ–‡ä»¶","markContent":"\n![](http://developers-center.oss-cn-beijing.aliyuncs.com/postcss.83d93145.svg)\n\n## èƒŒæ™¯\n\nåœ¨ä½¿ç”¨ `vue` å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨ `postcss` æ’ä»¶ `postcss-px-to-viewport` å¯¹æ•´ä¸ªé¡¹ç›®çš„ `px` è¿›è¡Œè½¬æ¢ï¼Œä½†æ˜¯åœ¨é¡¹ç›®åæœŸæˆ‘ä»¬å°†åŸç”Ÿè€é¡¹ç›®çš„ `html` ä»£ç è¿ç§»åˆ° `vue` é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹è€é¡¹ç›®çš„ `px` è¿›è¡Œè½¬æ¢ï¼Œåªéœ€è¦å¯¹æ–°é¡¹ç›®çš„ `px` è¿›è¡Œè½¬æ¢ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¯¹ `postcss` è¿›è¡Œé…ç½®ï¼Œè®©å…¶å¿½ç•¥å¯¹è€é¡¹ç›®æ–‡ä»¶çš„è½¬æ¢ã€‚\n\n## é¡¹ç›®ç¯å¢ƒ\n\n* ![](https://img.shields.io/badge/vite-^2.9.9-646cff)\n* ![](https://img.shields.io/badge/vue-^3.2.25-42b883)\n* ![](https://img.shields.io/badge/postcss--px--to--viewport-^1.1.1-dd3a0a)\n\n## Postcss å¿½ç•¥å±æ€§ `exclude`\n\nåªéœ€è¦åœ¨ `postcss.config.js` ä¸­é…ç½® `exclude` å³å¯, `exclude` æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ•°ç»„( `exclude: [RegExp]` )ï¼ŒåŒ¹é…çš„æ–‡ä»¶å°†ä¸ä¼šè¢«è½¬æ¢ã€‚\n\n## å¿½ç•¥æ–‡ä»¶å¤¹\n\n```\nexclude: [/node_modules/, /main/],\n```\n\n## å¿½ç•¥å•ä¸ªæ–‡ä»¶\n\n```\nexclude: [/src\\/pages\\/index.vue/]\n```\n\n## å®Œæ•´ç¤ºä¾‹\n\n`postcss.config.js`\n\n```\nmodule.exports = {\n    plugins: {\n      'postcss-px-to-viewport': {\n        viewportWidth: 375,\n        unitPrecision: 6,\n        unitToConvert: 'px',\n        propList: ['*'],\n        exclude: [/node_modules/, /main/, /src\\/pages\\/index.vue/]\n      }\n    }\n}\n```","viewCount":1223,"createTime":"2022-09-10T10:30:29.048Z","updateTime":"2022-09-10T10:49:17.130Z","__v":0,"createdAt":"2022-09-10T10:30:29.048Z","updatedAt":"2023-11-16T16:44:18.578Z"},{"_id":"63198665f4a469c3500cbf3f","title":"axios x-www-form-urlencoded è¯·æ±‚","markContent":"$e","viewCount":1081,"createTime":"2022-09-08T06:06:29.385Z","updateTime":"2022-09-10T10:02:57.244Z","__v":0,"createdAt":"2022-09-08T06:06:29.385Z","updatedAt":"2023-11-16T16:44:18.518Z"},{"_id":"6318bb36f4a469c3500cbefe","title":"JSå‰ç«¯å®ç°å…¨å±å’ŒcancelFullscreenæ•ˆæœ","markContent":"$f","viewCount":1015,"createTime":"2022-09-07T15:39:34.635Z","updateTime":"2022-09-07T15:39:34.635Z","__v":0,"createdAt":"2022-09-07T15:39:34.635Z","updatedAt":"2023-11-16T16:44:18.832Z"},{"_id":"6302f2b7fb839c1829f9d671","title":"åˆ©ç”¨vue-pdfå®ç°pdfåœ¨çº¿é¢„è§ˆ","markContent":"$10","viewCount":769,"createTime":"2022-08-22T03:06:31.992Z","updateTime":"2022-08-22T03:06:31.992Z","__v":0,"createdAt":"2022-08-22T03:06:31.992Z","updatedAt":"2023-11-16T16:32:52.623Z"},{"_id":"62c25d8ec97da52b249c7457","title":"Vue3 setup åŸºç¡€åŠå¥‡æŠ€æ·«å·§","markContent":"$11","viewCount":693,"createTime":"2022-07-04T03:25:02.664Z","updateTime":"2022-08-31T07:20:38.649Z","__v":0,"createdAt":"2022-07-04T03:25:02.664Z","updatedAt":"2023-11-16T18:17:34.338Z"},{"_id":"62b52408a3b6a21ae059850b","title":"web(h5)  javascript è¿è¡Œç¯å¢ƒåˆ¤æ–­","markContent":"$12","viewCount":501,"createTime":"2022-06-24T02:40:08.605Z","updateTime":"2022-07-04T02:23:25.527Z","__v":0,"createdAt":"2022-06-24T02:40:08.605Z","updatedAt":"2023-11-16T16:32:53.383Z"},{"_id":"62b277ed3e9326646e1f6074","title":"Webé€‚é… iPhoneXï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•","markContent":"$13","viewCount":243,"createTime":"2022-06-22T02:01:17.278Z","updateTime":"2022-06-22T02:01:17.278Z","__v":0,"createdAt":"2022-06-22T02:01:17.278Z","updatedAt":"2023-11-16T16:32:53.892Z"},{"_id":"62abe9c1957f80472322d1cd","title":"Vue TypeScript  ä½¿ç”¨ Mixins","markContent":"$14","viewCount":277,"createTime":"2022-06-17T02:41:05.050Z","updateTime":"2022-06-17T02:49:16.433Z","__v":0,"createdAt":"2022-06-17T02:41:05.050Z","updatedAt":"2023-11-16T16:32:54.087Z"},{"_id":"62aa9049957f80472322d145","title":"vue 2 typescript ç»å¯¹è·¯å¾„é…ç½®","markContent":"$15","viewCount":228,"createTime":"2022-06-16T02:07:05.423Z","updateTime":"2022-06-16T02:07:05.423Z","__v":0,"createdAt":"2022-06-16T02:07:05.423Z","updatedAt":"2023-11-16T16:32:54.403Z"},{"_id":"62a93f57957f80472322d0df","title":"vue2 é›†æˆ esbuild","markContent":"$16","viewCount":440,"createTime":"2022-06-15T02:09:27.122Z","updateTime":"2022-06-15T02:09:27.122Z","__v":0,"createdAt":"2022-06-15T02:09:27.122Z","updatedAt":"2023-11-16T16:32:54.684Z"},{"_id":"62a7e9c7957f80472322d084","title":"Vueé¡¹ç›®åŠ å…¥TypeScript  jsï¼Œts æ··åˆ","markContent":"$17","viewCount":343,"createTime":"2022-06-14T01:52:07.685Z","updateTime":"2022-06-14T01:56:22.440Z","__v":0,"createdAt":"2022-06-14T01:52:07.685Z","updatedAt":"2023-11-16T16:32:54.819Z"},{"_id":"62a6937ca06dc621e3fce438","title":"echarts æ¸å˜è‰² çš„ä½¿ç”¨","markContent":"$18","viewCount":329,"createTime":"2022-06-13T01:31:40.482Z","updateTime":"2022-06-13T02:03:47.151Z","__v":0,"createdAt":"2022-06-13T01:31:40.482Z","updatedAt":"2023-11-16T16:32:55.003Z"},{"_id":"629867a425f88c33044481c0","title":"Next.js 01 - åˆ›å»ºé¡¹ç›®","markContent":"$19","viewCount":207,"createTime":"2022-06-02T07:32:52.968Z","updateTime":"2022-06-02T07:32:52.968Z","__v":0,"createdAt":"2022-06-02T07:32:52.968Z","updatedAt":"2023-11-16T16:32:55.288Z"},{"_id":"6298679225f88c33044481be","title":"å¦‚ä½•å°† Node.js Docker é•œåƒå¤§å°å‡å°10å€","markContent":"$1a","viewCount":109,"createTime":"2022-06-02T07:32:34.937Z","updateTime":"2022-06-02T07:32:34.937Z","__v":0,"createdAt":"2022-06-02T07:32:34.937Z","updatedAt":"2023-11-16T16:32:55.432Z"},{"_id":"6298677d25f88c33044481bc","title":"Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥","markContent":"$1b","viewCount":419,"createTime":"2022-06-02T07:32:13.009Z","updateTime":"2022-06-02T07:32:13.009Z","__v":0,"createdAt":"2022-06-02T07:32:13.009Z","updatedAt":"2023-11-16T16:32:55.625Z"},{"_id":"6298676425f88c33044481ba","title":"åŠ¨æ€ç”Ÿæˆ uniapp é…ç½®æ–‡ä»¶ pages.json","markContent":"$1c","viewCount":253,"createTime":"2022-06-02T07:31:48.063Z","updateTime":"2022-06-02T07:31:48.063Z","__v":0,"createdAt":"2022-06-02T07:31:48.063Z","updatedAt":"2023-11-16T16:32:55.888Z"},{"_id":"6298674225f88c33044481b8","title":"fileè½¬base64, base64 è½¬ blob , blob è½¬ ArrayBuffer , buffer è½¬ blob , base64 è½¬ file","markContent":"$1d","viewCount":256,"createTime":"2022-06-02T07:31:14.144Z","updateTime":"2022-06-02T07:31:14.144Z","__v":0,"createdAt":"2022-06-02T07:31:14.144Z","updatedAt":"2023-11-16T16:38:23.590Z"},{"_id":"6298672a25f88c33044481b6","title":"vue 2 ä½¿ç”¨ swiper æ’ä»¶","markContent":"$1e","viewCount":286,"createTime":"2022-06-02T07:30:50.492Z","updateTime":"2022-06-02T07:30:50.492Z","__v":0,"createdAt":"2022-06-02T07:30:50.492Z","updatedAt":"2023-11-16T16:48:23.787Z"},{"_id":"6298671b25f88c33044481b4","title":"Git è®¾ç½®å…¨å±€æˆ–è€…å½“å‰é¡¹ç›®çš„ç”¨æˆ·ä¿¡æ¯","markContent":"$1f","viewCount":160,"createTime":"2022-06-02T07:30:35.042Z","updateTime":"2022-06-02T07:30:35.042Z","__v":0,"createdAt":"2022-06-02T07:30:35.042Z","updatedAt":"2023-11-16T16:32:56.394Z"},{"_id":"6298670a25f88c33044481b2","title":"webkitå†…æ ¸æµè§ˆå™¨ï¼ˆChrome, Edgeï¼‰ä¸­è‡ªå¸¦inputæ ·å¼input:-internal-autofill-selectedï¼ˆä¿®æ”¹inputèƒŒæ™¯è‰²ï¼‰","markContent":"$20","viewCount":290,"createTime":"2022-06-02T07:30:18.035Z","updateTime":"2022-06-02T07:30:18.035Z","__v":0,"createdAt":"2022-06-02T07:30:18.035Z","updatedAt":"2023-11-16T16:32:56.471Z"},{"_id":"629866f525f88c33044481b0","title":"Next.js æ·»åŠ  Google AdSense å¹¿å‘Š","markContent":"$21","viewCount":302,"createTime":"2022-06-02T07:29:57.250Z","updateTime":"2022-06-02T07:29:57.250Z","__v":0,"createdAt":"2022-06-02T07:29:57.250Z","updatedAt":"2023-11-16T16:32:56.531Z"},{"_id":"629866e025f88c33044481ae","title":"Git Clone æŒ‡å®šç”¨æˆ·åå¯†ç ","markContent":"![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6eff5ab7f7c349cb945fd235ca909abc~tplv-k3u1fbpfcp-zoom-1.image)\n\n## ç›®çš„\n\nä½¿ç”¨ä¸€è¡Œå‘½ä»¤è¿›è¡Œ`clone`ä¸€ä¸ªç§äººçš„ä»“åº“ï¼ˆ`https`ï¼‰ï¼Œä¹‹å‰æœªæ›¾è®¾ç½®è¿‡ä»»ä½•ç§é’¥æˆ–è€…å…¶ä»–ç›¸å…³é…ç½®ä¿¡æ¯\n\n## åŸç†\n\nåœ¨`clone`çš„`url`ä¸Šï¼Œé™„å¸¦å¸å·å¯†ç éªŒè¯å³å¯\n\n## å®ç°\n\n**\n\n```\n$ git clone https://ç”¨æˆ·:å¯†ç @git.coding.net/git/repo.git\n```\n\n## æ³¨æ„\n\nâš ï¸ urlä¸­çš„ç”¨æˆ·ä¸èƒ½ä¸ºé‚®ç®±åœ°å€ï¼ˆå› ä¸ºé‚®ç®±åœ°å€ä¸­å¸¦æœ‰`@`ç‰¹æ®Šç¬¦å·ï¼‰\n\n\nä½œè€…ï¼šNextStack\né“¾æ¥ï¼šhttps://www.jianshu.com/p/8521601d2a2d\næ¥æºï¼šç®€ä¹¦","viewCount":253,"createTime":"2022-06-02T07:29:36.342Z","updateTime":"2022-06-02T07:29:36.342Z","__v":0,"createdAt":"2022-06-02T07:29:36.342Z","updatedAt":"2023-11-16T16:32:56.623Z"},{"_id":"629866cd25f88c33044481ac","title":"vue 2 å®‰è£… tailwindcss","markContent":"![](http://developers-center.oss-cn-beijing.aliyuncs.com/undraw_tailwind_css_1egw.svg)\n\n### 1ã€å®‰è£…TailwindCSS\né€šè¿‡ npm å®‰è£… tailwindcss åŠå…¶å¯¹ç­‰ä¾èµ–é¡¹ï¼Œç„¶åè¿è¡Œ init å‘½ä»¤ç”Ÿæˆ tailwind.config.js å’Œ postcss.config.jsã€‚\n```\n npm install -D tailwindcss postcss autoprefixer\n npx tailwindcss init -p\n```\n\n### 2ã€é…ç½®æ‚¨çš„æ¨¡æ¿è·¯å¾„\n\nåœ¨ tailwind.config.js æ–‡ä»¶ä¸­æ·»åŠ æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶çš„è·¯å¾„ã€‚\n\n```\nmodule.exports = {\n    content: [\n       \"./index.html\",\n       \"./src/**/*.{vue,js,ts,jsx,tsx}\",\n    ],\n    theme: {\n        extend: {},\n    },\n    plugins: [],\n}\n```\n\n### 3ã€å°† Tailwind æŒ‡ä»¤æ·»åŠ åˆ°æ‚¨çš„ CSS\nåˆ›å»ºä¸€ä¸ª ./src/index.css æ–‡ä»¶å¹¶ä¸º Tailwind çš„æ¯ä¸ªå±‚æ·»åŠ  @tailwind æŒ‡ä»¤ã€‚\n```\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\n\n### 4ã€å¯¼å…¥ CSS æ–‡ä»¶\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport './index.css'\n\ncreateApp(App).mount('#app')\n```\n### 5ã€å¼€å§‹åœ¨æ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨ Tailwind\n\nå¼€å§‹ä½¿ç”¨ Tailwind çš„å®ç”¨ç¨‹åºç±»æ¥è®¾ç½®æ‚¨çš„å†…å®¹æ ·å¼ã€‚\n```\n<template>\n    <h1 class=\"text-3xl font-bold underline\"> Hello world! </h1>\n</template>\n```\n","viewCount":368,"createTime":"2022-06-02T07:29:17.419Z","updateTime":"2022-06-02T07:29:17.419Z","__v":0,"createdAt":"2022-06-02T07:29:17.419Z","updatedAt":"2023-11-16T16:32:56.762Z"},{"_id":"629866b125f88c33044481aa","title":"React æ¡†æ¶ç”Ÿå‘½å‘¨æœŸï¼ˆç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶ï¼‰","markContent":"$22","viewCount":215,"createTime":"2022-06-02T07:28:49.694Z","updateTime":"2022-06-02T07:28:49.694Z","__v":0,"createdAt":"2022-06-02T07:28:49.694Z","updatedAt":"2023-11-16T16:33:06.636Z"},{"_id":"6298669925f88c33044481a8","title":"vueå…¨å±€æç¤ºæ’ä»¶å¼€å‘-toast","markContent":"$23","viewCount":217,"createTime":"2022-06-02T07:28:25.063Z","updateTime":"2022-06-02T07:28:25.063Z","__v":0,"createdAt":"2022-06-02T07:28:25.063Z","updatedAt":"2023-11-16T16:33:06.621Z"},{"_id":"6298664525f88c33044481a5","title":"ä½ ä¼šç”¨ES6ï¼Œé‚£å€’æ˜¯ç”¨å•Šï¼","markContent":"$24","viewCount":271,"createTime":"2022-06-02T07:27:01.133Z","updateTime":"2022-06-02T07:27:01.133Z","__v":0,"createdAt":"2022-06-02T07:27:01.133Z","updatedAt":"2023-11-16T16:33:06.584Z"}]}]
